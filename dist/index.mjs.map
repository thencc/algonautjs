{
  "version": 3,
  "sources": ["../node_modules/.pnpm/@randlabs+msgpack-bigint@1.0.3/node_modules/@randlabs/msgpack-bigint/node_modules/ieee754/index.js", "../node_modules/.pnpm/@randlabs+msgpack-bigint@1.0.3/node_modules/@randlabs/msgpack-bigint/src/decoder.ts", "../node_modules/.pnpm/@randlabs+msgpack-bigint@1.0.3/node_modules/@randlabs/msgpack-bigint/src/encoder.ts", "../node_modules/.pnpm/@randlabs+msgpack-bigint@1.0.3/node_modules/@randlabs/msgpack-bigint/src/index.ts", "../src/index.ts", "../src/AlgonautTypes.ts", "../node_modules/.pnpm/@thencc+web3-wallet-handler@0.0.84_algosdk@2.1.0/node_modules/@thencc/web3-wallet-handler/dist/index.js", "../node_modules/.pnpm/@vue+reactivity@3.2.47/node_modules/@vue/reactivity/dist/reactivity.esm-bundler.js", "../node_modules/.pnpm/@vue+shared@3.2.47/node_modules/@vue/shared/dist/shared.esm-bundler.js", "../node_modules/.pnpm/@vue-reactivity+watch@0.2.0_5dvaz4jnhp6coqtmaqcntkvxmm/node_modules/@vue-reactivity/watch/dist/index.mjs", "../src/FrameBus.ts"],
  "sourcesContent": ["/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */\nexports.read = function (buffer, offset, isLE, mLen, nBytes) {\n  var e, m\n  var eLen = (nBytes * 8) - mLen - 1\n  var eMax = (1 << eLen) - 1\n  var eBias = eMax >> 1\n  var nBits = -7\n  var i = isLE ? (nBytes - 1) : 0\n  var d = isLE ? -1 : 1\n  var s = buffer[offset + i]\n\n  i += d\n\n  e = s & ((1 << (-nBits)) - 1)\n  s >>= (-nBits)\n  nBits += eLen\n  for (; nBits > 0; e = (e * 256) + buffer[offset + i], i += d, nBits -= 8) {}\n\n  m = e & ((1 << (-nBits)) - 1)\n  e >>= (-nBits)\n  nBits += mLen\n  for (; nBits > 0; m = (m * 256) + buffer[offset + i], i += d, nBits -= 8) {}\n\n  if (e === 0) {\n    e = 1 - eBias\n  } else if (e === eMax) {\n    return m ? NaN : ((s ? -1 : 1) * Infinity)\n  } else {\n    m = m + Math.pow(2, mLen)\n    e = e - eBias\n  }\n  return (s ? -1 : 1) * m * Math.pow(2, e - mLen)\n}\n\nexports.write = function (buffer, value, offset, isLE, mLen, nBytes) {\n  var e, m, c\n  var eLen = (nBytes * 8) - mLen - 1\n  var eMax = (1 << eLen) - 1\n  var eBias = eMax >> 1\n  var rt = (mLen === 23 ? Math.pow(2, -24) - Math.pow(2, -77) : 0)\n  var i = isLE ? 0 : (nBytes - 1)\n  var d = isLE ? 1 : -1\n  var s = value < 0 || (value === 0 && 1 / value < 0) ? 1 : 0\n\n  value = Math.abs(value)\n\n  if (isNaN(value) || value === Infinity) {\n    m = isNaN(value) ? 1 : 0\n    e = eMax\n  } else {\n    e = Math.floor(Math.log(value) / Math.LN2)\n    if (value * (c = Math.pow(2, -e)) < 1) {\n      e--\n      c *= 2\n    }\n    if (e + eBias >= 1) {\n      value += rt / c\n    } else {\n      value += rt * Math.pow(2, 1 - eBias)\n    }\n    if (value * c >= 2) {\n      e++\n      c /= 2\n    }\n\n    if (e + eBias >= eMax) {\n      m = 0\n      e = eMax\n    } else if (e + eBias >= 1) {\n      m = ((value * c) - 1) * Math.pow(2, mLen)\n      e = e + eBias\n    } else {\n      m = value * Math.pow(2, eBias - 1) * Math.pow(2, mLen)\n      e = 0\n    }\n  }\n\n  for (; mLen >= 8; buffer[offset + i] = m & 0xff, i += d, m /= 256, mLen -= 8) {}\n\n  e = (e << mLen) | m\n  eLen += mLen\n  for (; eLen > 0; buffer[offset + i] = e & 0xff, i += d, e /= 256, eLen -= 8) {}\n\n  buffer[offset + i - d] |= s * 128\n}\n", "//License: Apache 2.0. See LICENSE.md\n\nimport * as ieee754 from \"ieee754\";\n\n// -----------------------------------------------------------------------------\n\nconst uint32Max = BigInt(0x100000000);\n\nconst minHiSafeInt = Math.floor(Number.MIN_SAFE_INTEGER / 0x1_0000_0000);\nconst maxHiSafeInt = Math.floor(Number.MAX_SAFE_INTEGER / 0x1_0000_0000);\n\n// -----------------------------------------------------------------------------\n\ntype IReaderFunction = (param?: number | IReaderFunction) => any;\n\ninterface ITokenDecoder {\n\tfn: IReaderFunction;\n\tparam?: number | IReaderFunction;\n}\n\n// -----------------------------------------------------------------------------\n\nexport interface MsgPackDecoderOptions {\n\textension?: (type: number, data: Uint8Array) => any;\n}\n\nexport class MsgPackDecoder {\n\tprivate buffer: Uint8Array;\n\tprivate ofs: number;\n\tprivate len: number;\n\tprivate extension?: (type: number, data: Uint8Array) => any;\n\tprivate tokenMap: ITokenDecoder[];\n\n\tconstructor(buffer: Buffer | Uint8Array, options?: MsgPackDecoderOptions) {\n\t\tif (buffer instanceof Uint8Array) {\n\t\t\tthis.buffer = buffer;\n\t\t}\n\t\telse {\n\t\t\tthrow new Error(\"UInt64: invalid data\");\n\t\t}\n\t\tthis.ofs = 0;\n\t\tthis.len = buffer.length;\n\n\t\tthis.extension = undefined;\n\t\tif (options && options.extension) {\n\t\t\tthis.extension = options.extension;\n\t\t}\n\n\t\tthis.tokenMap = [];\n\t\tthis.tokenMap.push({ fn: this.constantNull.bind(this) }); //0xC0\n\t\tthis.tokenMap.push({ fn: this.invalidOpcode.bind(this) }); //0xC1\n\t\tthis.tokenMap.push({ fn: this.constantFalse.bind(this) }); //0xC2\n\t\tthis.tokenMap.push({ fn: this.constantTrue.bind(this) }); //0xC3\n\n\t\tthis.tokenMap.push({ fn: this.readBinary.bind(this), param: this.readUint8.bind(this) }); //0xC4\n\t\tthis.tokenMap.push({ fn: this.readBinary.bind(this), param: this.readUint16.bind(this) }); //0xC5\n\t\tthis.tokenMap.push({ fn: this.readBinary.bind(this), param: this.readUint32.bind(this) }); //0xC6\n\n\t\tthis.tokenMap.push({ fn: this.readExtension.bind(this), param: this.readUint8.bind(this) }); //0xC7\n\t\tthis.tokenMap.push({ fn: this.readExtension.bind(this), param: this.readUint16.bind(this) }); //0xC8\n\t\tthis.tokenMap.push({ fn: this.readExtension.bind(this), param: this.readUint32.bind(this) }); //0xC9\n\n\t\tthis.tokenMap.push({ fn: this.readFloat.bind(this) }); //0xCA\n\t\tthis.tokenMap.push({ fn: this.readDouble.bind(this) }); //0xCB\n\n\t\tthis.tokenMap.push({ fn: this.readUint8.bind(this) }); //0xCC\n\t\tthis.tokenMap.push({ fn: this.readUint16.bind(this) }); //0xCD\n\t\tthis.tokenMap.push({ fn: this.readUint32.bind(this) }); //0xCE\n\t\tthis.tokenMap.push({ fn: this.readUint64.bind(this) }); //0xCF\n\n\t\tthis.tokenMap.push({ fn: this.readInt8.bind(this) }); //0xD0\n\t\tthis.tokenMap.push({ fn: this.readInt16.bind(this) }); //0xD1\n\t\tthis.tokenMap.push({ fn: this.readInt32.bind(this) }); //0xD2\n\t\tthis.tokenMap.push({ fn: this.readInt64.bind(this) }); //0xD3\n\n\t\tthis.tokenMap.push({ fn: this.readExtension.bind(this), param: 1 }); //0xD4\n\t\tthis.tokenMap.push({ fn: this.readExtension.bind(this), param: 2 }); //0xD5\n\t\tthis.tokenMap.push({ fn: this.readExtension.bind(this), param: 4 }); //0xD6\n\t\tthis.tokenMap.push({ fn: this.readExtension.bind(this), param: 8 }); //0xD7\n\t\tthis.tokenMap.push({ fn: this.readExtension.bind(this), param: 16 }); //0xD8\n\n\t\tthis.tokenMap.push({ fn: this.readString.bind(this), param: this.readUint8.bind(this) }); //0xD9\n\t\tthis.tokenMap.push({ fn: this.readString.bind(this), param: this.readUint16.bind(this) }); //0xDA\n\t\tthis.tokenMap.push({ fn: this.readString.bind(this), param: this.readUint32.bind(this) }); //0xDB\n\n\t\tthis.tokenMap.push({ fn: this.readArray.bind(this), param: this.readUint16.bind(this) }); //0xDC\n\t\tthis.tokenMap.push({ fn: this.readArray.bind(this), param: this.readUint32.bind(this) }); //0xDD\n\n\t\tthis.tokenMap.push({ fn: this.readMap.bind(this), param: this.readUint16.bind(this) }); //0xDE\n\t\tthis.tokenMap.push({ fn: this.readMap.bind(this), param: this.readUint32.bind(this) }); //0xDF\n\t}\n\n\tpublic process(): any {\n\t\tif (this.ofs >= this.len) {\n\t\t\treturn undefined;\n\t\t}\n\n\t\tconst opcode = this.readUint8();\n\t\tif (opcode < 0x80) {\n\t\t\treturn opcode; //positive constant\n\t\t}\n\t\tif (opcode >= 0xE0) {\n\t\t\treturn opcode - 0x100; //negative constant\n\t\t}\n\t\tif (opcode < 0x90) {\n\t\t\treturn this.readMap(opcode - 0x80);\n\t\t}\n\t\tif (opcode < 0xA0) {\n\t\t\treturn this.readArray(opcode - 0x90);\n\t\t}\n\t\tif (opcode < 0xC0) {\n\t\t\treturn this.readString(opcode - 0xA0);\n\t\t}\n\n\t\treturn this.tokenMap[opcode - 0xC0].fn(this.tokenMap[opcode - 0xC0].param);\n\t}\n\n\tprivate readUint8(/*param?: number | IReaderFunction*/): number {\n\t\tthis.checkAvailable(1);\n\t\tconst n = this.buffer[this.ofs];\n\t\tthis.ofs += 1;\n\t\treturn n;\n\t}\n\n\tprivate readInt8(/*param?: number | IReaderFunction*/): number {\n\t\tthis.checkAvailable(1);\n\t\tconst n = this.buffer[this.ofs];\n\t\tthis.ofs += 1;\n\t\treturn (n & 0x80) ? (n - 256) : n;\n\t}\n\n\tprivate readUint16(/*param?: number | IReaderFunction*/): number {\n\t\tthis.checkAvailable(2);\n\t\tlet n = this.buffer[this.ofs] << 8;\n\t\tn |= this.buffer[this.ofs + 1];\n\t\tthis.ofs += 2;\n\t\treturn n;\n\t}\n\n\tprivate readInt16(/*param?: number | IReaderFunction*/): number {\n\t\tthis.checkAvailable(2);\n\t\tconst n = this.buffer[this.ofs];\n\t\tthis.ofs += 2;\n\t\treturn (n & 0x8000) ? (n - 65536) : n;\n\t}\n\n\tprivate readUint32(/*param?: number | IReaderFunction*/): number {\n\t\tthis.checkAvailable(4);\n\t\tlet n = this.buffer[this.ofs + 1] << 16;\n\t\tn |= this.buffer[this.ofs + 2] << 8;\n\t\tn |= this.buffer[this.ofs + 3];\n\t\tn += this.buffer[this.ofs] * 16777216; //the high byte at the end because OR operator uses 32-bit signed values\n\t\tthis.ofs += 4;\n\t\treturn n;\n\t}\n\n\tprivate readInt32(/*param?: number | IReaderFunction*/): number {\n\t\tthis.checkAvailable(4);\n\t\tlet n = this.buffer[this.ofs + 1] << 16;\n\t\tn |= this.buffer[this.ofs + 2] << 8;\n\t\tn |= this.buffer[this.ofs + 3];\n\t\tn |= this.buffer[this.ofs] << 24;\n\t\tthis.ofs += 4;\n\t\treturn n;\n\t}\n\n\tprivate readUint64(/*param?: number | IReaderFunction*/): number|bigint {\n\t\tconst hi = this.readUint32();\n\t\tconst lo = this.readUint32();\n\t\tif (hi > maxHiSafeInt) {\n\t\t\treturn (BigInt(hi) * uint32Max) + BigInt(lo);\n\t\t}\n\t\treturn (hi * 0x1_0000_0000) + lo;\n\t}\n\n\tprivate readInt64(/*param?: number | IReaderFunction*/): number|bigint {\n\t\tconst hi = this.readUint32();\n\t\tconst lo = this.readUint32();\n\n\t\tif (hi < minHiSafeInt || (hi === minHiSafeInt && lo === 0) || hi > maxHiSafeInt) {\n\t\t\treturn (BigInt(hi) * uint32Max) + BigInt(lo);\n\t\t}\n\t\treturn (hi * 0x1_0000_0000) + lo;\n\t}\n\n\tprivate readFloat(/*param?: number | IReaderFunction*/): any {\n\t\tthis.checkAvailable(4);\n\t\tconst n = ieee754.read(this.buffer, this.ofs, false, 23, 4);\n\t\tthis.ofs += 8;\n\t\treturn n;\n\t}\n\n\tprivate readDouble(/*param?: number | IReaderFunction*/): any {\n\t\tthis.checkAvailable(8);\n\t\tconst n = ieee754.read(this.buffer, this.ofs, false, 52, 8);\n\t\tthis.ofs += 8;\n\t\treturn n;\n\t}\n\n\tprivate constantNull(/*param?: number | IReaderFunction*/): any {\n\t\treturn null;\n\t}\n\n\tprivate constantFalse(/*param?: number | IReaderFunction*/): any {\n\t\treturn false;\n\t}\n\n\tprivate constantTrue(/*param?: number | IReaderFunction*/): any {\n\t\treturn true;\n\t}\n\n\tprivate readBinary(param?: number | IReaderFunction): any {\n\t\tif (typeof param === 'function') {\n\t\t\tparam = param(0) as number;\n\t\t}\n\n\t\tif (!param) {\n\t\t\treturn new Uint8Array();\n\t\t}\n\t\tthis.checkAvailable(param);\n\n\t\tconst value = this.buffer.slice(this.ofs, this.ofs + param);\n\n\t\tthis.ofs += param;\n\n\t\treturn value;\n\t}\n\n\tprivate readExtension(param?: number | IReaderFunction): any {\n\t\tif (typeof param === 'function') {\n\t\t\tparam = param(0) as number;\n\t\t}\n\n\t\tconst type = this.readUint8();\n\t\tif (param) {\n\t\t\tthis.checkAvailable(param);\n\t\t}\n\n\t\tif (!this.extension) {\n\t\t\tthrow new Error(\"MsgPackDecoder: unsupported extension of type 0x\" + type.toString(16));\n\t\t}\n\n\t\tconst start = this.ofs;\n\t\tthis.ofs += param!;\n\t\treturn this.extension(type, this.buffer.slice(start, start + param!));\n\t}\n\n\tprivate readString(param?: number | IReaderFunction): any {\n\t\tif (typeof param === 'function') {\n\t\t\tparam = param(0) as number;\n\t\t}\n\n\t\tif (!param) {\n\t\t\treturn \"\";\n\t\t}\n\t\tthis.checkAvailable(param);\n\n\t\tlet invalidUtf8 = false;\n\t\tconst savedOffset = this.ofs;\n\t\tconst savedParam = param;\n\n\t\tlet str = [];\n\n\t\twhile (param > 0) {\n\t\t\tlet ch = this.buffer[this.ofs];\n\t\t\tthis.ofs += 1;\n\t\t\tparam -= 1;\n\n\t\t\tif (ch < 128) {\n\t\t\t\tstr.push(String.fromCharCode(ch));\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tif ((ch & 0xE0) === 0xC0) {\n\t\t\t\tif (param < 1) { //invalid character found\n\t\t\t\t\tinvalidUtf8 = true;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\tch = ((ch & 0x1F) << 6) | (this.buffer[this.ofs] & 0x3F);\n\t\t\t\tthis.ofs += 1;\n\t\t\t\tparam -= 1;\n\t\t\t}\n\t\t\telse if ((ch & 0xF0) === 0xE0) {\n\t\t\t\tif (param < 2) { //invalid character found\n\t\t\t\t\tinvalidUtf8 = true;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\tch = ((ch & 0x0F) << 12) | ((this.buffer[this.ofs] & 0x3F) << 6) | (this.buffer[this.ofs + 1] & 0x3F);\n\t\t\t\tthis.ofs += 2;\n\t\t\t\tparam -= 2;\n\t\t\t}\n\t\t\telse if ((ch & 0xF8) === 0xF0) {\n\t\t\t\tif (param < 3) { //invalid character found\n\t\t\t\t\tinvalidUtf8 = true;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\tch = ((ch & 0x0F) << 18) | ((this.buffer[this.ofs] & 0x3F) << 12) | ((this.buffer[this.ofs + 1] & 0x3F) << 6) |\n\t\t\t\t\t(this.buffer[this.ofs + 2] & 0x3F);\n\t\t\t\tthis.ofs += 3;\n\t\t\t\tparam -= 3;\n\t\t\t}\n\t\t\telse {\n\t\t\t\t//invalid character found\n\t\t\t\tinvalidUtf8 = true;\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tif (ch >= 0x010000) {\n\t\t\t\tch -= 0x010000;\n\t\t\t\tstr.push(String.fromCharCode((ch >>> 10) + 0xD800, (ch & 0x3FF) + 0xDC00));\n\t\t\t}\n\t\t\telse {\n\t\t\t\tstr.push(String.fromCharCode(ch));\n\t\t\t}\n\t\t}\n\n\t\t//code will enter inside this loop if we found an invalid UTF-8 character to decode in the previous one\n\t\tif (invalidUtf8) {\n\t\t\tstr = [];\n\t\t\tthis.ofs = savedOffset;\n\t\t\tfor (param = savedParam; param > 0; param -= 1) {\n\t\t\t\tstr.push(String.fromCharCode(this.buffer[this.ofs]));\n\t\t\t\tthis.ofs += 1;\n\t\t\t}\n\t\t}\n\n\t\treturn str.join(\"\");\n\t}\n\n\tprivate readMap(param?: number | IReaderFunction): any {\n\t\tif (typeof param === 'function') {\n\t\t\tparam = param(0) as number;\n\t\t}\n\n\t\tconst value:Record<any, any> = {};\n\n\t\tfor (let idx = 0; idx < param!; idx++) {\n\t\t\tconst key = this.process();\n\t\t\tvalue[key] = this.process();\n\t\t}\n\n\t\treturn value;\n\t}\n\n\tprivate readArray(param?: number | IReaderFunction): any {\n\t\tif (typeof param === 'function') {\n\t\t\tparam = param(0) as number;\n\t\t}\n\n\t\tconst value = new Array(param as number);\n\n\t\tfor (let idx = 0; idx < param!; idx++) {\n\t\t\tvalue[idx] = this.process();\n\t\t}\n\n\t\treturn value;\n\t}\n\n\tprivate checkAvailable(count: number): void {\n\t\tif (this.len - this.ofs < count) {\n\t\t\tthrow new Error(\"MsgPackDecoder: end of stream reached\");\n\t\t}\n\t}\n\n\tprivate invalidOpcode(/*param?: number | IReaderFunction*/): any {\n\t\tthrow new Error(\"MsgPackDecoder: invalid opcode\");\n\t}\n}\n", "//License: Apache 2.0. See LICENSE.md\n\n// -----------------------------------------------------------------------------\n\nconst uint8Max = BigInt(0x100);\nconst uint16Max = BigInt(0x10000);\nconst uint32Max = BigInt(0x100000000);\nconst uint64Max = BigInt(\"0x10000000000000000\");\n\nconst neg32 = BigInt(-0x20);\nconst int8Min = BigInt(-0x80);\nconst int16Min = BigInt(-0x8000);\nconst int32Min = BigInt(-0x80000000);\nconst int64Min = BigInt(\"-9223372036854775808\");\n\n// -----------------------------------------------------------------------------\n\nexport interface MsgPackEncoderExtensionResult {\n\ttype: number;\n\tdata: Uint8Array;\n}\n\nexport interface MsgPackEncoderOptions {\n\textension?: (obj: unknown) => MsgPackEncoderExtensionResult;\n\tsortKeys?: boolean;\n\tuseFloat?: boolean;\n}\n\nexport class MsgPackEncoder {\n\tprivate obj: any;\n\tprivate buffer: Uint8Array;\n\tprivate bufferView: DataView;\n\tprivate bufferLen: number;\n\tprivate extension: ((obj: unknown) => MsgPackEncoderExtensionResult) | null;\n\tprivate sortKeys: boolean;\n\tprivate useFloat: boolean;\n\n\tconstructor(obj: any, options?: MsgPackEncoderOptions) {\n\t\tthis.obj = obj;\n\t\tthis.bufferView = new DataView(new ArrayBuffer(2048));\n\t\tthis.buffer = new Uint8Array(this.bufferView.buffer);\n\t\tthis.bufferLen = 0;\n\n\t\tthis.extension = null;\n\t\tthis.sortKeys = false;\n\t\tthis.useFloat = false;\n\t\tif (options) {\n\t\t\tif (options.extension) {\n\t\t\t\tthis.extension = options.extension;\n\t\t\t}\n\t\t\tif (options.sortKeys) {\n\t\t\t\tthis.sortKeys = options.sortKeys;\n\t\t\t}\n\t\t\tif (options.useFloat) {\n\t\t\t\tthis.useFloat = options.useFloat;\n\t\t\t}\n\t\t}\n\t}\n\n\tpublic process(): Uint8Array {\n\t\t//parse input data\n\t\tthis.parse(this.obj);\n\n\t\treturn new Uint8Array(this.buffer.buffer, 0, this.bufferLen);\n\t}\n\n\tprivate parse(obj: any): void {\n\t\tif (obj === null) {\n\t\t\tthis.encodeNull();\n\t\t}\n\t\telse if (typeof obj === \"boolean\") {\n\t\t\tthis.encodeBoolean(obj);\n\t\t}\n\t\telse if (typeof obj === \"number\") {\n\t\t\tthis.encodeNumber(obj);\n\t\t}\n\t\telse if (typeof obj === \"string\") {\n\t\t\tthis.encodeString(obj);\n\t\t}\n\t\telse if (typeof obj === \"bigint\") {\n\t\t\tthis.encodeBigInt(obj);\n\t\t}\n\t\telse {\n\t\t\tthis.encodeObject(obj);\n\t\t}\n\t}\n\n\tprivate encodeNull(): void {\n\t\tthis.writeUint8(0xC0);\n\t}\n\n\tprivate encodeBoolean(b: boolean): void {\n\t\tthis.writeUint8(b === false ? 0xC2 : 0xC3);\n\t}\n\n\tprivate encodeNumber(n: number): void {\n\t\tif (Number.isSafeInteger(n)) {\n\t\t\tif (n >= 0) {\n\t\t\t\tif (n < 0x80) {\n\t\t\t\t\tthis.writeUint8(n);\n\t\t\t\t}\n\t\t\t\telse if (n < 0x100) {\n\t\t\t\t\tthis.writeUint8(0xCC);\n\t\t\t\t\tthis.writeUint8(n);\n\t\t\t\t}\n\t\t\t\telse if (n < 0x10000) {\n\t\t\t\t\tthis.writeUint8(0xCD);\n\t\t\t\t\tthis.writeUint16(n);\n\t\t\t\t}\n\t\t\t\telse if (n < 0x100000000) {\n\t\t\t\t\tthis.writeUint8(0xCE);\n\t\t\t\t\tthis.writeUint32(n);\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tthis.writeUint8(0xCF);\n\t\t\t\t\tthis.writeUint64(n);\n\t\t\t\t}\n\t\t\t}\n\t\t\telse {\n\t\t\t\tif (n >= -0x20) {\n\t\t\t\t\tthis.writeUint8(0xE0 | (n + 0x20));\n\t\t\t\t}\n\t\t\t\telse if (n >= -0x80) {\n\t\t\t\t\tthis.writeUint8(0xD0);\n\t\t\t\t\tthis.writeInt8(n);\n\t\t\t\t}\n\t\t\t\telse if (n >= -0x8000) {\n\t\t\t\t\tthis.writeUint8(0xD1);\n\t\t\t\t\tthis.writeInt16(n);\n\t\t\t\t}\n\t\t\t\telse if (n >= -0x80000000) {\n\t\t\t\t\tthis.writeUint8(0xD2);\n\t\t\t\t\tthis.writeInt32(n);\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tthis.writeUint8(0xD3);\n\t\t\t\t\tthis.writeInt64(n);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\telse {\n\t\t\tif (this.useFloat) {\n\t\t\t\tthis.writeUint8(0xCA);\n\t\t\t\tthis.writeFloat(n);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tthis.writeUint8(0xCB);\n\t\t\t\tthis.writeDouble(n);\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate encodeString(s: string): void {\n\t\tconst strLen = s.length;\n\n\t\tlet buf = new Uint8Array(s.length * 2);\n\t\tlet ofs = 0;\n\n\t\tlet pos = 0;\n\t\twhile (pos < strLen) {\n\t\t\tif (buf.byteLength - ofs < 4) {\n\t\t\t\tconst newBuf = new Uint8Array(buf.byteLength + 2048);\n\t\t\t\tnewBuf.set(buf);\n\t\t\t\tbuf = newBuf;\n\t\t\t}\n\n\t\t\tlet ch = s.charCodeAt(pos);\n\t\t\tpos += 1;\n\n\t\t\tif ((ch & 0xFFFFFF80) === 0) {\n\t\t\t\tbuf[ofs] = ch;\n\t\t\t\tofs += 1;\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\telse if ((ch & 0xFFFFF800) === 0) {\n\t\t\t\t// 2-bytes\n\t\t\t\tbuf[ofs] = ((ch >> 6) & 0x1f) | 0xc0;\n\t\t\t\tofs += 1;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tif (ch >= 0xD800 && ch <= 0xDBFF && pos < strLen) {\n\t\t\t\t\tconst ch2 = s.charCodeAt(pos);\n\t\t\t\t\tif ((ch2 & 0xFC00) === 0xDC00) {\n\t\t\t\t\t\tpos += 1;\n\t\t\t\t\t\tch = ((ch & 0x3FF) << 10) + (ch2 & 0x3FF) + 0x10000;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif ((ch & 0xffff0000) === 0) {\n\t\t\t\t\tbuf[ofs] = ((ch >> 12) & 0x0F) | 0xE0;\n\t\t\t\t\tbuf[ofs + 1] = ((ch >> 6) & 0x3F) | 0x80;\n\t\t\t\t\tofs += 2;\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tbuf[ofs] = ((ch >> 18) & 0x07) | 0xF0;\n\t\t\t\t\tbuf[ofs + 1] = ((ch >> 12) & 0x3F) | 0x80;\n\t\t\t\t\tbuf[ofs + 2] = ((ch >> 6) & 0x3F) | 0x80;\n\t\t\t\t\tofs += 3;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tbuf[ofs] = (ch & 0x3F) | 0x80;\n\t\t\tofs += 1;\n\t\t}\n\n\t\tif (ofs < 32) {\n\t\t\tthis.writeUint8(0xA0 + ofs);\n\t\t}\n\t\telse if (ofs < 0x100) {\n\t\t\tthis.writeUint8(0xD9);\n\t\t\tthis.writeUint8(ofs);\n\t\t}\n\t\telse if (ofs < 0x10000) {\n\t\t\tthis.writeUint8(0xDA);\n\t\t\tthis.writeUint16(ofs);\n\t\t}\n\t\telse if (ofs < 0x100000000) {\n\t\t\tthis.writeUint8(0xDB);\n\t\t\tthis.writeUint32(ofs);\n\t\t}\n\t\telse {\n\t\t\tthrow new Error(\"MsgPackEncoder: string too long\");\n\t\t}\n\n\t\tthis.writeBuffer(new Uint8Array(buf.buffer, 0, ofs));\n\t}\n\n\tencodeBigInt(obj: bigint): void {\n\t\tif (obj >= BigInt(0)) {\n\t\t\tif (obj < BigInt(0x80)) {\n\t\t\t\tthis.writeUint8(Number(obj));\n\t\t\t}\n\t\t\telse if (obj < uint8Max) {\n\t\t\t\tthis.writeUint8(0xCC);\n\t\t\t\tthis.writeUint8(Number(obj));\n\t\t\t}\n\t\t\telse if (obj < uint16Max) {\n\t\t\t\tthis.writeUint8(0xCD);\n\t\t\t\tthis.writeUint16(Number(obj));\n\t\t\t}\n\t\t\telse if (obj < uint32Max) {\n\t\t\t\tthis.writeUint8(0xCE);\n\t\t\t\tthis.writeUint32(Number(obj));\n\t\t\t}\n\t\t\telse if (obj < uint64Max) {\n\t\t\t\tthis.writeUint8(0xCF);\n\t\t\t\tthis.writeUint64(obj);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tthrow new Error(\"MsgPackEncoder: positive bigint too big\");\n\t\t\t}\n\t\t}\n\t\telse {\n\t\t\tif (obj >= neg32) {\n\t\t\t\tthis.writeUint8(0xE0 | (Number(obj) + 0x20));\n\t\t\t}\n\t\t\telse if (obj >= int8Min) {\n\t\t\t\tthis.writeUint8(0xD0);\n\t\t\t\tthis.writeInt8(Number(obj));\n\t\t\t}\n\t\t\telse if (obj >= int16Min) {\n\t\t\t\tthis.writeUint8(0xD1);\n\t\t\t\tthis.writeInt16(Number(obj));\n\t\t\t}\n\t\t\telse if (obj >= int32Min) {\n\t\t\t\tthis.writeUint8(0xD2);\n\t\t\t\tthis.writeInt32(Number(obj));\n\t\t\t}\n\t\t\telse if (obj >= int64Min) {\n\t\t\t\tthis.writeUint8(0xD3);\n\t\t\t\tthis.writeInt64(obj);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tthrow new Error(\"MsgPackEncoder: negative bigint too big\");\n\t\t\t}\n\t\t}\n\t}\n\n\tencodeObject(obj: unknown): void {\n\t\tif (this.extension) {\n\t\t\tconst ext = this.extension(obj);\n\t\t\tif (ext) {\n\t\t\t\tthis.encodeExtension(ext);\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t\tif (Array.isArray(obj)) {\n\t\t\tthis.encodeArray(obj);\n\t\t\treturn;\n\t\t}\n\t\tif (ArrayBuffer.isView(obj)) {\n\t\t\tthis.encodeBinary(obj);\n\t\t\treturn;\n\t\t}\n\t\tif (typeof obj === \"object\") {\n\t\t\tthis.encodeMap(obj as Record<string, unknown>);\n\t\t\treturn;\n\t\t}\n\n\t\tthrow new Error(\"MsgPackEncoder: unsupported object of type \" + Object.prototype.toString.apply(obj));\n\t}\n\n\tencodeBinary(obj: ArrayBufferView): void {\n\t\tconst size = obj.byteLength;\n\t\tif (size < 0x100) {\n\t\t\tthis.writeUint8(0xC4);\n\t\t\tthis.writeUint8(size);\n\t\t}\n\t\telse if (size < 0x10000) {\n\t\t\tthis.writeUint8(0xC5);\n\t\t\tthis.writeUint16(size);\n\t\t}\n\t\telse if (size < 0x100000000) {\n\t\t\tthis.writeUint8(0xC6);\n\t\t\tthis.writeUint32(size);\n\t\t}\n\t\telse {\n\t\t\tthrow new Error(\"MsgPackEncoder: binary object is too large\");\n\t\t}\n\n\t\tthis.writeBuffer(new Uint8Array(obj.buffer, obj.byteOffset, obj.byteLength));\n\t}\n\n\tencodeArray(obj: Array<unknown>): void {\n\t\tconst size = obj.length;\n\t\tif (size < 16) {\n\t\t\tthis.writeUint8(0x90 + size);\n\t\t}\n\t\telse if (size < 0x10000) {\n\t\t\tthis.writeUint8(0xDC);\n\t\t\tthis.writeUint16(size);\n\t\t}\n\t\telse if (size < 0x100000000) {\n\t\t\tthis.writeUint8(0xDD);\n\t\t\tthis.writeUint32(size);\n\t\t}\n\t\telse {\n\t\t\tthrow new Error(\"MsgPackEncoder: array object is too large\");\n\t\t}\n\n\t\tfor (const v of obj) {\n\t\t\tthis.parse(v);\n\t\t}\n\t}\n\n\tencodeMap(obj: Record<string, unknown>): void {\n\t\tconst keys = Object.keys(obj);\n\t\tif (this.sortKeys) {\n\t\t\tkeys.sort();\n\t\t}\n\n\t\tlet keysCount = 0;\n\t\tfor (const key of keys) {\n\t\t\tif (obj[key] !== undefined) {\n\t\t\t\tkeysCount += 1;\n\t\t\t}\n\t\t}\n\n\t\tif (keysCount < 16) {\n\t\t\tthis.writeUint8(0x80 + keysCount);\n\t\t}\n\t\telse if (keysCount < 0x10000) {\n\t\t\tthis.writeUint8(0xDE);\n\t\t\tthis.writeUint16(keysCount);\n\t\t}\n\t\telse if (keysCount < 0x100000000) {\n\t\t\tthis.writeUint8(0xDF);\n\t\t\tthis.writeUint32(keysCount);\n\t\t}\n\t\telse {\n\t\t\tthrow new Error(\"MsgPackEncoder: array object is too large\");\n\t\t}\n\n\t\tfor (const key of keys) {\n\t\t\tif (obj[key] !== undefined) {\n\t\t\t\tthis.encodeString(key);\n\t\t\t\tthis.parse(obj[key]);\n\t\t\t}\n\t\t}\n\t}\n\n\tencodeExtension(ext: MsgPackEncoderExtensionResult): void {\n\t\tconst size = ext.data.length;\n\t\tif (size === 1) {\n\t\t\tthis.writeUint8(0xD4);\n\t\t}\n\t\telse if (size === 2) {\n\t\t\tthis.writeUint8(0xD5);\n\t\t}\n\t\telse if (size === 4) {\n\t\t\tthis.writeUint8(0xD6);\n\t\t}\n\t\telse if (size === 8) {\n\t\t\tthis.writeUint8(0xD7);\n\t\t}\n\t\telse if (size === 16) {\n\t\t\tthis.writeUint8(0xD8);\n\t\t}\n\t\telse if (size < 0x100) {\n\t\t\tthis.writeUint8(0xC7);\n\t\t\tthis.writeUint8(size);\n\t\t}\n\t\telse if (size < 0x10000) {\n\t\t\tthis.writeUint8(0xC8);\n\t\t\tthis.writeUint16(size);\n\t\t}\n\t\telse if (size < 0x100000000) {\n\t\t\tthis.writeUint8(0xC9);\n\t\t\tthis.writeUint32(size);\n\t\t}\n\t\telse {\n\t\t\tthrow new Error(\"MsgPackEncoder: extension object is too large\");\n\t\t}\n\n\t\tthis.writeUint8(ext.type);\n\t\tthis.writeBuffer(ext.data);\n\t}\n\n\tprivate writeUint8(n: number): void {\n\t\tthis.ensureSpace(1);\n\t\tthis.bufferView.setUint8(this.bufferLen, n);\n\t\tthis.bufferLen += 1;\n\t}\n\n\tprivate writeInt8(n: number): void {\n\t\tthis.ensureSpace(1);\n\t\tthis.bufferView.setInt8(this.bufferLen, n);\n\t\tthis.bufferLen += 1;\n\t}\n\n\tprivate writeUint16(n: number): void {\n\t\tthis.ensureSpace(2);\n\t\tthis.bufferView.setUint16(this.bufferLen, n);\n\t\tthis.bufferLen += 2;\n\t}\n\n\tprivate writeInt16(n: number): void {\n\t\tthis.ensureSpace(2);\n\t\tthis.bufferView.setInt16(this.bufferLen, n);\n\t\tthis.bufferLen += 2;\n\t}\n\n\tprivate writeUint32(n: number): void {\n\t\tthis.ensureSpace(4);\n\t\tthis.bufferView.setUint32(this.bufferLen, n);\n\t\tthis.bufferLen += 4;\n\t}\n\n\tprivate writeInt32(n: number): void {\n\t\tthis.ensureSpace(4);\n\t\tthis.bufferView.setInt32(this.bufferLen, n);\n\t\tthis.bufferLen += 4;\n\t}\n\n\tprivate writeUint64(n: number | bigint): void {\n\t\tthis.ensureSpace(8);\n\t\tif (typeof n === 'number') {\n\t\t\tconst hi = Math.floor(n / 0x1_0000_0000);\n\t\t\tthis.bufferView.setUint32(this.bufferLen, hi);\n\t\t\tthis.bufferView.setUint32(this.bufferLen + 4, n); //high bits will be truncated by DataView\n\t\t}\n\t\telse {\n\t\t\tconst hi = Number(n / uint32Max);\n\t\t\tconst lo = Number(n % uint32Max);\n\t\t\tthis.bufferView.setUint32(this.bufferLen, hi);\n\t\t\tthis.bufferView.setUint32(this.bufferLen + 4, lo);\n\t\t}\n\t\tthis.bufferLen += 8;\n\t}\n\n\tprivate writeInt64(n: number | bigint) {\n\t\tthis.ensureSpace(8);\n\t\tif (typeof n === 'number') {\n\t\t\tconst hi = Math.floor(n / 0x1_0000_0000);\n\t\t\tthis.bufferView.setUint32(this.bufferLen, hi);\n\t\t\tthis.bufferView.setUint32(this.bufferLen + 4, n); //high bits will be truncated by DataView\n\t\t}\n\t\telse {\n\t\t\tlet hi = Number(n / uint32Max);\n\t\t\tconst lo = Number(n % uint32Max);\n\t\t\tif (hi < 0 && lo !== 0) {\n\t\t\t\thi -= 1;\n\t\t\t}\n\t\t\tthis.bufferView.setUint32(this.bufferLen, hi);\n\t\t\tthis.bufferView.setUint32(this.bufferLen + 4, lo);\n\t\t}\n\t\tthis.bufferLen += 8;\n\t}\n\n\tprivate writeFloat(n: number) {\n\t\tthis.ensureSpace(4);\n\t\tthis.bufferView.setFloat32(this.bufferLen, n);\n\t\tthis.bufferLen += 4;\n\t}\n\n\tprivate writeDouble(n: number) {\n\t\tthis.ensureSpace(8);\n\t\tthis.bufferView.setFloat64(this.bufferLen, n);\n\t\tthis.bufferLen += 8;\n\t}\n\n\tprivate writeBuffer(b: Uint8Array) {\n\t\tthis.ensureSpace(b.byteLength);\n\t\tthis.buffer.set(b, this.bufferLen);\n\t\tthis.bufferLen += b.byteLength;\n\t}\n\n\tprivate ensureSpace(size: number) {\n\t\tif (this.bufferView.byteLength - this.bufferLen < size) {\n\t\t\tconst newBufferSize = (this.bufferView.byteLength + size + 2047) & (~2047);\n\t\t\tconst newBufferView = new DataView(new ArrayBuffer(newBufferSize));\n\t\t\tconst newBuffer = new Uint8Array(newBufferView.buffer);\n\n\t\t\tnewBuffer.set(this.buffer);\n\n\t\t\tthis.buffer = newBuffer;\n\t\t\tthis.bufferView = newBufferView;\n\t\t}\n\t}\n}\n", "//License: Apache 2.0. See LICENSE.md\n\nimport { MsgPackDecoder, MsgPackDecoderOptions } from \"./decoder\";\nimport { MsgPackEncoder, MsgPackEncoderOptions } from \"./encoder\";\n\n// -----------------------------------------------------------------------------\n\nexport default class MsgPackBigInt {\n\tstatic encode(obj: any, options?: MsgPackEncoderOptions): Uint8Array {\n\t\tconst e = new MsgPackEncoder(obj, options);\n\t\treturn e.process();\n\t}\n\n\tstatic decode(buffer: Uint8Array, options?: MsgPackDecoderOptions): any {\n\t\tconst d = new MsgPackDecoder(buffer, options);\n\t\treturn d.process();\n\t}\n\n\tstatic createEncoder(obj: any, options?: MsgPackEncoderOptions): MsgPackEncoder {\n\t\treturn new MsgPackEncoder(obj, options);\n\t}\n\n\tstatic createDecoder(buffer: Uint8Array, options?: MsgPackDecoderOptions): MsgPackDecoder {\n\t\treturn new MsgPackDecoder(buffer, options);\n\t}\n}\n", "import { Buffer } from 'buffer';\n\nimport algosdk, {\n\tsecretKeyToMnemonic,\n\tgenerateAccount,\n\tAccount as AlgosdkAccount,\n\tAlgodv2,\n\tIndexer,\n\tLogicSigAccount,\n\tmakeAssetTransferTxnWithSuggestedParamsFromObject,\n\tmakeApplicationOptInTxnFromObject,\n\tmakeAssetCreateTxnWithSuggestedParams,\n\tmakeAssetDestroyTxnWithSuggestedParams,\n\tmakeApplicationDeleteTxn,\n\tmakeApplicationNoOpTxnFromObject,\n\tmakeApplicationCloseOutTxnFromObject,\n\tmakeApplicationCreateTxnFromObject,\n\tOnApplicationComplete,\n\tmakeApplicationCreateTxn,\n\tsignLogicSigTransactionObject,\n\tmakeApplicationUpdateTxn,\n\tencodeAddress,\n\tmakePaymentTxnWithSuggestedParamsFromObject,\n\tTransaction,\n\tencodeUnsignedTransaction,\n\tassignGroupID,\n\tsignLogicSigTransaction,\n\tsignTransaction,\n\tmnemonicToSecretKey,\n\tisValidAddress,\n\tencodeUint64,\n\tgetApplicationAddress,\n\tmicroalgosToAlgos,\n\tdecodeUnsignedTransaction,\n\tsignMultisigTransaction\n} from 'algosdk';\n\nimport type {\n\tAlgonautConfig,\n\tAlgonautWallet,\n\tAlgonautTransactionStatus,\n\tAlgonautAtomicTransaction,\n\tAlgonautTransactionFields,\n\tAlgonautAppState,\n\tAlgonautStateData,\n\tAlgonautError,\n\tAlgonautTxnCallbacks,\n\tAlgonautContractSchema,\n\tAlgonautCreateAssetArguments,\n\tAlgonautSendAssetArguments,\n\tAlgonautCallAppArguments,\n\tAlgonautDeployArguments,\n\tAlgonautLsigDeployArguments,\n\tAlgonautLsigCallAppArguments,\n\tAlgonautLsigSendAssetArguments,\n\tAlgonautPaymentArguments,\n\tAlgonautLsigPaymentArguments,\n\tAlgonautUpdateAppArguments,\n\tAlgonautGetApplicationResponse,\n\tAlgonautAppStateEncoded,\n\tInkeySignTxnResponse,\n\tTxnForSigning\n} from './AlgonautTypes';\nexport * from './AlgonautTypes';\n\n// import * as w3h from '@thencc/web3-wallet-handler';\n// export { w3h };\nexport * from '@thencc/web3-wallet-handler';\n// export * as bsss from '@thencc/web3-wallet-handler/buildSettings';\n\n// console.log('w3h', w3h);\n// export * as w3h from '@thencc/web3-wallet-handler'; // this also works\n// export * from '@thencc/web3-wallet-handler';\n// export const web3yo = () => w3h;\n\nimport { FrameBus } from './FrameBus';\n// import * as sha512 from 'js-sha512';\n// import * as CryptoJS from 'crypto-js';\n// import { decode, encode } from 'hi-base32';\n\n/*\n\nAlgonautJS should have some \"signing modes\" which you set at invocation time\n\nprobably in\nAlgonautConfig\n\n\n\n\nfor stateful contracts i think we want to read it in and hold all the\nNV pairs as fields\n\nand maybe read the TEAL and make wrapper methods for things we see in\na config file?\n\nTBD:\n\n- standard typed return values\n- standard error values, pre-parse the algo error goop\n\n\nthere are a couple ways to go for atomic txs, i THINK the more pleasant API is\n\nawait runAtomicTransaction([\n\tawait atomicSendASA(),\n\tawait atomicSendAlgo(),\n\tawait atomicCallApp()\n])\n\n\nTBD:\n\n\n\n*/\n\n// import { mainNetConfig as config } from './algoconfig';\n\n\n// good resource: https://developer.algorand.org/solutions/integrate-algosigner-to-js-app-on-algorand/\n\nexport class Algonaut {\n\t// TODO: add algo wallet for mobile\n\talgodClient!: Algodv2; // it will be set or it throws an Error\n\tindexerClient = undefined as undefined | Indexer;\n\tconfig = undefined as undefined | AlgonautConfig; // current config\n\n\t// expose entire algosdk in case the dapp needs more\n\tsdk = algosdk;\n\n\t// FYI undefined if using wallet-connect, etc. perhaps rename to .accountLocal ?\n\taccount = undefined as undefined | AlgosdkAccount; // ONLY defined if using local signing, not wallet-connet or inkey\n\taddress = undefined as undefined | string;\n\tmnemonic = undefined as undefined | string;\n\n\tuiLoading = false;\n\n\t// microwallet aka Inkey\n\tinkeyWallet = {\n\t\t// private inkeyWallet = { // for extra security we should do this\n\n\t\t// frameId: '',\n\t\t// ready: false,\n\t\tdefaultSrc: '123',\n\t\totherConfig: {},\n\t\tframeBus: undefined as undefined | FrameBus\n\t};\n\n\t/**\n\t * Instantiates Algonaut.js.\n\t *\n\t * @example\n\t * Usage:\n\t *\n\t * ```js\n\t * import Algonaut from '@thencc/algonautjs';\n\t * const algonaut = new Algonaut({\n\t *\t BASE_SERVER: 'https://testnet-algorand.api.purestake.io/ps2',\n\t *\t INDEX_SERVER: 'https://testnet-algorand.api.purestake.io/idx2'\n\t *\t LEDGER: 'TestNet',\n\t *\t PORT: '',\n\t *\t API_TOKEN: { 'X-API-Key': 'YOUR_API_TOKEN' }\n\t * });\n\t *\n\t * If using Inkey, add `SIGNING_MODE: 'inkey'`.\n\t * ```\n\t *\n\t * @param config config object\n\t */\n\tconstructor(config: AlgonautConfig) {\n\t\tthis.setConfig(config);\n\t}\n\n\t/**\n\t * checks if config obj is valid for use\n\t * @param config algonaut config for network + signing mode\n\t * @returns boolean. true is good.\n\t */\n\tisValidConfig(config: AlgonautConfig): boolean {\n\t\t// console.log('isValidConfig?', config);\n\t\tlet isValid = true;\n\n\t\t// do all checks\n\t\tif (!config.BASE_SERVER || !config.API_TOKEN) {\n\t\t\tisValid = false;\n\t\t}\n\n\t\t// TODO add more checks...\n\n\n\t\t// check: if its not a valid signing mode...\n\t\t// if (config.SIGNING_MODE !== 'algosigner')\n\n\t\treturn isValid;\n\t}\n\n\t/**\n\t * sets config for use (new algod, indexerClient, etc)\n\t * @param config algonaut config for network + signing mode\n\t * \t\t- will throw Error if config is lousy\n\t */\n\tsetConfig(config: AlgonautConfig) {\n\t\t// console.log('setConfig', config);\n\t\tif (!this.isValidConfig(config)) {\n\t\t\tthrow new Error('bad config!');\n\t\t}\n\n\t\tthis.config = config;\n\t\tthis.algodClient = new Algodv2(config.API_TOKEN, config.BASE_SERVER, config.PORT);\n\n\t\tif (config.INDEX_SERVER) {\n\t\t\tthis.indexerClient = new Indexer(config.API_TOKEN, config.INDEX_SERVER, config.PORT);\n\t\t} else {\n\t\t\tconsole.warn('No indexer configured because INDEX_SERVER was not provided.');\n\t\t}\n\n\t\t// inkey init\n\t\tif (config.SIGNING_MODE && config.SIGNING_MODE == 'inkey') {\n\t\t\tif (!config.INKEY_SRC) {\n\t\t\t\t// default inkey\n\t\t\t\tconfig.INKEY_SRC = 'https://inkey.app';\n\t\t\t}\n\n\t\t\tif (!config.INKEY_ALIGN) {\n\t\t\t\tconfig.INKEY_ALIGN = 'center';\n\t\t\t}\n\n\t\t\tthis.initInkey({\n\t\t\t\tsrc: config.INKEY_SRC,\n\t\t\t\talign: config.INKEY_ALIGN\n\t\t\t});\n\t\t}\n\t}\n\n\t/**\n\t * @returns config object or `false` if no config is set\n\t */\n\tgetConfig(): AlgonautConfig | boolean {\n\t\tif (this.config) return this.config;\n\t\treturn false;\n\t}\n\n\t/**\n\t * Checks status of Algorand network\n\t * @returns Promise resolving to status of Algorand network\n\t */\n\tasync checkStatus(): Promise<any | AlgonautError> {\n\t\tif (!this.getConfig()) {\n\t\t\tthrow new Error('No node configuration set.');\n\t\t}\n\n\t\tconst status = await this.algodClient.status().do();\n\t\tconsole.log('Algorand network status: %o', status);\n\t\treturn status;\n\t}\n\n\t/*\n\t* @param mountConfig object containing the `src` of the iframe\n\t*/\n\tinitInkey(mountConfig: {\n\t\tsrc?: string,\n\t\talign: AlgonautConfig['INKEY_ALIGN']\n\t}) {\n\t\t// console.log('initInkey');\n\n\t\tif (!mountConfig.src) {\n\t\t\tconsole.warn('You must provide INKEY_SRC in Algonaut.js config');\n\t\t\treturn;\n\t\t}\n\n\t\t// reset\n\t\tif (this.inkeyWallet.frameBus) {\n\t\t\tthis.inkeyWallet.frameBus.destroy();\n\t\t\tthis.inkeyWallet.frameBus = undefined;\n\t\t}\n\n\t\tif (mountConfig.src) {\n\t\t\tthis.inkeyWallet.frameBus = new FrameBus({\n\t\t\t\tsrc: mountConfig.src,\n\t\t\t\talign: mountConfig.align\n\t\t\t});\n\t\t} else {\n\t\t\tconsole.warn('Cannot init Inkey');\n\t\t}\n\t}\n\n\t/**\n\t * if you already have an account, set it here\n\t * @param account an algosdk account already created\n\t */\n\tsetAccount(account: AlgosdkAccount): void | AlgonautError {\n\t\tif (!account) {\n\t\t\tthrow new Error('No account provided.');\n\t\t}\n\n\t\tthis.account = account;\n\t\tthis.address = account.addr;\n\t\t// if (this.config) this.config.SIGNING_MODE = 'local';\n\t\tthis.mnemonic = secretKeyToMnemonic(account.sk);\n\t}\n\n\t/**\n\t * Sets account connected via Inkey\n\t * @param address account address\n\t */\n\tsetInkeyAccount(address: string): void {\n\t\tif (!address) {\n\t\t\tthrow new Error('No address provided.');\n\t\t}\n\n\t\tthis.account = {\n\t\t\taddr: address,\n\t\t\tsk: new Uint8Array([])\n\t\t};\n\t}\n\n\t/**\n\t * Creates a wallet address + mnemonic from account's secret key and sets the wallet as the currently authenticated account\n\t * @returns AlgonautWallet Object containing `address` and `mnemonic`\n\t */\n\tcreateWallet(): AlgonautWallet {\n\t\tthis.account = generateAccount();\n\n\t\tif (this.account) {\n\t\t\tthis.address = this.account.addr;\n\t\t\tthis.mnemonic = secretKeyToMnemonic(this.account.sk);\n\t\t\treturn {\n\t\t\t\taddress: this.account.addr,\n\t\t\t\tmnemonic: this.mnemonic || ''\n\t\t\t};\n\t\t} else {\n\t\t\tthrow new Error('There was no account: could not create algonaut wallet!');\n\t\t}\n\n\t}\n\n\t/**\n\t * Recovers account from mnemonic\n\t * @param mnemonic Mnemonic associated with Algonaut account\n\t * @returns If mnemonic is valid, returns account. Otherwise, throws an error.\n\t */\n\trecoverAccount(mnemonic: string): AlgosdkAccount {\n\t\tif (!mnemonic) throw new Error('algonaut.recoverAccount: No mnemonic provided.');\n\t\tthis.account = utils.recoverAccount(mnemonic);\n\t\treturn this.account;\n\t}\n\n\t/**\n\t * General purpose method to await transaction confirmation\n\t * @param txId a string id of the transacion you want to watch\n\t * @param limitDelta how many rounds to wait, defaults to 50\n\t * @param log set to true if you'd like to see \"waiting for confirmation\" log messages\n\t */\n\tasync waitForConfirmation(txId: string, limitDelta?: number, log = false): Promise<AlgonautTransactionStatus> {\n\t\tif (!txId) throw new Error('waitForConfirmation: No transaction ID provided.');\n\n\t\tlet lastround = (await this.algodClient.status().do())['last-round'];\n\t\tconst limit = lastround + (limitDelta ? limitDelta : 50);\n\n\t\tconst returnValue = {\n\t\t\tstatus: 'fail',\n\t\t\tmessage: ''\n\t\t} as AlgonautTransactionStatus;\n\n\t\twhile (lastround < limit) {\n\t\t\tlet pendingInfo = '' as any;\n\t\t\ttry {\n\t\t\t\tpendingInfo = await this.algodClient\n\t\t\t\t\t.pendingTransactionInformation(txId)\n\t\t\t\t\t.do();\n\t\t\t\tif (log) {\n\t\t\t\t\tconsole.log('waiting for confirmation');\n\t\t\t\t}\n\t\t\t} catch (er: any) {\n\t\t\t\tconsole.error(er.response?.text);\n\t\t\t}\n\n\t\t\tif (\n\t\t\t\tpendingInfo['confirmed-round'] !== null &&\n\t\t\t\tpendingInfo['confirmed-round'] > 0\n\t\t\t) {\n\n\t\t\t\tif (log) {\n\t\t\t\t\tconsole.log('Transaction confirmed in round ' + pendingInfo['confirmed-round']);\n\t\t\t\t}\n\n\t\t\t\treturnValue.txId = txId;\n\t\t\t\treturnValue.status = 'success';\n\t\t\t\treturnValue.message = 'Transaction confirmed in round ' + pendingInfo['confirmed-round'];\n\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tlastround = (await this.algodClient.status().do())['last-round'];\n\t\t}\n\n\t\treturn returnValue;\n\n\t}\n\n\t/**\n\t * Creates a LogicSig from a base64 program string.  Note that this method does not COMPILE\n\t * the program, just builds an LSig from an already compiled base64 result!\n\t * @param base64ProgramString\n\t * @returns an algosdk LogicSigAccount\n\t */\n\tgenerateLogicSig(base64ProgramString: string): LogicSigAccount {\n\t\tif (!base64ProgramString) throw new Error('No program string provided.');\n\t\treturn utils.generateLogicSig(base64ProgramString);\n\t}\n\n\tasync atomicOptInAsset(assetIndex: number, optionalTxnArgs?: AlgonautTransactionFields): Promise<AlgonautAtomicTransaction> {\n\t\tif (!this.account) throw new Error('No account set in Algonaut.');\n\t\tif (!assetIndex) throw new Error('No asset index provided.');\n\n\t\tconst suggestedParams = optionalTxnArgs?.suggestedParams || (await this.algodClient.getTransactionParams().do());\n\n\t\tconst optInTransaction = makeAssetTransferTxnWithSuggestedParamsFromObject({\n\t\t\tfrom: this.account.addr,\n\t\t\tto: this.account.addr,\n\t\t\tassetIndex: assetIndex,\n\t\t\tamount: 0,\n\t\t\tsuggestedParams,\n\t\t});\n\n\t\treturn {\n\t\t\ttransaction: optInTransaction,\n\t\t\ttransactionSigner: this.account,\n\t\t\tisLogigSig: false\n\t\t};\n\n\t}\n\n\t/**\n\t * Opt-in the current account for the a token or NFT Asset.\n\t * @param assetIndex number of asset to opt-in to\n\t * @param callbacks `AlgonautTxnCallbacks`, passed to {@link sendTransaction}\n\t * @returns Promise resolving to confirmed transaction or error\n\t */\n\tasync optInAsset(assetIndex: number, callbacks?: AlgonautTxnCallbacks, optionalTxnArgs?: AlgonautTransactionFields): Promise<AlgonautTransactionStatus> {\n\t\tif (!this.account) throw new Error('There was no account!');\n\t\tif (!assetIndex) throw new Error('No asset index provided.');\n\t\tconst { transaction } = await this.atomicOptInAsset(assetIndex, optionalTxnArgs);\n\t\treturn await this.sendTransaction(transaction, callbacks);\n\t}\n\n\n\t// this is a bit harder with the algosdk api\n\t// what we may want to do be more opinionated and have a standard local\n\t// field we always set on apps when opted in\n\n\t// OR maybe we check for HAS STATE which might check for local state\n\t// of any kind on that app id?\n\n\t// async isOptedIntoApp(account: string, appId: number): boolean {\n\t// \tlet optInState = false;\n\n\t// \tconst accountInfo = await this.getAccountInfo(account);\n\t// \taccountInfo.assets.forEach((asset: any) => {\n\t// \t\tif (asset['asset-id'] == assetId) {\n\t// \t\t\toptInState = true;\n\t// \t\t}\n\n\t// \t});\n\n\t// \treturn optInState;\n\t// }\n\n\n\t/**\n\t * You can be opted into an asset but still have a zero balance. Use this call\n\t * for cases where you just need to know the address's opt-in state\n\t * @param args object containing `account` and `assetId` properties\n\t * @returns boolean true if account holds asset\n\t */\n\tasync isOptedIntoAsset(args: { account: string, assetId: number }): Promise<boolean> {\n\t\tif (!args.account) throw new Error('No account provided.');\n\t\tif (!args.assetId) throw new Error('No asset ID provided.');\n\n\t\tlet optInState = false;\n\t\tconst accountInfo = await this.getAccountInfo(args.account);\n\t\taccountInfo.assets.forEach((asset: any) => {\n\t\t\tif (asset['asset-id'] == args.assetId) {\n\t\t\t\toptInState = true;\n\t\t\t}\n\n\t\t});\n\n\t\treturn optInState;\n\t}\n\n\t/**\n\t * Sync function that returns a correctly-encoded argument array for\n\t * an algo transaction\n\t * @param args must be an any[] array, as it will often need to be\n\t * a mix of strings and numbers. Valid types are: string, number, and bigint\n\t * @returns a Uint8Array of encoded arguments\n\t */\n\tencodeArguments(args: any[]): Uint8Array[] {\n\t\treturn utils.encodeArguments(args);\n\t}\n\n\t/**\n\t * Create asset transaction\n\t * @param args { AlgonautCreateAssetArguments }  Must pass `assetName`, `symbol`, `decimals`, `amount`.\n\t * @returns atomic txn to create asset\n\t*/\n\tasync atomicCreateAsset(args: AlgonautCreateAssetArguments): Promise<AlgonautAtomicTransaction> {\n\t\tif (!args.assetName) throw new Error('args.assetName not provided.');\n\t\tif (!args.symbol) throw new Error('args.symbol not provided');\n\t\tif (typeof args.decimals == 'undefined') throw new Error('args.decimals not provided.');\n\t\tif (!args.amount) throw new Error('args.amount not provided.');\n\t\tif (!this.account) throw new Error('There was no account set in Algonaut');\n\n\n\t\tif (!args.metaBlock) {\n\t\t\targs.metaBlock = ' ';\n\t\t}\n\n\t\tif (!args.defaultFrozen) args.defaultFrozen = false;\n\t\tif (!args.assetURL) args.assetURL = undefined;\n\n\t\tconst metaBlockLength = args.metaBlock.length;\n\n\t\tif (metaBlockLength > 1023) {\n\t\t\tconsole.error('meta block is ' + metaBlockLength);\n\t\t\tthrow new Error('drat! this meta block is too long!');\n\t\t}\n\n\t\tconst enc = new TextEncoder();\n\n\t\t// arbitrary data: 1024 bytes, or about 1023 characters\n\t\tconst note = enc.encode(args.metaBlock);\n\t\tconst addr = this.account.addr;\n\t\tconst totalIssuance = args.amount;\n\n\t\t// set accounts\n\t\tconst manager = (args.manager && args.manager.length > 0) ? args.manager : this.account.addr;\n\t\tconst reserve = (args.reserve && args.reserve.length > 0) ? args.reserve : this.account.addr;\n\t\tconst freeze = (args.freeze && args.freeze.length > 0) ? args.freeze : this.account.addr;\n\t\tconst clawback = (args.clawback && args.clawback.length > 0) ? args.clawback : this.account.addr;\n\n\t\tconst suggestedParams = args.optionalFields?.suggestedParams || (await this.algodClient.getTransactionParams().do());\n\n\t\t// signing and sending \"txn\" allows \"addr\" to create an asset\n\t\tconst txn = makeAssetCreateTxnWithSuggestedParams(\n\t\t\taddr,\n\t\t\tnote,\n\t\t\ttotalIssuance,\n\t\t\targs.decimals,\n\t\t\targs.defaultFrozen,\n\t\t\tmanager,\n\t\t\treserve,\n\t\t\tfreeze,\n\t\t\tclawback,\n\t\t\targs.symbol,\n\t\t\targs.assetName,\n\t\t\targs.assetURL,\n\t\t\targs.assetMetadataHash,\n\t\t\tsuggestedParams\n\t\t);\n\n\t\treturn {\n\t\t\ttransaction: txn,\n\t\t\ttransactionSigner: this.account,\n\t\t\tisLogigSig: false\n\t\t};\n\t}\n\n\n\t/**\n\t * Create asset\n\t * @param args AlgonautCreateAssetArguments. Must pass `assetName`, `symbol`, `decimals`, `amount`.\n\t * @param callbacks AlgonautTxnCallbacks\n\t * @returns asset index\n\t*/\n\tasync createAsset(\n\t\targs: AlgonautCreateAssetArguments,\n\t\tcallbacks?: AlgonautTxnCallbacks\n\t): Promise<AlgonautTransactionStatus> {\n\t\tconst atomicTxn = await this.atomicCreateAsset(args);\n\t\tconst txn = atomicTxn.transaction;\n\n\t\ttry {\n\t\t\tconst assetID = null;\n\t\t\tconst txStatus = await this.sendTransaction(txn, callbacks);\n\n\t\t\tconst ptx = await this.algodClient\n\t\t\t\t.pendingTransactionInformation(txn.txID().toString())\n\t\t\t\t.do();\n\t\t\ttxStatus.createdIndex = ptx['asset-index'];\n\n\t\t\treturn txStatus;\n\n\t\t} catch (er) {\n\t\t\tconsole.log('transaction error');\n\t\t\tconsole.log(er);\n\t\t\tthrow new Error(er as any);\n\t\t}\n\t}\n\n\tasync atomicDeleteAsset(assetId: number, optionalTxnArgs?: AlgonautTransactionFields): Promise<AlgonautAtomicTransaction> {\n\t\tif (!this.account) throw new Error('there was no account!');\n\t\tif (!assetId) throw new Error('No assetId provided!');\n\n\t\tconst enc = new TextEncoder();\n\t\tconst suggestedParams = optionalTxnArgs?.suggestedParams || (await this.algodClient.getTransactionParams().do());\n\n\t\tconst transaction = makeAssetDestroyTxnWithSuggestedParams(\n\t\t\tthis.account.addr,\n\t\t\tenc.encode('doh!'), // what is this? TODO support note...\n\t\t\tassetId,\n\t\t\tsuggestedParams,\n\t\t);\n\n\t\treturn {\n\t\t\ttransaction: transaction,\n\t\t\ttransactionSigner: this.account,\n\t\t\tisLogigSig: false\n\t\t};\n\t}\n\n\t/**\n\t * Deletes asset\n\t * @param assetId Index of the ASA to delete\n\t * @param callbacks optional AlgonautTxnCallbacks\n\t * @returns Promise resolving to confirmed transaction or error\n\t */\n\tasync deleteAsset(assetId: number, callbacks?: AlgonautTxnCallbacks, optionalTxnArgs?: AlgonautTransactionFields): Promise<AlgonautTransactionStatus> {\n\t\tif (!assetId) throw new Error('No asset ID provided!');\n\t\tconst { transaction } = await this.atomicDeleteAsset(assetId, optionalTxnArgs);\n\t\treturn await this.sendTransaction(transaction, callbacks);\n\t}\n\n\t/**\n\t * Creates send asset transaction.\n\t *\n\t * IMPORTANT: Before you can call this, the target account has to \"opt-in\"\n\t * to the ASA index.  You can't just send ASAs to people blind!\n\t *\n\t * @param args - object containing `to`, `assetIndex`, and `amount` properties\n\t * @returns Promise resolving to `AlgonautAtomicTransaction`\n\t */\n\tasync atomicSendAsset(args: AlgonautSendAssetArguments): Promise<AlgonautAtomicTransaction> {\n\t\tif (!args.to) throw new Error('No to address provided');\n\t\tif (!args.assetIndex) throw new Error('No asset index provided');\n\t\tif (!args.amount) throw new Error('No amount provided');\n\t\t// if (!this.account) throw new Error('there is no account!');\n\n\t\tconst fromAddr = args.from || this.account?.addr;\n\t\tif (!fromAddr) throw new Error('there is no fromAddr');\n\n\t\tconst suggestedParams = args.optionalFields?.suggestedParams || (await this.algodClient.getTransactionParams().do());\n\n\t\tconst transaction =\n\t\t\tmakeAssetTransferTxnWithSuggestedParamsFromObject({\n\t\t\t\tfrom: fromAddr,\n\t\t\t\tto: args.to,\n\t\t\t\tamount: args.amount,\n\t\t\t\tassetIndex: args.assetIndex,\n\t\t\t\tsuggestedParams\n\t\t\t});\n\n\t\treturn {\n\t\t\ttransaction: transaction,\n\t\t\ttransactionSigner: this.account,\n\t\t\tisLogigSig: false\n\t\t};\n\t}\n\n\t/**\n\t * Sends asset to an address.\n\t *\n\t * IMPORTANT: Before you can call this, the target account has to \"opt-in\"\n\t * to the ASA index.  You can't just send ASAs to people blind!\n\t *\n\t * @param args - object containing `to`, `assetIndex`, and `amount` properties\n\t * @param callbacks optional AlgonautTxnCallbacks\n\t * @returns Promise resolving to confirmed transaction or error\n\t */\n\tasync sendAsset(args: AlgonautSendAssetArguments, callbacks?: AlgonautTxnCallbacks): Promise<AlgonautTransactionStatus> {\n\t\tif (!this.account) throw new Error('There was no account!');\n\t\tconst { transaction } = await this.atomicSendAsset(args);\n\t\treturn await this.sendTransaction(transaction, callbacks);\n\t}\n\n\t/**\n\t * Get info about an asset\n\t * @param assetIndex\n\t * @returns\n\t */\n\tasync getAssetInfo(assetIndex: number): Promise<any> {\n\t\tif (!assetIndex) throw new Error('No asset ID provided');\n\n\t\tconst info = await this.algodClient.getAssetByID(assetIndex).do();\n\t\treturn info;\n\t}\n\n\t/**\n\t * Creates transaction to opt into an app\n\t * @param args AlgonautCallAppArgs\n\t * @returns AlgonautAtomicTransaction\n\t */\n\tasync atomicOptInApp(args: AlgonautCallAppArguments): Promise<AlgonautAtomicTransaction> {\n\t\tif (!args.appIndex) throw new Error('No app ID provided');\n\t\tif (!this.account) throw new Error('No account in algonaut');\n\n\t\tconst sender = this.account.addr;\n\t\tconst suggestedParams = args.optionalFields?.suggestedParams || (await this.algodClient.getTransactionParams().do());\n\n\t\tconst optInTransaction = makeApplicationOptInTxnFromObject({\n\t\t\tfrom: sender,\n\t\t\tappIndex: args.appIndex,\n\t\t\tsuggestedParams,\n\t\t\tappArgs: args.appArgs ? this.encodeArguments(args.appArgs) : undefined,\n\t\t\taccounts: args.optionalFields?.accounts ? args.optionalFields?.accounts : undefined,\n\t\t\tforeignApps: args.optionalFields?.applications ? args.optionalFields?.applications : undefined,\n\t\t\tforeignAssets: args.optionalFields?.assets ? args.optionalFields?.assets : undefined\n\t\t});\n\n\t\treturn {\n\t\t\ttransaction: optInTransaction,\n\t\t\ttransactionSigner: this.account,\n\t\t\tisLogigSig: false\n\t\t};\n\t}\n\n\t/**\n\t * Opt-in the current account for an app.\n\t * @param args Object containing `appIndex`, `appArgs`, and `optionalFields`\n\t * @param callbacks optional AlgonautTxnCallbacks\n\t * @returns Promise resolving to confirmed transaction or error\n\t */\n\tasync optInApp(args: AlgonautCallAppArguments, callbacks?: AlgonautTxnCallbacks): Promise<AlgonautTransactionStatus> {\n\t\tconst { transaction } = await this.atomicOptInApp(args);\n\t\treturn await this.sendTransaction(transaction, callbacks);\n\t}\n\n\t/**\n\t * Returns atomic transaction that deletes application\n\t * @param appIndex - ID of application\n\t * @returns Promise resolving to atomic transaction that deletes application\n\t */\n\tasync atomicDeleteApp(appIndex: number, optionalTxnArgs?: AlgonautTransactionFields): Promise<AlgonautAtomicTransaction> {\n\t\tif (!this.account) throw new Error('No account set.');\n\t\tif (!appIndex) throw new Error('No app ID provided');\n\n\t\tconst sender = this.account.addr;\n\t\tconst suggestedParams = optionalTxnArgs?.suggestedParams || (await this.algodClient.getTransactionParams().do());\n\t\tconst txn = makeApplicationDeleteTxn(sender, suggestedParams, appIndex);\n\n\t\treturn {\n\t\t\ttransaction: txn,\n\t\t\ttransactionSigner: this.account,\n\t\t\tisLogigSig: false\n\t\t};\n\t}\n\n\t/**\n\t * DEPRECATED! Use `atomicDeleteApp` instead. Returns atomic transaction that deletes application\n\t * @deprecated\n\t * @param appIndex - ID of application\n\t * @returns Promise resolving to atomic transaction that deletes application\n\t */\n\tasync atomicDeleteApplication(appIndex: number, optionalTxnArgs?: AlgonautTransactionFields): Promise<AlgonautAtomicTransaction> {\n\t\tconsole.warn('atomicDeleteApplication is deprecated and will be removed in future versions.');\n\t\treturn await this.atomicDeleteApp(appIndex, optionalTxnArgs);\n\t}\n\n\t/**\n\t * Deletes an application from the blockchain\n\t * @param appIndex - ID of application\n\t * @param callbacks optional AlgonautTxnCallbacks\n\t * @returns Promise resolving to confirmed transaction or error\n\t */\n\tasync deleteApp(appIndex: number, callbacks?: AlgonautTxnCallbacks, optionalTxnArgs?: AlgonautTransactionFields): Promise<AlgonautTransactionStatus> {\n\t\tif (!this.account) throw new Error('There was no account');\n\n\t\ttry {\n\t\t\tconst { transaction } = await this.atomicDeleteApp(appIndex, optionalTxnArgs);\n\t\t\tconst txId = transaction.txID().toString();\n\n\t\t\tconst status = await this.sendTransaction(transaction, callbacks);\n\n\t\t\t// display results\n\t\t\tconst transactionResponse = await this.algodClient\n\t\t\t\t.pendingTransactionInformation(txId)\n\t\t\t\t.do();\n\t\t\tconst appId = transactionResponse['txn']['txn'].apid;\n\n\t\t\treturn {\n\t\t\t\tstatus: 'success',\n\t\t\t\tmessage: 'deleted app index ' + appId,\n\t\t\t\ttxId\n\t\t\t};\n\n\t\t} catch (e: any) {\n\t\t\tconsole.log(e);\n\t\t\tthrow new Error(e.response?.text);\n\t\t}\n\t}\n\n\t/**\n\t * DEPRECATED! Use `deleteApp` instead. This will be removed in future versions.\n\t * @deprecated\n\t * @param appIndex - ID of application\n\t * @param callbacks optional AlgonautTxnCallbacks\n\t * @returns Promise resolving to confirmed transaction or error\n\t */\n\tasync deleteApplication(appIndex: number, callbacks?: AlgonautTxnCallbacks, optionalTxnArgs?: AlgonautTransactionFields): Promise<AlgonautTransactionStatus> {\n\t\tconsole.warn('deleteApplication is deprecated and will be removed in future versions.');\n\t\treturn await this.deleteApp(appIndex, callbacks, optionalTxnArgs);\n\t}\n\n\tasync atomicCallApp(args: AlgonautCallAppArguments): Promise<AlgonautAtomicTransaction> {\n\t\tif (!this.account) throw new Error('There was no account!');\n\t\tif (!args.appIndex) throw new Error('Must provide appIndex');\n\t\tif (!args.appArgs.length) throw new Error('Must provide at least one appArgs');\n\n\t\tconst processedArgs = this.encodeArguments(args.appArgs);\n\t\tconst suggestedParams = args.optionalFields?.suggestedParams || (await this.algodClient.getTransactionParams().do());\n\t\tconst callAppTransaction = makeApplicationNoOpTxnFromObject({\n\t\t\tfrom: this.account.addr,\n\t\t\tsuggestedParams,\n\t\t\tappIndex: args.appIndex,\n\t\t\tappArgs: processedArgs,\n\t\t\taccounts: args.optionalFields?.accounts || undefined,\n\t\t\tforeignApps: args.optionalFields?.applications || undefined,\n\t\t\tforeignAssets: args.optionalFields?.assets || undefined,\n\t\t\tnote: args.optionalFields?.note ? this.to8Arr(args.optionalFields.note) : undefined\n\t\t});\n\n\t\treturn {\n\t\t\ttransaction: callAppTransaction,\n\t\t\ttransactionSigner: this.account,\n\t\t\tisLogigSig: false\n\t\t};\n\t}\n\n\t/**\n\t * Call a \"method\" on a stateful contract.  In TEAL, you're really giving\n\t * an argument which branches to a specific place and reads the other args\n\t * @param args Object containing `appIndex`, `appArgs`, and `optionalFields` properties\n\t */\n\tasync callApp(args: AlgonautCallAppArguments, callbacks?: AlgonautTxnCallbacks): Promise<AlgonautTransactionStatus> {\n\t\tconst { transaction } = await this.atomicCallApp(args);\n\t\treturn await this.sendTransaction(transaction, callbacks);\n\t}\n\n\tasync atomicCallAppWithLSig(args: AlgonautLsigCallAppArguments): Promise<AlgonautAtomicTransaction> {\n\t\tif (!this.account) throw new Error('There was no account!');\n\t\tif (!args.appIndex) throw new Error('Must provide appIndex');\n\t\tif (!args.appArgs.length) throw new Error('Must provide at least one appArgs');\n\n\t\tconst processedArgs = this.encodeArguments(args.appArgs);\n\t\tconst suggestedParams = args.optionalFields?.suggestedParams || (await this.algodClient.getTransactionParams().do());\n\t\tconst callAppTransaction = makeApplicationNoOpTxnFromObject({\n\t\t\tfrom: args.lsig.address(),\n\t\t\tsuggestedParams,\n\t\t\tappIndex: args.appIndex,\n\t\t\tappArgs: processedArgs,\n\t\t\taccounts: args.optionalFields?.accounts || undefined,\n\t\t\tforeignApps: args.optionalFields?.applications || undefined,\n\t\t\tforeignAssets: args.optionalFields?.assets || undefined\n\t\t});\n\n\t\treturn {\n\t\t\ttransaction: callAppTransaction,\n\t\t\ttransactionSigner: args.lsig,\n\t\t\tisLogigSig: true\n\t\t};\n\t}\n\n\t/**\n\t * Returns an atomic transaction that closes out the user's local state in an application.\n\t * The opposite of {@link atomicOptInApp}.\n\t * @param args Object containing `appIndex`, `appArgs`, and `optionalFields` properties\n\t * @returns Promise resolving to atomic transaction\n\t */\n\tasync atomicCloseOutApp(args: AlgonautCallAppArguments): Promise<AlgonautAtomicTransaction> {\n\t\tif (!this.account) throw new Error('There was no account!');\n\t\tif (!args.appIndex) throw new Error('Must provide appIndex');\n\n\t\ttry {\n\t\t\tconst suggestedParams = args.optionalFields?.suggestedParams || (await this.algodClient.getTransactionParams().do());\n\t\t\tconst processedArgs = this.encodeArguments(args.appArgs);\n\t\t\tconst closeOutTxn = makeApplicationCloseOutTxnFromObject({\n\t\t\t\tfrom: this.account.addr,\n\t\t\t\tsuggestedParams,\n\t\t\t\tappIndex: args.appIndex,\n\t\t\t\tappArgs: processedArgs,\n\t\t\t\taccounts: args.optionalFields?.accounts || undefined,\n\t\t\t\tforeignApps: args.optionalFields?.applications || undefined,\n\t\t\t\tforeignAssets: args.optionalFields?.assets || undefined\n\t\t\t});\n\n\t\t\treturn {\n\t\t\t\ttransaction: closeOutTxn,\n\t\t\t\ttransactionSigner: this.account,\n\t\t\t\tisLogigSig: false\n\t\t\t};\n\t\t} catch (e: any) {\n\t\t\tthrow new Error(e);\n\t\t}\n\t}\n\n\t/**\n\t * Closes out the user's local state in an application.\n\t * The opposite of {@link optInApp}.\n\t * @param args Object containing `appIndex`, `appArgs`, and `optionalFields` properties\n\t * @param callbacks optional AlgonautTxnCallbacks\n\t * @returns Promise resolving to atomic transaction\n\t */\n\tasync closeOutApp(args: AlgonautCallAppArguments, callbacks?: AlgonautTxnCallbacks) {\n\t\tconst { transaction } = await this.atomicCloseOutApp(args);\n\t\treturn await this.sendTransaction(transaction, callbacks);\n\t}\n\n\t/**\n\t * Get an application's escrow account\n\t * @param appId - ID of application\n\t * @returns Escrow account address as string\n\t */\n\tgetAppEscrowAccount(appId: number | bigint): string {\n\t\tif (!appId) throw new Error('No appId provided');\n\t\treturn utils.getAppEscrowAccount(appId);\n\t}\n\n\t/**\n\t * Get info about an application (globals, locals, creator address, index)\n\t *\n\t * @param appId - ID of application\n\t * @returns Promise resolving to application state\n\t */\n\tasync getAppInfo(appId: number): Promise<AlgonautAppState> {\n\t\tif (!appId) throw new Error('No appId provided');\n\n\t\tconst proms = [\n\t\t\tthis.algodClient.getApplicationByID(appId).do(),\n\t\t] as any;\n\n\t\t// get locals if we have an account\n\t\tif (this.account) {\n\t\t\tproms.push(this.getAppLocalState(appId)); // TODO get rid of this call / only return locals (not incorrect duplicate state obj)\n\t\t}\n\n\t\tconst promsRes = await Promise.all(proms);\n\t\tconst info = promsRes[0] as AlgonautGetApplicationResponse;\n\t\tconst localState = promsRes[1] as AlgonautAppState | void;\n\n\t\t// decode state\n\t\tconst state = {\n\t\t\thasState: true,\n\t\t\tglobals: [],\n\t\t\tlocals: localState?.locals || [],\n\t\t\tcreatorAddress: info.params.creator,\n\t\t\tindex: appId\n\t\t} as AlgonautAppState;\n\n\t\tif (info.params['global-state']) {\n\t\t\tstate.globals = this.decodeStateArray(info.params['global-state']);\n\t\t}\n\n\t\treturn state;\n\t}\n\n\t/**\n\t * Create and deploy a new Smart Contract from TEAL code\n\t *\n\t * @param args AlgonautDeployArguments\n\t * @param callbacks optional AlgonautTxnCallbacks\n\t * @returns AlgonautTransactionStatus\n\t */\n\tasync createApp(\n\t\targs: AlgonautDeployArguments,\n\t\tcallbacks?: AlgonautTxnCallbacks\n\t): Promise<AlgonautTransactionStatus> {\n\t\tif (args.optionalFields &&\n\t\t\targs.optionalFields.note &&\n\t\t\targs.optionalFields.note.length > 1023) {\n\t\t\tconsole.warn('drat! your note is too long!');\n\t\t\tthrow new Error('Your note is too long');\n\t\t}\n\t\tif (!this.account) throw new Error('There was no account!');\n\t\tif (!args.tealApprovalCode) throw new Error('No approval program provided');\n\t\tif (!args.tealClearCode) throw new Error('No clear program provided');\n\t\tif (!args.schema) throw new Error('No schema provided');\n\n\t\t//console.log('CREATING APP')\n\n\t\ttry {\n\n\t\t\tconst sender = this.account.addr;\n\t\t\tconst suggestedParams = args.optionalFields?.suggestedParams || (await this.algodClient.getTransactionParams().do());\n\n\t\t\tlet approvalProgram = new Uint8Array();\n\t\t\tlet clearProgram = new Uint8Array();\n\n\t\t\tapprovalProgram = await this.compileProgram(args.tealApprovalCode);\n\t\t\tclearProgram = await this.compileProgram(args.tealClearCode);\n\n\t\t\t// console.log('approval', approvalProgram);\n\t\t\t// console.log('clear', clearProgram);\n\n\t\t\t// create unsigned transaction\n\t\t\tif (approvalProgram && clearProgram) {\n\n\t\t\t\tconst txn = makeApplicationCreateTxnFromObject({\n\t\t\t\t\tfrom: sender,\n\t\t\t\t\tsuggestedParams,\n\t\t\t\t\tonComplete: OnApplicationComplete.NoOpOC,\n\t\t\t\t\tapprovalProgram,\n\t\t\t\t\tclearProgram,\n\t\t\t\t\tnumLocalInts: args.schema.localInts,\n\t\t\t\t\tnumLocalByteSlices: args.schema.localBytes,\n\t\t\t\t\tnumGlobalInts: args.schema.globalInts,\n\t\t\t\t\tnumGlobalByteSlices: args.schema.globalBytes,\n\t\t\t\t\tappArgs: this.encodeArguments(args.appArgs),\n\t\t\t\t\taccounts: args.optionalFields?.accounts ? args.optionalFields.accounts : undefined,\n\t\t\t\t\tforeignApps: args.optionalFields?.applications ? args.optionalFields.applications : undefined,\n\t\t\t\t\tforeignAssets: args.optionalFields?.assets ? args.optionalFields.assets : undefined,\n\t\t\t\t\tnote: args.optionalFields?.note ? this.to8Arr(args.optionalFields.note) : undefined\n\t\t\t\t});\n\t\t\t\tconst txId = txn.txID().toString();\n\n\t\t\t\t// Wait for confirmation\n\t\t\t\tconst result = await this.sendTransaction(txn, callbacks);\n\t\t\t\tconst transactionResponse = await this.algodClient\n\t\t\t\t\t.pendingTransactionInformation(txId)\n\t\t\t\t\t.do();\n\n\t\t\t\tresult.message = 'Created App ID: ' + transactionResponse['application-index'];\n\t\t\t\tresult.createdIndex = transactionResponse['application-index'];\n\t\t\t\tresult.meta = transactionResponse;\n\t\t\t\tresult.txId = txId;\n\t\t\t\treturn result;\n\n\t\t\t} else {\n\t\t\t\tthrow new Error('could not compile teal code');\n\t\t\t}\n\n\t\t} catch (er: any) {\n\t\t\tthrow new Error(er.message);\n\t\t}\n\t}\n\n\t/**\n\t * Create an atomic transaction to deploy a\n\t * new Smart Contract from TEAL code\n\t *\n\t * @param args AlgonautDeployArguments\n\t * @returns AlgonautAtomicTransaction\n\t */\n\tasync atomicCreateApp(args: AlgonautDeployArguments): Promise<AlgonautAtomicTransaction> {\n\t\tif (!this.account) throw new Error('There was no account!');\n\t\tif (!args.tealApprovalCode) throw new Error('No approval program provided');\n\t\tif (!args.tealClearCode) throw new Error('No clear program provided');\n\t\tif (!args.schema) throw new Error('No schema provided');\n\n\t\tif (args.optionalFields && args.optionalFields.note && args.optionalFields.note.length > 1023) {\n\t\t\tthrow new Error('Your NOTE is too long, it must be less thatn 1024 Bytes');\n\t\t} else if (this.account) {\n\t\t\ttry {\n\t\t\t\tconst sender = this.account.addr;\n\t\t\t\tconst onComplete = OnApplicationComplete.NoOpOC;\n\t\t\t\tconst suggestedParams = args.optionalFields?.suggestedParams || (await this.algodClient.getTransactionParams().do());\n\n\t\t\t\tlet approvalProgram = new Uint8Array();\n\t\t\t\tlet clearProgram = new Uint8Array();\n\n\t\t\t\tapprovalProgram = await this.compileProgram(args.tealApprovalCode);\n\t\t\t\tclearProgram = await this.compileProgram(args.tealClearCode);\n\n\t\t\t\t// create unsigned transaction\n\t\t\t\tif (!approvalProgram || !clearProgram) {\n\t\t\t\t\tthrow new Error('Error: you must provide an approval program and a clear state program.');\n\t\t\t\t}\n\n\t\t\t\tconst applicationCreateTransaction = makeApplicationCreateTxn(\n\t\t\t\t\tsender,\n\t\t\t\t\tsuggestedParams,\n\t\t\t\t\tonComplete,\n\t\t\t\t\tapprovalProgram,\n\t\t\t\t\tclearProgram,\n\t\t\t\t\targs.schema.localInts,\n\t\t\t\t\targs.schema.localBytes,\n\t\t\t\t\targs.schema.globalInts,\n\t\t\t\t\targs.schema.globalBytes,\n\t\t\t\t\tthis.encodeArguments(args.appArgs),\n\t\t\t\t\targs.optionalFields?.accounts ? args.optionalFields.accounts : undefined,\n\t\t\t\t\targs.optionalFields?.applications ? args.optionalFields.applications : undefined,\n\t\t\t\t\targs.optionalFields?.assets ? args.optionalFields.assets : undefined,\n\t\t\t\t\targs.optionalFields?.note ? this.to8Arr(args.optionalFields.note) : undefined\n\t\t\t\t);\n\n\t\t\t\treturn {\n\t\t\t\t\ttransaction: applicationCreateTransaction,\n\t\t\t\t\ttransactionSigner: this.account,\n\t\t\t\t\tisLogigSig: false\n\t\t\t\t};\n\n\t\t\t} catch (er: any) {\n\t\t\t\tthrow new Error('There was an error creating the transaction');\n\t\t\t}\n\t\t} else {\n\t\t\tthrow new Error('Algonaut.js has no account loaded!');\n\t\t}\n\t}\n\n\n\t/**\n\t * deploys a contract from an lsig account\n\t * keep in mind that the local and global byte and int values have caps,\n\t * 16 for local and 32 for global and that the cost of deploying the\n\t * app goes up based on how many of these slots you want to allocate\n\t *\n\t * @param args AlgonautLsigDeployArguments\n\t * @returns\n\t */\n\tasync deployTealWithLSig(\n\t\targs: AlgonautLsigDeployArguments\n\t): Promise<AlgonautTransactionStatus> {\n\t\tif (args.noteText && args.noteText.length > 511) {\n\t\t\tthrow new Error('Your note is too long');\n\t\t}\n\n\t\tif (!this.account) throw new Error('there was no account');\n\n\t\tlet encodedArgs = [] as Uint8Array[];\n\t\tif (args.appArgs && args.appArgs.length) {\n\t\t\tencodedArgs = this.encodeArguments(args.appArgs);\n\t\t}\n\n\t\tconst sender = args.lsig.address();\n\t\tconst onComplete = OnApplicationComplete.NoOpOC;\n\t\tconst suggestedParams = args.optionalFields?.suggestedParams || (await this.algodClient.getTransactionParams().do());\n\n\t\tlet approvalProgram = new Uint8Array();\n\t\tlet clearProgram = new Uint8Array();\n\n\t\ttry {\n\t\t\tapprovalProgram = await this.compileProgram(args.tealApprovalCode);\n\t\t\tclearProgram = await this.compileProgram(args.tealClearCode);\n\n\t\t\t// create unsigned transaction\n\t\t\tif (approvalProgram && clearProgram) {\n\t\t\t\tconst txn = makeApplicationCreateTxn(\n\t\t\t\t\tsender,\n\t\t\t\t\tsuggestedParams,\n\t\t\t\t\tonComplete,\n\t\t\t\t\tapprovalProgram,\n\t\t\t\t\tclearProgram,\n\t\t\t\t\targs.schema.localInts,\n\t\t\t\t\targs.schema.localBytes,\n\t\t\t\t\targs.schema.globalInts,\n\t\t\t\t\targs.schema.globalBytes,\n\t\t\t\t\tencodedArgs,\n\t\t\t\t\targs.optionalFields?.accounts || undefined\n\t\t\t\t);\n\n\t\t\t\tconst txId = txn.txID().toString();\n\t\t\t\tconst signedTxn = signLogicSigTransactionObject(txn, args.lsig);\n\n\t\t\t\tawait this.algodClient.sendRawTransaction(signedTxn.blob).do();\n\t\t\t\tconst txStatus = await this.waitForConfirmation(txId);\n\n\t\t\t\t// TBD check txStatus\n\n\t\t\t\t// display results\n\t\t\t\tconst transactionResponse = await this.algodClient\n\t\t\t\t\t.pendingTransactionInformation(txId)\n\t\t\t\t\t.do();\n\t\t\t\tconst appId = transactionResponse['application-index'];\n\n\t\t\t\treturn {\n\t\t\t\t\tstatus: 'success',\n\t\t\t\t\tmessage: 'created new app with id: ' + appId,\n\t\t\t\t\ttxId\n\t\t\t\t};\n\t\t\t} else {\n\t\t\t\tthrow new Error('Error compiling programs.');\n\t\t\t}\n\t\t} catch (er: any) {\n\t\t\tconsole.error('Error deploying contract:');\n\t\t\tthrow new Error(er);\n\t\t}\n\t}\n\n\t/**\n\t * Updates an application with `makeApplicationUpdateTxn`\n\t * @param args AlgonautUpdateAppArguments\n\t * @returns atomic transaction that updates the app\n\t */\n\tasync atomicUpdateApp(args: AlgonautUpdateAppArguments): Promise<AlgonautAtomicTransaction> {\n\t\tif (!this.account) throw new Error('Algonaut.js has no account loaded!');\n\t\tif (!args.tealApprovalCode) throw new Error('No approval program provided');\n\t\tif (!args.tealClearCode) throw new Error('No clear program provided');\n\t\tif (args.optionalFields && args.optionalFields.note && args.optionalFields.note.length > 1023) {\n\t\t\tthrow new Error('Your NOTE is too long, it must be less thatn 1024 Bytes');\n\t\t}\n\n\t\ttry {\n\t\t\tconst sender = this.account.addr;\n\t\t\tconst onComplete = OnApplicationComplete.NoOpOC;\n\t\t\tconst suggestedParams = args.optionalFields?.suggestedParams || (await this.algodClient.getTransactionParams().do());\n\n\t\t\tlet approvalProgram = new Uint8Array();\n\t\t\tlet clearProgram = new Uint8Array();\n\n\t\t\tapprovalProgram = await this.compileProgram(args.tealApprovalCode);\n\t\t\tclearProgram = await this.compileProgram(args.tealClearCode);\n\n\t\t\t// create unsigned transaction\n\t\t\tif (!approvalProgram || !clearProgram) {\n\t\t\t\tthrow new Error('Error: you must provide an approval program and a clear state program.');\n\t\t\t}\n\n\t\t\tconst applicationCreateTransaction = makeApplicationUpdateTxn(\n\t\t\t\tsender,\n\t\t\t\tsuggestedParams,\n\t\t\t\targs.appIndex,\n\t\t\t\tapprovalProgram,\n\t\t\t\tclearProgram,\n\t\t\t\tthis.encodeArguments(args.appArgs),\n\t\t\t\targs.optionalFields?.accounts ? args.optionalFields.accounts : undefined,\n\t\t\t\targs.optionalFields?.applications ? args.optionalFields.applications : undefined,\n\t\t\t\targs.optionalFields?.assets ? args.optionalFields.assets : undefined,\n\t\t\t\targs.optionalFields?.note ? this.to8Arr(args.optionalFields.note) : undefined\n\t\t\t);\n\n\t\t\treturn {\n\t\t\t\ttransaction: applicationCreateTransaction,\n\t\t\t\ttransactionSigner: this.account,\n\t\t\t\tisLogigSig: false\n\t\t\t};\n\n\t\t} catch (er: any) {\n\t\t\tthrow new Error('There was an error creating the transaction');\n\t\t}\n\t}\n\n\t/**\n\t * Sends an update app transaction\n\t * @param args AlgonautUpdateAppArguments\n\t * @param callbacks optional callbacks: `onSign`, `onSend`, `onConfirm`\n\t * @returns transaction status\n\t */\n\tasync updateApp(args: AlgonautUpdateAppArguments, callbacks?: AlgonautTxnCallbacks): Promise<AlgonautTransactionStatus> {\n\t\tconst { transaction } = await this.atomicUpdateApp(args);\n\t\treturn await this.sendTransaction(transaction, callbacks);\n\t}\n\n\t/**\n\t * Compiles TEAL source via [algodClient.compile](https://py-algorand-sdk.readthedocs.io/en/latest/algosdk/v2client/algod.html#v2client.algod.AlgodClient.compile)\n\t * @param programSource source to compile\n\t * @returns Promise resolving to Buffer of compiled bytes\n\t */\n\tasync compileProgram(programSource: string): Promise<Uint8Array> {\n\t\tconst encoder = new TextEncoder();\n\t\tconst programBytes = encoder.encode(programSource);\n\t\tconst compileResponse = await this.algodClient.compile(programBytes).do();\n\t\tconst compiledBytes = new Uint8Array(\n\t\t\tBuffer.from(compileResponse.result, 'base64')\n\t\t);\n\t\treturn compiledBytes;\n\t}\n\n\tasync atomicSendAlgo(args: AlgonautPaymentArguments): Promise<AlgonautAtomicTransaction> {\n\t\tif (!args.amount) throw new Error('You did not specify an amount!');\n\t\tif (!args.to) throw new Error('You did not specify a to address');\n\n\t\tconst fromAddr = args.from || this.account?.addr;\n\n\t\tif (fromAddr) {\n\t\t\tconst encodedNote = args.optionalFields?.note ? this.to8Arr(args.optionalFields.note) : new Uint8Array();\n\t\t\tconst suggestedParams = args.optionalFields?.suggestedParams || (await this.algodClient.getTransactionParams().do());\n\n\t\t\tconst transaction =\n\t\t\t\tmakePaymentTxnWithSuggestedParamsFromObject({\n\t\t\t\t\tfrom: fromAddr,\n\t\t\t\t\tto: args.to,\n\t\t\t\t\tamount: args.amount,\n\t\t\t\t\tnote: encodedNote,\n\t\t\t\t\tsuggestedParams\n\t\t\t\t});\n\n\t\t\treturn {\n\t\t\t\ttransaction: transaction,\n\t\t\t\ttransactionSigner: this.account,\n\t\t\t\tisLogigSig: false\n\t\t\t};\n\t\t} else {\n\t\t\tthrow new Error('there is no fromAddr');\n\t\t}\n\t}\n\n\t/**\n\t * DEPRECATED. Use `atomicSendAlgo`. This name will be removed in future versions.\n\t * @deprecated\n\t * @param args `AlgonautPaymentArgs` object containing `to`, `amount`, and optional `note`\n\t * @param callbacks optional AlgonautTxnCallbacks\n\t * @returns Promise resolving to atomic trasnaction\n\t */\n\tasync atomicPayment(args: AlgonautPaymentArguments): Promise<AlgonautAtomicTransaction> {\n\t\tconsole.warn('atomicPayment is deprecated and will be removed in future versions.');\n\t\treturn await this.atomicSendAlgo(args);\n\t}\n\n\t/**\n\t * Sends ALGO from own account to `args.to`\n\t *\n\t * @param args `AlgonautPaymentArgs` object containing `to`, `amount`, and optional `note`\n\t * @param callbacks optional AlgonautTxnCallbacks\n\t * @returns Promise resolving to transaction status\n\t */\n\tasync sendAlgo(args: AlgonautPaymentArguments, callbacks?: AlgonautTxnCallbacks): Promise<AlgonautTransactionStatus> {\n\t\tif (!this.account) throw new Error('there was no account!');\n\t\tconst { transaction } = await this.atomicSendAlgo(args);\n\t\treturn await this.sendTransaction(transaction, callbacks);\n\t}\n\n\t/**\n\t * Fetch full account info for an account\n\t * @param address the accress to read info for\n\t * @returns Promise of type AccountInfo\n\t */\n\tasync getAccountInfo(address: string): Promise<any> {\n\t\tif (!address) throw new Error('No address provided');\n\n\t\t//console.log//('checking algo balance');\n\t\tconst accountInfo = await this.algodClient.accountInformation(address).do();\n\t\treturn accountInfo;\n\t}\n\n\n\t/**\n\t * Checks Algo balance of account\n\t * @param address - Wallet of balance to check\n\t * @returns Promise resolving to Algo balance\n\t */\n\tasync getAlgoBalance(address: string): Promise<any> {\n\t\tif (!address) throw new Error('No address provided');\n\t\t//console.log('checking algo balance');\n\t\tconst accountInfo = await this.algodClient.accountInformation(address).do();\n\t\treturn accountInfo.amount;\n\t}\n\n\t/**\n\t * Checks token balance of account\n\t * @param address - Wallet of balance to check\n\t * @param assetIndex - the ASA index\n\t * @returns Promise resolving to token balance\n\t */\n\tasync getTokenBalance(address: string, assetIndex: number): Promise<number> {\n\t\tif (!address) throw new Error('No address provided');\n\t\tif (!assetIndex) throw new Error('No asset index provided');\n\n\t\tconst accountInfo = await this.algodClient.accountInformation(address).do();\n\t\t//console.log(accountInfo);\n\n\t\tlet stkBalance = 0;\n\t\t//console.log(accountInfo.assets);\n\t\taccountInfo.assets.forEach((asset: any) => {\n\t\t\tif (asset['asset-id'] == assetIndex) {\n\t\t\t\tstkBalance = asset.amount;\n\t\t\t}\n\t\t});\n\n\t\treturn stkBalance;\n\t}\n\n\t/**\n\t * Checks if account has at least one token (before playback)\n\t * Keeping this here in case this is a faster/less expensive operation than checking actual balance\n\t * @param address - Address to check\n\t * @param assetIndex - the index of the ASA\n\t */\n\tasync accountHasTokens(address: string, assetIndex: number): Promise<any> {\n\t\treturn 'this is not done yet';\n\t}\n\n\t/**\n\t * Gets global state for an application.\n\t * @param applicationIndex - the applications index\n\t * @returns {object} object representing global state\n\t */\n\tasync getAppGlobalState(applicationIndex: number): Promise<any> {\n\t\tif (!applicationIndex) throw new Error('No application ID provided');\n\n\t\tconst info = await this.getAppInfo(applicationIndex);\n\t\tif (info.hasState) {\n\t\t\treturn this.stateArrayToObject(info.globals);\n\t\t} else {\n\t\t\treturn {} as any;\n\t\t}\n\t}\n\n\n\n\t/**\n\t * Gets account local state for an app. Defaults to `this.account` unless\n\t * an address is provided.\n\t * @param applicationIndex the applications index\n\t */\n\tasync getAppLocalState(applicationIndex: number, address?: string): Promise<AlgonautAppState | void> {\n\t\tif (!applicationIndex) throw new Error('No application ID provided');\n\n\t\tconst state = {\n\t\t\thasState: false,\n\t\t\tglobals: [],\n\t\t\tlocals: [],\n\t\t\tcreatorAddress: '',\n\t\t\tindex: applicationIndex\n\t\t} as AlgonautAppState;\n\n\t\t// read state\n\n\t\t// can we detect addresses values and auto-convert them?\n\t\t// maybe a 32-byte field gets an address field added?\n\n\t\tif (this.account && this.account.addr && !address) {\n\t\t\taddress = this.account.addr;\n\t\t}\n\n\t\tif (address) {\n\t\t\tconst accountInfoResponse = await this.algodClient\n\t\t\t\t.accountInformation(address)\n\t\t\t\t.do();\n\n\t\t\t//console.log(accountInfoResponse);\n\n\t\t\tfor (let i = 0; i < accountInfoResponse['apps-local-state'].length; i++) {\n\t\t\t\tif (accountInfoResponse['apps-local-state'][i].id == applicationIndex) {\n\t\t\t\t\t//console.log('Found Application');\n\n\t\t\t\t\tstate.hasState = true;\n\n\t\t\t\t\tfor (let n = 0; n < accountInfoResponse['apps-local-state'][i]['key-value'].length; n++) {\n\n\t\t\t\t\t\tconst stateItem = accountInfoResponse['apps-local-state'][i]['key-value'][n];\n\t\t\t\t\t\tconst key = Buffer.from(stateItem.key, 'base64').toString();\n\t\t\t\t\t\tconst type = stateItem.value.type;\n\t\t\t\t\t\tlet value = undefined as undefined | string | number;\n\t\t\t\t\t\tlet valueAsAddr = '';\n\n\t\t\t\t\t\tif (type == 1) {\n\t\t\t\t\t\t\tvalue = Buffer.from(stateItem.value.bytes, 'base64').toString();\n\t\t\t\t\t\t\tvalueAsAddr = encodeAddress(Buffer.from(stateItem.value.bytes, 'base64'));\n\n\t\t\t\t\t\t} else if (stateItem.value.type == 2) {\n\t\t\t\t\t\t\tvalue = stateItem.value.uint;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tstate.locals.push({\n\t\t\t\t\t\t\tkey: key,\n\t\t\t\t\t\t\tvalue: value || '',\n\t\t\t\t\t\t\taddress: valueAsAddr\n\t\t\t\t\t\t});\n\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn state;\n\t\t} else {\n\t\t\t// throw new Error('No address provided, and no account set.');\n\t\t\tconsole.warn('Algonaut used in non-authd state, not getting local vars');\n\t\t}\n\t}\n\n\tasync atomicAssetTransferWithLSig(args: AlgonautLsigSendAssetArguments): Promise<AlgonautAtomicTransaction> {\n\n\t\tif (args.lsig) {\n\t\t\tconst suggestedParams = args.optionalFields?.suggestedParams || (await this.algodClient.getTransactionParams().do());\n\n\t\t\tconst transaction =\n\t\t\t\tmakeAssetTransferTxnWithSuggestedParamsFromObject({\n\t\t\t\t\tfrom: args.lsig.address(),\n\t\t\t\t\tto: args.to,\n\t\t\t\t\tamount: args.amount,\n\t\t\t\t\tassetIndex: args.assetIndex,\n\t\t\t\t\tsuggestedParams\n\t\t\t\t});\n\n\t\t\treturn {\n\t\t\t\ttransaction: transaction,\n\t\t\t\ttransactionSigner: args.lsig,\n\t\t\t\tisLogigSig: true\n\t\t\t};\n\t\t} else {\n\t\t\tthrow new Error('there is no logic sig object!');\n\t\t}\n\t}\n\n\tasync atomicPaymentWithLSig(args: AlgonautLsigPaymentArguments): Promise<AlgonautAtomicTransaction> {\n\t\tif (args.lsig) {\n\t\t\tconst suggestedParams = args.optionalFields?.suggestedParams || (await this.algodClient.getTransactionParams().do());\n\t\t\tconst transaction =\n\t\t\t\tmakePaymentTxnWithSuggestedParamsFromObject({\n\t\t\t\t\tfrom: args.lsig.address(),\n\t\t\t\t\tto: args.to,\n\t\t\t\t\tamount: args.amount,\n\t\t\t\t\tsuggestedParams\n\t\t\t\t});\n\n\t\t\treturn {\n\t\t\t\ttransaction: transaction,\n\t\t\t\ttransactionSigner: args.lsig,\n\t\t\t\tisLogigSig: true\n\t\t\t};\n\t\t} else {\n\t\t\tthrow new Error('there is no account!');\n\t\t}\n\t}\n\n\t/**\n\t * Sends a transaction or multiple through the correct channels, depending on signing mode.\n\t * If no signing mode is set, we assume local signing.\n\t * @param txnOrTxns Either an array of atomic transactions or a single transaction to sign\n\t * @param callbacks Optional object with callbacks - `onSign`, `onSend`, and `onConfirm`\n\t * @returns Promise resolving to AlgonautTransactionStatus\n\t */\n\tasync sendTransaction(txnOrTxns: AlgonautAtomicTransaction[] | Transaction | AlgonautAtomicTransaction, callbacks?: AlgonautTxnCallbacks): Promise<AlgonautTransactionStatus> {\n\t\tif (!this.account) throw new Error('There is no account');\n\t\tif (this.config && this.config.SIGNING_MODE && this.config.SIGNING_MODE === 'inkey') {\n\t\t\t// let's do the inkey thing\n\n\t\t\t// 1. depending on how txns are sent into `sendTransaction`, we need to deal with them\n\t\t\tlet signedTxns;\n\n\n\t\t\t// HANDLE ARRAY OF TRANSACTIONS\n\t\t\tif (Array.isArray(txnOrTxns) && txnOrTxns[0] && txnOrTxns[0].transaction) {\n\t\t\t\t// array of AlgonautAtomicTransaction, map these to get .transaction out\n\t\t\t\tconst unwrappedTxns = txnOrTxns.map(txn => txn.transaction);\n\n\t\t\t\t// don't assign group ID here! inkey will assign it :)\n\n\t\t\t\t// encode txns\n\t\t\t\tconst txnsToSign = unwrappedTxns.map((txn: any) => {\n\t\t\t\t\tconst encodedTxn = Buffer.from(encodeUnsignedTransaction(txn)).toString('base64');\n\t\t\t\t\treturn encodedTxn;\n\t\t\t\t});\n\n\t\t\t\tconst inkeyResponse = await this.inkeySignTxns(txnsToSign);\n\t\t\t\tif (inkeyResponse.success && inkeyResponse.signedTxns) {\n\t\t\t\t\t// user approved transaction\n\t\t\t\t\tsignedTxns = inkeyResponse.signedTxns;\n\t\t\t\t} else if (inkeyResponse.error) {\n\t\t\t\t\t// there was an error with the transaction\n\t\t\t\t\tthrow new Error(inkeyResponse.error);\n\t\t\t\t} else if (inkeyResponse.reject) {\n\t\t\t\t\t// user rejected the transaction\n\t\t\t\t\treturn {\n\t\t\t\t\t\tstatus: 'rejected',\n\t\t\t\t\t\tmessage: 'User rejected the message.',\n\t\t\t\t\t\ttxId: ''\n\t\t\t\t\t};\n\t\t\t\t} else {\n\t\t\t\t\t// this should never happen\n\t\t\t\t\tthrow new Error('Unknown error sending Inkey txn');\n\t\t\t\t}\n\n\t\t\t\t// HANDLE SINGLE ATOMIC TRANSACTION\n\t\t\t} else {\n\n\t\t\t\tlet txn: Transaction;\n\t\t\t\tif (txnOrTxns && (txnOrTxns as any).transaction) {\n\t\t\t\t\ttxn = (txnOrTxns as AlgonautAtomicTransaction).transaction;\n\t\t\t\t} else {\n\t\t\t\t\ttxn = (txnOrTxns as Transaction);\n\t\t\t\t}\n\n\t\t\t\t// send base64 to inkey\n\t\t\t\tconst encodedTxn = Buffer.from(encodeUnsignedTransaction(txn)).toString('base64');\n\t\t\t\tconst inkeyResponse = await this.inkeySignTxns([encodedTxn]);\n\t\t\t\tif (inkeyResponse.success && inkeyResponse.signedTxns) {\n\t\t\t\t\t// user approved transaction\n\t\t\t\t\tsignedTxns = inkeyResponse.signedTxns;\n\t\t\t\t} else if (inkeyResponse.error) {\n\t\t\t\t\t// there was an error with the transaction\n\t\t\t\t\tthrow new Error(inkeyResponse.error);\n\t\t\t\t} else if (inkeyResponse.reject) {\n\t\t\t\t\t// user rejected the transaction\n\t\t\t\t\treturn {\n\t\t\t\t\t\tstatus: 'rejected',\n\t\t\t\t\t\tmessage: 'User rejected the message.',\n\t\t\t\t\t\ttxId: ''\n\t\t\t\t\t};\n\t\t\t\t} else {\n\t\t\t\t\t// this should never happen\n\t\t\t\t\tthrow new Error('Unknown error sending Inkey txn');\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (callbacks?.onSign) callbacks.onSign(signedTxns);\n\n\t\t\tconst tx = await this.algodClient.sendRawTransaction(signedTxns).do();\n\n\t\t\tif (callbacks?.onSend) callbacks.onSend(tx);\n\n\t\t\t// Wait for transaction to be confirmed\n\t\t\tconst txStatus = await this.waitForConfirmation(tx.txId);\n\n\t\t\tconst transactionResponse = await this.algodClient\n\t\t\t\t.pendingTransactionInformation(tx.txId)\n\t\t\t\t.do();\n\t\t\ttxStatus.meta = transactionResponse;\n\n\t\t\tif (callbacks?.onConfirm) callbacks.onConfirm(txStatus);\n\n\t\t\treturn txStatus;\n\t\t} else {\n\t\t\t// assume local signing\n\t\t\tif (Array.isArray(txnOrTxns)) {\n\t\t\t\treturn await this.sendAtomicTransaction(txnOrTxns, callbacks);\n\t\t\t} else {\n\t\t\t\tlet txn: Transaction;\n\t\t\t\tif (txnOrTxns && (txnOrTxns as any).transaction) {\n\t\t\t\t\t// sent an atomic Transaction\n\t\t\t\t\ttxn = (txnOrTxns as AlgonautAtomicTransaction).transaction;\n\t\t\t\t} else {\n\t\t\t\t\t// assume a transaction\n\t\t\t\t\ttxn = txnOrTxns as Transaction;\n\t\t\t\t}\n\n\t\t\t\tif (!this.account || !this.account.sk) throw new Error('');\n\t\t\t\tconst signedTxn = (txn as Transaction).signTxn(this.account.sk);\n\t\t\t\tif (callbacks?.onSign) callbacks.onSign(signedTxn);\n\n\t\t\t\tconst tx = await this.algodClient.sendRawTransaction(signedTxn).do();\n\t\t\t\tif (callbacks?.onSend) callbacks.onSend(signedTxn);\n\n\t\t\t\tconst txId = tx.txId || tx.id || tx.txId().toString();\n\n\t\t\t\tconst txStatus = await this.waitForConfirmation(txId);\n\t\t\t\tif (callbacks?.onConfirm) callbacks.onConfirm(signedTxn);\n\n\t\t\t\treturn txStatus;\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Sends messages to Inkey via FrameBus\n\t * @param data Message to send\n\t * @returns Whatever Inkey gives us\n\t */\n\tasync inkeyMessageAsync(data: any, options?: { showFrame: boolean }): Promise<any> {\n\t\tif (!this.inkeyWallet.frameBus) {\n\t\t\tthrow new Error('No inkey frameBus');\n\t\t}\n\n\t\tif (!this.inkeyWallet.frameBus.ready) {\n\t\t\tawait this.inkeyWallet.frameBus.isReady();\n\t\t}\n\n\t\tdata.source = 'ncc-inkey-client';\n\t\tdata.async = true;\n\n\t\tif (options?.showFrame) this.inkeyWallet.frameBus.showFrame();\n\n\t\tconst payload = await this.inkeyWallet.frameBus.emitAsync<any>(data);\n\t\treturn payload;\n\t}\n\n\n\t/**\n\t * Sends unsigned transactions to Inkey, awaits signing, returns signed txns\n\t * @param txns Array of base64 encoded transactions OR more complex obj array w txn signing type needed\n\t * @returns { Promise<InkeySignTxnResponse> } Promise resolving to response object containing signedTxns if successful. Otherwise, provides `error` or `reject` properties. { success, reject, error, signedTxns }\n\t */\n\tasync inkeySignTxns(txns: string[] | TxnForSigning[]): Promise<InkeySignTxnResponse> {\n\t\tlet data;\n\t\tif (typeof txns[0] == 'string') {\n\t\t\t// keep backwards compatibility\n\t\t\tdata = {\n\t\t\t\ttype: 'sign-txns', // determines payload type\n\t\t\t\tpayload: {\n\t\t\t\t\ttxns\n\t\t\t\t},\n\t\t\t};\n\t\t} else if (typeof txns[0] == 'object') {\n\t\t\tdata = {\n\t\t\t\ttype: 'sign-txns', // determines payload type\n\t\t\t\tpayload: {\n\t\t\t\t\ttxns\n\t\t\t\t},\n\t\t\t};\n\t\t} else {\n\t\t\tthrow new Error('bad txns array input...');\n\t\t}\n\n\t\tconst res = await this.inkeyMessageAsync(data, { showFrame: true });\n\n\t\tthis.inkeyWallet.frameBus?.hideFrame();\n\n\t\tif (res.error) {\n\t\t\treturn {\n\t\t\t\tsuccess: false,\n\t\t\t\treject: false,\n\t\t\t\terror: res.error\n\t\t\t};\n\t\t}\n\n\t\tif (res.reject) {\n\t\t\treturn {\n\t\t\t\tsuccess: false,\n\t\t\t\treject: true\n\t\t\t};\n\t\t}\n\n\t\treturn {\n\t\t\tsuccess: true,\n\t\t\treject: false,\n\t\t\tsignedTxns: res.signedTxns as Uint8Array[]\n\t\t};\n\t}\n\n\t/**\n\t * Shows the Inkey wallet frame\n\t */\n\tinkeyShow(routepath?: string) {\n\t\tif (this.inkeyWallet.frameBus) {\n\t\t\tthis.inkeyWallet.frameBus.showFrame(routepath);\n\t\t}\n\t}\n\n\t/**\n\t * Hides the Inkey wallet frame\n\t */\n\tinkeyHide() {\n\t\tif (this.inkeyWallet.frameBus) {\n\t\t\tthis.inkeyWallet.frameBus.hideFrame();\n\t\t\tthis.inkeyMessageAsync({ type: 'reject' });\n\t\t}\n\t}\n\n\t/**\n\t * Sets the app / userbase to use for Inkey accounts. This must be set\n\t * before Inkey can be used to login or sign transactions.\n\t * @param appCode String determining the namespace for user accounts\n\t * @returns Promise resolving to response from Inkey\n\t */\n\tasync inkeySetApp(appCode: string) {\n\t\tconst data = {\n\t\t\ttype: 'set-app',\n\t\t\tpayload: { appCode }\n\t\t};\n\n\t\treturn await this.inkeyMessageAsync(data);\n\t}\n\n\t/**\n\t * Opens Inkey to allow users to create an account or login with a previously\n\t * created account. Must be called before transactions can be signed.\n\t * @param payload Optional payload object, can contain `siteName` parameter to display the name of the application.\n\t * @returns Promise resolving to an account object of type `{ account: string }`\n\t */\n\tasync inkeyConnect(payload?: { siteName?: string }): Promise<any> {\n\t\tif (!payload) payload = {};\n\t\tconst data = {\n\t\t\ttype: 'connect',\n\t\t\tpayload\n\t\t};\n\n\t\tconst account = await this.inkeyMessageAsync(data, { showFrame: true });\n\t\tthis.setInkeyAccount(account.address);\n\t\tif (this.config) this.config.SIGNING_MODE = 'inkey';\n\t\treturn account;\n\t}\n\n\t/**\n\t * Tells Inkey to close your session & clear local storage.\n\t * @returns Success or fail message\n\t */\n\tasync inkeyDisconnect(): Promise<any> {\n\t\t// console.log('inkeyDisconnect');\n\t\tconst data = {\n\t\t\ttype: 'disconnect'\n\t\t};\n\n\t\tif (!this.account || !this.account.addr || !this.address) {\n\t\t\tconsole.warn('no acct to disconnect');\n\t\t\treturn;\n\t\t}\n\n\t\tconst res = await this.inkeyMessageAsync(data, { showFrame: false });\n\n\t\tif (res.success) {\n\t\t\t// remove algonaut account\n\t\t\tthis.account = undefined;\n\t\t}\n\n\t\treturn res;\n\t}\n\n\t/**\n\t * run atomic takes an array of transactions to run in order, each\n\t * of the atomic transaction methods needs to return an object containing\n\t * the transaction and the signed transaction\n\t * \t[ atomicSendASA(),\n\t\t\tatomicSendAlgo(),\n\t\t\tatomicCallApp()]\n\t * @param transactions a Uint8Array of ALREADY SIGNED transactions\n\t */\n\tasync sendAtomicTransaction(transactions: AlgonautAtomicTransaction[], callbacks?: AlgonautTxnCallbacks): Promise<AlgonautTransactionStatus> {\n\n\t\ttry {\n\n\t\t\tconst txns = [] as Transaction[];\n\t\t\tconst signed = [] as Uint8Array[];\n\t\t\ttransactions.forEach((txn: AlgonautAtomicTransaction) => {\n\t\t\t\ttxns.push(txn.transaction);\n\t\t\t});\n\n\t\t\t// this is critical, if the group doesn't have an id\n\t\t\t// the transactions are processed as one-offs!\n\t\t\tconst txnGroup = assignGroupID(txns);\n\n\t\t\t// sign all transactions in the group:\n\t\t\ttransactions.forEach((txn: AlgonautAtomicTransaction, i) => {\n\t\t\t\tlet signedTx: {\n\t\t\t\t\ttxID: string;\n\t\t\t\t\tblob: Uint8Array;\n\t\t\t\t};\n\t\t\t\tif (txn.isLogigSig) {\n\t\t\t\t\tsignedTx = signLogicSigTransaction(txnGroup[i], txn.transactionSigner as LogicSigAccount);\n\t\t\t\t} else {\n\t\t\t\t\tsignedTx = signTransaction(txnGroup[i], (txn.transactionSigner as AlgosdkAccount).sk);\n\t\t\t\t}\n\t\t\t\tsigned.push(signedTx.blob);\n\t\t\t});\n\n\t\t\tif (callbacks?.onSign) callbacks.onSign(signed);\n\n\t\t\tconst tx = await this.algodClient.sendRawTransaction(signed).do();\n\n\t\t\tif (callbacks?.onSend) callbacks.onSend(tx);\n\n\t\t\t// Wait for transaction to be confirmed\n\t\t\tconst txStatus = await this.waitForConfirmation(tx.txId);\n\t\t\tconst transactionResponse = await this.algodClient\n\t\t\t\t.pendingTransactionInformation(tx.txId)\n\t\t\t\t.do();\n\t\t\ttxStatus.meta = transactionResponse;\n\n\t\t\tif (callbacks?.onConfirm) callbacks.onConfirm(txStatus);\n\n\t\t\treturn txStatus;\n\t\t} catch (e: any) {\n\t\t\tconsole.error('Error sending atomic transaction:');\n\t\t\tthrow new Error(e);\n\t\t}\n\n\t}\n\n\t/**\n\t * Signs an array of Transactions (used in Inkey) with the currently authenticated account\n\t * @param txns Array of Transaction\n\t * @returns Uint8Array[] of signed transactions\n\t */\n\tsignTransactionGroup(txns: Transaction[]) {\n\t\tif (!this.account) throw new Error('There is no account!');\n\t\treturn utils.signTransactionGroup(txns, this.account);\n\t}\n\n\t/**\n\t * Signs base64-encoded transactions with the currently authenticated account\n\t * @param txns Array of Base64-encoded unsigned transactions\n\t * @returns Uint8Array signed transactions\n\t */\n\tsignBase64Transactions(txns: string[]): Uint8Array[] | Uint8Array {\n\t\tif (!this.account) throw new Error('There is no account!');\n\t\treturn utils.signBase64Transactions(txns, this.account);\n\t}\n\n\t/**\n\t * Signs base64-encoded transactions in the object format with the currently authenticated account\n\t * @param txnsForSigning Array of objects containing Base64-encoded unsigned transactions + info about how they need to be signed\n\t * @returns Uint8Array signed transactions\n\t */\n\tsignBase64TxnObjects(txnsForSigning: TxnForSigning[]): Uint8Array[] | Uint8Array {\n\t\tif (!this.account) throw new Error('There is no account!');\n\t\treturn utils.signBase64TxnObjects(txnsForSigning, this.account);\n\t}\n\n\t/**\n\t * Interally used to determine how to sign transactions on more generic functions\n\t * TODO: currently we're not using this, could deprecate?\n\t * @returns true if we are signing transactions with inkey, false otherwise\n\t */\n\tusingInkeyWallet(): boolean {\n\t\tif (this.config &&\n\t\t\tthis.config.SIGNING_MODE &&\n\t\t\tthis.config.SIGNING_MODE === 'inkey') {\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t}\n\n\t/** INCLUDE ALL THE UTILITIES IN ALGONAUT EXPORT FOR CONVENIENCE **/\n\n\t/**\n\t *\n\t * @param str string\n\t * @param enc the encoding type of the string (defaults to utf8)\n\t * @returns string encoded as Uint8Array\n\t */\n\tto8Arr(str: string, enc: BufferEncoding = 'utf8'): Uint8Array {\n\t\treturn utils.to8Arr(str, enc);\n\t}\n\n\t/**\n\t * Helper function to turn `globals` and `locals` array into more useful objects\n\t *\n\t * @param stateArray State array returned from functions like {@link getAppInfo}\n\t * @returns A more useful object: `{ array[0].key: array[0].value, array[1].key: array[1].value, ... }`\n\t */\n\tstateArrayToObject(stateArray: object[]): any {\n\t\treturn utils.stateArrayToObject(stateArray);\n\t}\n\n\t/**\n\t * Used for decoding state\n\t * @param encoded Base64 string\n\t * @returns Human-readable string\n\t */\n\tfromBase64(encoded: string): string {\n\t\treturn utils.fromBase64(encoded);\n\t}\n\n\t/**\n\t * Decodes a Base64-encoded Uint8 Algorand address and returns a string\n\t * @param encoded An encoded Algorand address\n\t * @returns Decoded address\n\t */\n\tvalueAsAddr(encoded: string): string {\n\t\treturn utils.valueAsAddr(encoded);\n\t}\n\n\t/**\n\t * Decodes app state into a human-readable format\n\t * @param stateArray Encoded app state\n\t * @returns Array of objects with key, value, and address properties\n\t */\n\tdecodeStateArray(stateArray: AlgonautAppStateEncoded[]) {\n\t\treturn utils.decodeStateArray(stateArray);\n\t}\n\n\t/**\n\t * Does what it says on the tin.\n\t * @param txn base64-encoded unsigned transaction\n\t * @returns transaction object\n\t */\n\tdecodeBase64UnsignedTransaction(txn: string): Transaction {\n\t\treturn utils.decodeBase64UnsignedTransaction(txn);\n\t}\n\n\t/**\n\t * Describes an Algorand transaction, for display in Inkey\n\t * @param txn Transaction to describe\n\t */\n\ttxnSummary(txn: Transaction) {\n\t\treturn utils.txnSummary(txn);\n\t}\n\n}\nexport default Algonaut;\n\n/**\n * This export contains all the offline Algonaut functionality.\n * Since instantiation of the Algonaut class requires that you\n * configure a node, if you wish to use certain conveniences of\n * Algonaut without the need for a network, simply use\n * `import { utils } from '@thencc/algonautjs'`\n */\nexport const utils = {\n\t/**\n\t * Creates a wallet address + mnemonic from account's secret key\n\t * @returns AlgonautWallet Object containing `address` and `mnemonic`\n\t */\n\tcreateWallet(): AlgonautWallet {\n\t\tconst account = generateAccount();\n\n\t\tif (account) {\n\t\t\tconst mnemonic = secretKeyToMnemonic(account.sk);\n\t\t\treturn {\n\t\t\t\taddress: account.addr,\n\t\t\t\tmnemonic: mnemonic || ''\n\t\t\t};\n\t\t} else {\n\t\t\tthrow new Error('There was no account: could not create algonaut wallet!');\n\t\t}\n\n\t},\n\n\t/**\n\t * Recovers account from mnemonic\n\t * @param mnemonic Mnemonic associated with Algonaut account\n\t * @returns If mnemonic is valid, returns account. Otherwise, throws an error.\n\t */\n\trecoverAccount(mnemonic: string): AlgosdkAccount {\n\t\tif (!mnemonic) throw new Error('utils.recoverAccount: No mnemonic provided.');\n\n\t\ttry {\n\t\t\tconst account = mnemonicToSecretKey(mnemonic);\n\t\t\tif (isValidAddress(account?.addr)) {\n\t\t\t\t//if (this.config) this.config.SIGNING_MODE = 'local';\n\t\t\t\treturn account;\n\t\t\t} else {\n\t\t\t\tthrow new Error('Not a valid mnemonic.');\n\t\t\t}\n\t\t} catch (error: any) {\n\t\t\t// should we throw an error here instead of returning false?\n\t\t\tconsole.error(error);\n\t\t\tthrow new Error('Could not recover account from mnemonic.');\n\t\t}\n\t},\n\n\t/**\n\t * Creates a LogicSig from a base64 program string.  Note that this method does not COMPILE\n\t * the program, just builds an LSig from an already compiled base64 result!\n\t * @param base64ProgramString\n\t * @returns an algosdk LogicSigAccount\n\t */\n\tgenerateLogicSig(base64ProgramString: string): LogicSigAccount {\n\t\tif (!base64ProgramString) throw new Error('No program string provided.');\n\n\t\tconst program = new Uint8Array(\n\t\t\tBuffer.from(base64ProgramString, 'base64')\n\t\t);\n\n\t\treturn new LogicSigAccount(program);\n\t},\n\n\t/**\n\t * Sync function that returns a correctly-encoded argument array for\n\t * an algo transaction\n\t * @param args must be an any[] array, as it will often need to be\n\t * a mix of strings and numbers. Valid types are: string, number, and bigint\n\t * @returns a Uint8Array of encoded arguments\n\t */\n\tencodeArguments(args: any[]): Uint8Array[] {\n\t\tconst encodedArgs = [] as Uint8Array[];\n\n\t\t// loop through args and encode them based on type\n\t\targs.forEach((arg: any) => {\n\t\t\tif (typeof arg == 'number') {\n\t\t\t\tencodedArgs.push(encodeUint64(arg));\n\t\t\t} else if (typeof arg == 'bigint') {\n\t\t\t\tencodedArgs.push(encodeUint64(arg));\n\t\t\t} else if (typeof arg == 'string') {\n\t\t\t\tencodedArgs.push(new Uint8Array(Buffer.from(arg)));\n\t\t\t}\n\t\t});\n\n\t\treturn encodedArgs;\n\t},\n\n\t/**\n\t * Get an application's escrow account\n\t * @param appId - ID of application\n\t * @returns Escrow account address as string\n\t */\n\tgetAppEscrowAccount(appId: number | bigint): string {\n\t\tif (!appId) throw new Error('No appId provided');\n\t\treturn getApplicationAddress(appId);\n\t},\n\n\t/**\n\t *\n\t * @param str string\n\t * @param enc the encoding type of the string (defaults to utf8)\n\t * @returns string encoded as Uint8Array\n\t */\n\tto8Arr(str: string, enc: BufferEncoding = 'utf8'): Uint8Array {\n\t\treturn new Uint8Array(Buffer.from(str, enc));\n\t},\n\n\t/**\n\t * Helper function to turn `globals` and `locals` array into more useful objects\n\t *\n\t * @param stateArray State array returned from functions like {@link Algonaut.getAppInfo}\n\t * @returns A more useful object: `{ array[0].key: array[0].value, array[1].key: array[1].value, ... }`\n\t */\n\tstateArrayToObject(stateArray: object[]): any {\n\t\tconst stateObj = {} as any;\n\t\tstateArray.forEach((value: any) => {\n\t\t\tif (value.key) stateObj[value.key] = value.value || null;\n\t\t});\n\t\treturn stateObj;\n\t},\n\n\tfromBase64(encoded: string) {\n\t\treturn Buffer.from(encoded, 'base64').toString();\n\t},\n\n\tvalueAsAddr(encoded: string): string {\n\t\treturn encodeAddress(Buffer.from(encoded, 'base64'));\n\t},\n\n\tdecodeStateArray(stateArray: AlgonautAppStateEncoded[]) {\n\t\tconst result: AlgonautStateData[] = [];\n\n\t\tfor (let n = 0;\n\t\t\tn < stateArray.length;\n\t\t\tn++) {\n\n\t\t\tconst stateItem = stateArray[n];\n\n\t\t\tconst key = this.fromBase64(stateItem.key);\n\t\t\tconst type = stateItem.value.type;\n\t\t\tlet value = undefined as undefined | string | number;\n\t\t\tlet valueAsAddr = '';\n\n\t\t\tif (type == 1) {\n\t\t\t\tvalue = this.fromBase64(stateItem.value.bytes);\n\t\t\t\tvalueAsAddr = this.valueAsAddr(stateItem.value.bytes);\n\n\t\t\t} else if (stateItem.value.type == 2) {\n\t\t\t\tvalue = stateItem.value.uint;\n\t\t\t}\n\n\t\t\tresult.push({\n\t\t\t\tkey: key,\n\t\t\t\tvalue: value || '',\n\t\t\t\taddress: valueAsAddr\n\t\t\t});\n\n\t\t}\n\n\t\treturn result;\n\t},\n\n\t/**\n\t * Signs an array of Transactions (used in Inkey)\n\t * @param txns Array of Transaction\n\t * @param account AlgosdkAccount object with `sk`, that signs the transactions\n\t * @returns Uint8Array[] of signed transactions\n\t */\n\tsignTransactionGroup(txns: Transaction[], account: AlgosdkAccount): Uint8Array[] | Uint8Array {\n\n\t\t// this is critical, if the group doesn't have an id\n\t\t// the transactions are processed as one-offs!\n\n\t\tif (txns.length > 1) {\n\t\t\tconst txnGroup = assignGroupID(txns);\n\n\t\t\tconst signed = [] as Uint8Array[];\n\n\t\t\t// sign all transactions in the group\n\t\t\ttxns.forEach((txn: Transaction, i) => {\n\t\t\t\tconst signedTx = signTransaction(txnGroup[i], account.sk);\n\t\t\t\tsigned.push(signedTx.blob);\n\t\t\t});\n\n\t\t\treturn signed;\n\t\t} else {\n\t\t\tconst signedTx = signTransaction(txns[0], account.sk);\n\t\t\treturn signedTx.blob;\n\t\t}\n\t},\n\n\t/**\n\t * Signs an array of Transactions Objects (used in Inkey)\n\t * @param txnsForSigning Array of unsigned Transaction Objects (txn + signing method needed)\n\t * @param account AlgosdkAccount object with `sk`, that signs the transactions\n\t * @returns Uint8Array[] of signed transactions\n\t */\n\tsignTxnObjectGroup(txnsForSigning: TxnForSigning[], account: AlgosdkAccount): Uint8Array[] | Uint8Array {\n\t\t// console.log('signTxnObjectGroup', txnsForSigning);\n\n\t\t// this is critical, if the group doesn't have an id\n\t\t// the transactions are processed as one-offs!\n\n\t\tif (txnsForSigning.length > 1) {\n\t\t\t// decode txn str -> Transaction type\n\t\t\ttxnsForSigning.forEach(txnFS => {\n\t\t\t\tconst decodedTxn = this.decodeBase64UnsignedTransaction(txnFS.txn);\n\t\t\t\ttxnFS.txnDecoded = decodedTxn;\n\t\t\t});\n\n\t\t\t// eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n\t\t\tconst txns = txnsForSigning.map(tfs => tfs.txnDecoded!);\n\t\t\tconst txnGroup = assignGroupID(txns);\n\n\t\t\tconst signed = [] as Uint8Array[];\n\n\t\t\t// sign all transactions in the group\n\t\t\ttxnsForSigning.forEach((txnFS, i) => {\n\t\t\t\tlet signedTx: ReturnType<typeof signTransaction>;\n\n\t\t\t\tif (txnFS.isMultisig) {\n\t\t\t\t\tif (!txnFS.multisigMeta) {\n\t\t\t\t\t\tthrow new Error('multisig signing required multisigMeta');\n\t\t\t\t\t}\n\t\t\t\t\tsignedTx = signMultisigTransaction(txnGroup[i], txnFS.multisigMeta, account.sk);\n\t\t\t\t} else if (txnFS.isLogicSig) {\n\t\t\t\t\t// TODO\n\t\t\t\t\t// signedTx = signTransaction(txnGroup[i], account.sk); // reference\n\t\t\t\t\tthrow new Error('logic sign signing not yet supported...');\n\t\t\t\t} else {\n\t\t\t\t\t// normal signing\n\t\t\t\t\tsignedTx = signTransaction(txnGroup[i], account.sk);\n\t\t\t\t}\n\n\t\t\t\tsigned.push(signedTx.blob);\n\t\t\t});\n\n\t\t\treturn signed;\n\t\t} else {\n\t\t\tconst txnFS = txnsForSigning[0];\n\t\t\tconst txnUnsignedDecoded = this.decodeBase64UnsignedTransaction(txnFS.txn);\n\t\t\tlet signedTx: ReturnType<typeof signTransaction>;\n\n\t\t\tif (txnFS.isMultisig) {\n\t\t\t\tif (!txnFS.multisigMeta) {\n\t\t\t\t\tthrow new Error('multisig signing required multisigMeta');\n\t\t\t\t}\n\t\t\t\tsignedTx = signMultisigTransaction(txnUnsignedDecoded, txnFS.multisigMeta, account.sk);\n\t\t\t} else if (txnFS.isLogicSig) {\n\t\t\t\t// TODO\n\t\t\t\t// signedTx = signTransaction(txnDecoded, account.sk);\n\t\t\t\tthrow new Error('logic sign signing not yet supported...');\n\t\t\t} else {\n\t\t\t\t// normal signing\n\t\t\t\tsignedTx = signTransaction(txnUnsignedDecoded, account.sk);\n\t\t\t}\n\n\t\t\treturn signedTx.blob;\n\t\t}\n\t},\n\n\t/**\n\t * Used by Inkey to sign base64-encoded transactions sent to the iframe\n\t * @param txns Array of Base64-encoded unsigned transactions\n\t * @param account AlgosdkAccount object with `sk`, that signs the transactions\n\t * @returns Uint8Array signed transactions\n\t */\n\tsignBase64Transactions(txns: string[], account: AlgosdkAccount): Uint8Array[] | Uint8Array {\n\t\tconst decodedTxns: Transaction[] = [];\n\t\ttxns.forEach(txn => {\n\t\t\tconst decodedTxn = this.decodeBase64UnsignedTransaction(txn);\n\t\t\tdecodedTxns.push(decodedTxn);\n\t\t});\n\t\treturn this.signTransactionGroup(decodedTxns, account);\n\t},\n\n\t/**\n\t * Used by Inkey to sign base64-encoded transactions (objects) sent to the iframe\n\t * @param txnsForSigning Array of objects containing a Base64-encoded unsigned transaction + info re how they need to be signed (multisig, logicsig, normal...)\n\t * @param account AlgosdkAccount object with `sk`, that signs the transactions\n\t * @returns Uint8Array signed transactions\n\t */\n\tsignBase64TxnObjects(txnsForSigning: TxnForSigning[], account: AlgosdkAccount): Uint8Array[] | Uint8Array {\n\t\treturn this.signTxnObjectGroup(txnsForSigning, account);\n\t},\n\n\n\n\t/**\n\t * Does what it says on the tin.\n\t * @param txn base64-encoded unsigned transaction\n\t * @returns transaction object\n\t */\n\tdecodeBase64UnsignedTransaction(txn: string): Transaction {\n\t\treturn decodeUnsignedTransaction(Buffer.from(txn, 'base64'));\n\t},\n\n\t/**\n\t * Does what it says on the tin.\n\t * @param txn algorand txn object\n\t * @returns string (like for inkey / base64 transmit use)\n\t */\n\ttxnToStr(txn: algosdk.Transaction): string {\n\t\treturn Buffer.from(txn.toByte()).toString('base64');\n\t},\n\n\t/**\n\t * Describes an Algorand transaction, for display in Inkey\n\t * @param txn Transaction to describe\n\t */\n\ttxnSummary(txn: Transaction): string {\n\t\t// for reference: https://developer.algorand.org/docs/get-details/transactions/transactions/\n\n\t\tif (txn.type) {\n\t\t\tconst to = txn.to ? encodeAddress(txn.to.publicKey) : '';\n\t\t\tconst from = txn.from ? encodeAddress(txn.from.publicKey) : '';\n\n\t\t\t// sending algo\n\t\t\tif (txn.type === 'pay') {\n\t\t\t\tif (txn.amount) {\n\t\t\t\t\treturn `Send ${microalgosToAlgos(txn.amount as number)} ALGO to ${to}`;\n\t\t\t\t} else {\n\t\t\t\t\treturn `Send 0 ALGO to ${to}`;\n\t\t\t\t}\n\n\t\t\t\t// sending assets\n\t\t\t} else if (txn.type === 'axfer') {\n\t\t\t\tif (!txn.amount && to === from) {\n\t\t\t\t\treturn `Opt-in to asset ID ${txn.assetIndex}`;\n\t\t\t\t} else {\n\t\t\t\t\tconst amount = txn.amount ? txn.amount : 0;\n\t\t\t\t\treturn `Transfer ${amount} of asset ID ${txn.assetIndex} to ${to}`;\n\t\t\t\t}\n\n\t\t\t\t// asset config\n\t\t\t\t// this could be creating, destroying, or configuring an asset,\n\t\t\t\t// depending on which fields are set\n\t\t\t} else if (txn.type === 'acfg') {\n\n\t\t\t\t// if unit name is supplied, we are creating\n\t\t\t\tif (txn.assetUnitName) {\n\t\t\t\t\treturn `Create asset ${txn.assetName}, symbol ${txn.assetUnitName}`;\n\t\t\t\t}\n\n\t\t\t\treturn `Configure asset ${txn.assetIndex}`;\n\n\t\t\t\t// asset freeze\n\t\t\t} else if (txn.type === 'afrz') {\n\t\t\t\treturn `Freeze asset ${txn.assetIndex}`;\n\n\t\t\t\t// application call\n\t\t\t} else if (txn.type === 'appl') {\n\t\t\t\t// let's find out what kind of application call this is\n\t\t\t\t// reference: https://developer.algorand.org/docs/get-details/dapps/avm/teal/specification/#oncomplete\n\t\t\t\tswitch (txn.appOnComplete) {\n\t\t\t\t\t// NoOp\n\t\t\t\t\tcase 0:\n\t\t\t\t\t\treturn `Call to application ID ${txn.appIndex}`;\n\n\t\t\t\t\t// OptIn\n\t\t\t\t\tcase 1:\n\t\t\t\t\t\treturn `Opt-in to application ID ${txn.appIndex}`;\n\n\t\t\t\t\t// CloseOut\n\t\t\t\t\tcase 2:\n\t\t\t\t\t\treturn `Close out application ID ${txn.appIndex}`;\n\n\t\t\t\t\t// ClearState\n\t\t\t\t\tcase 3:\n\t\t\t\t\t\treturn `Execute clear state program of application ID ${txn.appIndex}`;\n\n\t\t\t\t\t// Update\n\t\t\t\t\tcase 4:\n\t\t\t\t\t\treturn `Update application ID ${txn.appIndex}`;\n\n\t\t\t\t\t// Delete\n\t\t\t\t\tcase 5:\n\t\t\t\t\t\treturn `Delete application ID ${txn.appIndex}`;\n\n\t\t\t\t\tdefault:\n\t\t\t\t\t\treturn `Call to application ID ${txn.appIndex}`;\n\t\t\t\t}\n\n\t\t\t\t// default case\n\t\t\t} else {\n\t\t\t\treturn `Transaction of type ${txn.type} to ${to}`;\n\t\t\t}\n\t\t} else {\n\t\t\t// no better option\n\t\t\treturn txn.toString();\n\t\t}\n\t}\n};\n\nexport const buffer = Buffer; // sometimes this is helpful on the frontend\n", "import type {\n\tLogicSigAccount,\n\tTransaction,\n\tAccount,\n\tSuggestedParams,\n\tMultisigMetadata,\n} from 'algosdk';\n\n// FYI the line below breaks in some deno envs\nimport type { ApplicationStateSchema } from 'algosdk/dist/types/client/v2/algod/models/types';\n// import type { ApplicationStateSchema } from 'algosdk/dist/types/src/client/v2/algod/models/types';\n\nexport type AlgonautConfig = {\n\tBASE_SERVER: string;\n\tINDEX_SERVER?: string; // optional, but helpful\n\tLEDGER: string;\n\tPORT: string;\n\tAPI_TOKEN: any;\n\tSIGNING_MODE?: 'local' | 'inkey';\n\tINKEY_SRC?: string;\n\tINKEY_ALIGN?: 'center' | 'left' | 'right';\n}\n\nexport interface AlgonautStateData {\n\tkey: string;\n\tvalue: string | number | bigint;\n\taddress: string; // if we can detect an address, we put it here\n}\n\nexport interface AlgonautContractSchema {\n\tlocalInts: number,\n\tlocalBytes: number,\n\tglobalInts: number,\n\tglobalBytes: number,\n}\n\nexport interface AlgonautDeployArguments {\n\ttealApprovalCode: string;\n\ttealClearCode: string;\n\tappArgs: any[];\n\tschema: AlgonautContractSchema;\n\toptionalFields?: AlgonautTransactionFields;\n}\n\nexport interface AlgonautUpdateAppArguments {\n\tappIndex: number;\n\ttealApprovalCode: string;\n\ttealClearCode: string;\n\tappArgs: any[];\n\t//schema: AlgonautContractSchema;\n\toptionalFields?: AlgonautTransactionFields;\n\t//lease: Uint8Array;\n\t//rekeyTo: string;\n}\n\nexport interface AlgonautDeleteAppArguments {\n\toptionalFields?: AlgonautTransactionFields;\n}\n\nexport interface AlgonautLsigDeployArguments extends AlgonautDeployArguments {\n\tlsig: LogicSigAccount;\n\tnoteText?: string;\n}\n\nexport interface AlgonautAppStateEncoded {\n\tkey: string;\n\tvalue: {\n\t\tbytes: string;\n\t\ttype: number;\n\t\tuint: number\n\t}\n}\n\nexport interface AlgonautGetApplicationResponse {\n\tid: number;\n\tparams: {\n\t\t'approval-program': string;\n\t\t'clear-state-program': string;\n\t\tcreator: string;\n\t\textraProgramPages?: number;\n\t\t'global-state'?: AlgonautAppStateEncoded[];\n\t\t'global-state-schema'?: ApplicationStateSchema;\n\t\t'local-state-schema'?: ApplicationStateSchema;\n\t}\n}\n\nexport interface AlgonautAppState {\n\tindex: number;\n\thasState: boolean;\n\tcreatorAddress: string;\n\tglobals: AlgonautStateData[];\n\tlocals: AlgonautStateData[];\n}\n\nexport interface AlgonautCallAppArguments {\n\tappIndex: number;\n\tappArgs: any[];\n\toptionalFields?: AlgonautTransactionFields;\n}\n\nexport interface AlgonautLsigCallAppArguments extends AlgonautCallAppArguments {\n\tlsig: LogicSigAccount;\n}\n\nexport interface AlgonautCreateAssetArguments {\n\tassetName: string;\n\tsymbol: string;\n\tmetaBlock: string;\n\tdecimals: number;\n\tamount: number;\n\tassetURL?: string;\n\tdefaultFrozen?: boolean;\n\tassetMetadataHash?: string;\n\tclawback?: string;\n\tmanager?: string;\n\treserve?: string;\n\tfreeze?: string;\n\trekeyTo?: string;\n\toptionalFields?: AlgonautTransactionFields;\n}\n\nexport interface AlgonautDestroyAssetArguments {\n\trekeyTo?: string;\n\toptionalFields?: AlgonautTransactionFields;\n}\n\nexport interface AlgonautSendAssetArguments {\n\tto: string;\n\tfrom?: string;\n\tassetIndex: number;\n\tamount: number | bigint;\n\toptionalFields?: AlgonautTransactionFields;\n}\n\nexport interface AlgonautLsigSendAssetArguments extends AlgonautSendAssetArguments {\n\tlsig: LogicSigAccount;\n}\n\nexport interface AlgonautPaymentArguments {\n\tamount: number | bigint;\n\tto: string;\n\tfrom?: string;\n\toptionalFields?: AlgonautTransactionFields;\n}\n\nexport interface AlgonautLsigPaymentArguments extends AlgonautPaymentArguments {\n\tlsig: LogicSigAccount;\n}\n\nexport interface AlgonautTxnCallbacks {\n\tonSign(payload: any): void;\n\tonSend(payload: any): void;\n\tonConfirm(payload: any): void;\n}\n\nexport type AlgonautError = {\n\tmessage: string;\n\trawError?: any;\n}\n\nexport type AlgonautTransactionStatus = {\n\tstatus: 'success' | 'fail' | 'rejected';\n\tmessage: string;\n\tindex?: number;\n\ttxId: string;\n\terror?: Error;\n\tmeta?: any;\n\tcreatedIndex?: number; // implement this for created apps and assets\n}\n\nexport type AlgonautWallet = {\n\taddress: string;\n\tmnemonic: string;\n}\n\nexport type AlgonautTransactionFields = {\n\taccounts?: string[],\n\tapplications?: number[],\n\tassets?: number[],\n\treKeyTo?: string,\n\tnote?: string,\n\tcloseRemainderTo?: string,\n\tmanager?: string,\n\tfreeze?: string,\n\tclawback?: string,\n\treserve?: string;\n\tsuggestedParams?: SuggestedParams;\n}\n\nexport type AlgonautAtomicTransaction = {\n\ttransaction: Transaction;\n\ttransactionSigner: undefined | Account | LogicSigAccount; // undefined means theres not enough info to tell, like when a .from field is in params\n\tisLogigSig: boolean;\n}\n\nexport type InkeySignTxnResponse = {\n\tsuccess: boolean;\n\treject?: boolean;\n\terror?: any;\n\tsignedTxns?: Uint8Array[] | Uint8Array;\n}\n\nexport type TxnForSigning = {\n\ttxn: string; // base64 encoded transaction\n\ttxnDecoded?: Transaction;\n\tisLogicSig?: boolean;\n\tisMultisig?: boolean;\n\tmultisigMeta?: MultisigMetadata;\n}", "var __defProp = Object.defineProperty;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __name = (target, value) => __defProp(target, \"name\", { value, configurable: true });\nvar __publicField = (obj, key, value) => {\n  __defNormalProp(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\n\n// src/state/index.ts\nimport { computed as computed2, reactive as reactive2, readonly as readonly2 } from \"@vue/reactivity\";\nimport { watch as watch2 } from \"@vue-reactivity/watch\";\nimport { watch as watch3 } from \"@vue-reactivity/watch\";\n\n// src/state/watchers.ts\nimport { watch } from \"@vue-reactivity/watch\";\nvar lsKey = \"AnyWallet\";\nvar startWatchers = /* @__PURE__ */ __name(() => {\n  if (!isBrowser()) {\n    console.warn(\"not in browser...\");\n    return;\n  }\n  const initLocalStorage = /* @__PURE__ */ __name(() => {\n    let onLoadLStor = localStorage.getItem(lsKey);\n    if (onLoadLStor) {\n      try {\n        let onLoadLStorObj = JSON.parse(onLoadLStor);\n        AnyWalletState.stored = onLoadLStorObj;\n      } catch (e) {\n        console.warn(\"bad sLocalStorage parse\");\n      }\n    }\n  }, \"initLocalStorage\");\n  initLocalStorage();\n  watch(\n    () => AnyWalletState.stored,\n    () => {\n      localStorage.setItem(lsKey, JSON.stringify(AnyWalletState.stored));\n    },\n    {\n      deep: true\n    }\n  );\n}, \"startWatchers\");\n\n// src/wallets/actions.ts\nimport { computed, reactive, readonly } from \"@vue/reactivity\";\n\n// src/clients/base/base.ts\nvar BaseClient = class {\n  constructor(params) {\n    console.log(\"params\", params);\n  }\n  // globals. accessible to all clients. helpful for setters\n  setAsActiveAccount() {\n    console.log(\"setAsActiveAccount - TODO\");\n  }\n};\n__name(BaseClient, \"BaseClient\");\n// statics\n__publicField(BaseClient, \"metadata\");\n__publicField(BaseClient, \"init\");\n\n// src/algod/index.ts\nvar getAlgosdk = /* @__PURE__ */ __name(async () => {\n  try {\n    if (typeof window !== \"undefined\") {\n      const buff = await import(\"buffer\");\n      console.log(\"buff (dynamic import)\", buff);\n      window.Buffer = buff.default.Buffer;\n    }\n    return (await import(\"algosdk\")).default;\n  } catch (e) {\n    console.warn(e);\n    throw new Error(\"err w dynamic algosdk/buffer imports\");\n  }\n}, \"getAlgosdk\");\n\n// src/clients/pera/constants.ts\nvar ICON = \"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz48c3ZnIGlkPSJMYXllcl8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxNzcgMTg3Ij48cmVjdCB4PSItMTEuMzgiIHk9Ii0yNS45NyIgd2lkdGg9IjIwMC4wMiIgaGVpZ2h0PSIyMzEuNTMiIHN0eWxlPSJmaWxsOiNmZTU7Ii8+PHBhdGggZD0iTTk0LjA1LDU5LjYxYzIuMDUsOC40OCwxLjM2LDE1Ljk0LTEuNTUsMTYuNjYtMi45LC43Mi02LjkxLTUuNTctOC45Ni0xNC4wNS0yLjA1LTguNDgtMS4zNi0xNS45NCwxLjU1LTE2LjY2LDIuOS0uNzIsNi45MSw1LjU3LDguOTYsMTQuMDVaIiBzdHlsZT0iZmlsbDojMWMxYzFjOyIvPjxwYXRoIGQ9Ik0xMjcuODUsNjYuOWMtNC41My00LjgxLTEzLjU1LTMuNS0yMC4xNSwyLjkxLTYuNTksNi40MS04LjI2LDE1LjUtMy43MywyMC4zMSw0LjUzLDQuOCwxMy41NSwzLjUsMjAuMTUtMi45MXM4LjI2LTE1LjUsMy43My0yMC4zMVoiIHN0eWxlPSJmaWxsOiMxYzFjMWM7Ii8+PHBhdGggZD0iTTkxLjc5LDE0MC40N2MyLjktLjcyLDMuNDktOC42LDEuMzItMTcuNjEtMi4xNy05LTYuMjktMTUuNzEtOS4xOS0xNC45OS0yLjksLjcyLTMuNDksOC42LTEuMzIsMTcuNjEsMi4xNyw5LDYuMjksMTUuNzEsOS4xOSwxNC45OVoiIHN0eWxlPSJmaWxsOiMxYzFjMWM7Ii8+PHBhdGggZD0iTTYyLjIyLDcxLjNjOC4zNywyLjQ3LDE0LjQ4LDYuOCwxMy42Niw5LjY3LS44MywyLjg3LTguMjgsMy4yLTE2LjY1LC43My04LjM3LTIuNDctMTQuNDgtNi44LTEzLjY2LTkuNjcsLjgzLTIuODcsOC4yOC0zLjIsMTYuNjUtLjczWiIgc3R5bGU9ImZpbGw6IzFjMWMxYzsiLz48cGF0aCBkPSJNMTE2LjU0LDEwMy43NGM4Ljg4LDIuNjIsMTUuNDEsNy4wNywxNC41OSw5Ljk0LS44MywyLjg3LTguNywzLjA4LTE3LjU4LC40Ni04Ljg4LTIuNjItMTUuNDEtNy4wNy0xNC41OS05Ljk0LC44My0yLjg3LDguNy0zLjA4LDE3LjU4LS40NloiIHN0eWxlPSJmaWxsOiMxYzFjMWM7Ii8+PHBhdGggZD0iTTcxLjY0LDk3LjcxYy0yLjA4LTIuMTUtOC44OCwuOTgtMTUuMiw2Ljk5LTYuMzIsNi4wMS05Ljc2LDEyLjYzLTcuNjksMTQuNzgsMi4wOCwyLjE1LDguODgtLjk4LDE1LjItNi45OSw2LjMyLTYuMDEsOS43Ni0xMi42Myw3LjY5LTE0Ljc4WiIgc3R5bGU9ImZpbGw6IzFjMWMxYzsiLz48L3N2Zz4=\";\nvar METADATA = {\n  id: \"pera\" /* PERA */,\n  chain: \"algorand\",\n  name: \"Pera\",\n  icon: ICON\n};\n\n// src/clients/pera/client.ts\nimport { markRaw } from \"@vue/reactivity\";\nvar _PeraClient = class extends BaseClient {\n  sdk;\n  constructor({\n    sdk: clientSdk\n    // inited\n  }) {\n    super();\n    this.sdk = clientSdk;\n  }\n  static async init(initParams) {\n    console.log(`[${METADATA.id}] init started`);\n    try {\n      if (typeof window !== \"undefined\") {\n        window.global = window;\n      } else {\n        console.warn(\"Using a browser lib not in a browser...\");\n      }\n      let clientSdk;\n      if (initParams && initParams.sdk) {\n        clientSdk = initParams.sdk;\n      } else {\n        let sdkConfig;\n        const defaultConfig = {\n          shouldShowSignTxnToast: false\n        };\n        sdkConfig = initParams?.config || defaultConfig;\n        let sdkLib = await import(\"@perawallet/connect\");\n        let createClientSdk = sdkLib.PeraWalletConnect || sdkLib.default.PeraWalletConnect;\n        clientSdk = new createClientSdk(sdkConfig);\n      }\n      clientSdk = markRaw(clientSdk);\n      return new _PeraClient({\n        sdk: clientSdk\n      });\n    } catch (e) {\n      console.error(`[${METADATA.id}] Error initializing...`, e);\n      return null;\n    }\n  }\n  async connect(onDisconnect) {\n    console.log(`[${METADATA.id}] connect (in class)`);\n    const accounts = await this.sdk.connect();\n    this.sdk.connector?.on(\"disconnect\", onDisconnect);\n    if (accounts.length === 0) {\n      throw new Error(`No accounts found for ${METADATA.id}`);\n    }\n    const mappedAccounts = accounts.map((address, index) => ({\n      name: `Pera Wallet ${index + 1}`,\n      address,\n      providerId: METADATA.id\n    }));\n    addConnectedAccounts(mappedAccounts);\n    setAsActiveAccount(mappedAccounts[0]);\n    return {\n      ...METADATA,\n      accounts: mappedAccounts\n    };\n  }\n  async reconnect(onDisconnect) {\n    const accounts = await this.sdk.reconnectSession().catch(console.info);\n    this.sdk.connector?.on(\"disconnect\", onDisconnect);\n    if (!accounts) {\n      return null;\n    }\n    return {\n      ...METADATA,\n      accounts: accounts.map((address, index) => ({\n        name: `Pera Wallet ${index + 1}`,\n        address,\n        providerId: METADATA.id\n      }))\n    };\n  }\n  async disconnect() {\n    await this.sdk.disconnect();\n  }\n  async signTransactions(connectedAccounts, transactions) {\n    const algosdk = await getAlgosdk();\n    console.log(\"getting algosdk... TODO optimize this!\");\n    const decodedTxns = transactions.map((txn) => {\n      return algosdk.decodeObj(txn);\n    });\n    const txnsToSign = decodedTxns.reduce((acc, txn, i) => {\n      if (!(\"txn\" in txn) && connectedAccounts.includes(algosdk.encodeAddress(txn[\"snd\"]))) {\n        acc.push({\n          txn: algosdk.decodeUnsignedTransaction(transactions[i])\n        });\n      } else {\n        acc.push({\n          txn: algosdk.decodeSignedTransaction(transactions[i]).txn,\n          signers: []\n        });\n      }\n      return acc;\n    }, []);\n    const result = await this.sdk.signTransaction([txnsToSign]);\n    const signedTxns = decodedTxns.reduce((acc, txn, i) => {\n      if (!(\"txn\" in txn)) {\n        const signedByUser = result.shift();\n        signedByUser && acc.push(signedByUser);\n      } else {\n        acc.push(transactions[i]);\n      }\n      return acc;\n    }, []);\n    return signedTxns;\n  }\n};\nvar PeraClient = _PeraClient;\n__name(PeraClient, \"PeraClient\");\n__publicField(PeraClient, \"metadata\", METADATA);\nvar client_default = PeraClient;\n\n// src/clients/inkey/constants.ts\nvar ICON3 = \"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPCEtLSBHZW5lcmF0b3I6IEFkb2JlIElsbHVzdHJhdG9yIDI0LjIuMCwgU1ZHIEV4cG9ydCBQbHVnLUluIC4gU1ZHIFZlcnNpb246IDYuMDAgQnVpbGQgMCkgIC0tPgo8c3ZnIHZlcnNpb249IjEuMSIgaWQ9IkxheWVyXzEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4IgoJIHZpZXdCb3g9IjAgMCA2MDAgNjAwIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA2MDAgNjAwOyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+CjxzdHlsZSB0eXBlPSJ0ZXh0L2NzcyI+Cgkuc3Qwe2ZpbGw6IzE5MTkxOTt9Cgkuc3Qxe2ZpbGw6I0ZGRkZGRjt9Cjwvc3R5bGU+CjxnPgoJPHBhdGggY2xhc3M9InN0MCIgZD0iTTQ2MCwwSDE0MEM2Mi43LDAsMCw2Mi43LDAsMTQwdjMyMGMwLDc3LjMsNjIuNywxNDAsMTQwLDE0MGg0Ny45TDMwMCw0ODcuOUw0MTIuMSw2MDBINDYwCgkJYzc3LjMsMCwxNDAtNjIuNywxNDAtMTQwVjE0MEM2MDAsNjIuNyw1MzcuMywwLDQ2MCwweiIvPgo8L2c+CjxnPgoJPHBhdGggY2xhc3M9InN0MSIgZD0iTTc3LjEsMjM0Ljl2MTE0LjZINDEuNlYyMzQuOUg3Ny4xeiIvPgoJPHBhdGggY2xhc3M9InN0MSIgZD0iTTIwNi4yLDIzNC45djExNC42aC0zOC45bC0zMS4zLTU2LjhsLTcuMy0xNS41aC0wLjNsMC43LDIyLjZ2NDkuN0g5OC4yVjIzNC45SDEzN2wzMS4zLDU2LjhsNy41LDE1LjVoMC4yCgkJbC0wLjctMjIuNnYtNDkuN0gyMDYuMnoiLz4KCTxwb2x5Z29uIGNsYXNzPSJzdDEiIHBvaW50cz0iMjk5LDM0OS41IDMzOS4xLDM0OS41IDI5OS41LDI4MC45IDMzNi4zLDIzNC45IDI5Ny45LDIzNC45IDI2Mi44LDI4MS43IDI2Mi44LDIzNC45IDIyNy40LDIzNC45IAoJCTIyNy40LDM0OS41IDI2Mi44LDM0OS41IDI2Mi44LDMxOC42IDI3NC41LDMwMy41IAkiLz4KCTxwYXRoIGNsYXNzPSJzdDEiIGQ9Ik0zNTAsMzQ5LjVWMjM0LjloOTIuNHYyNi42aC01Ni45VjI4MGg0NS41djI0LjdoLTQ1LjV2MTguMmg1OS4ydjI2LjZIMzUweiIvPgoJPHBhdGggY2xhc3M9InN0MSIgZD0iTTU2NiwyMzQuOWwtNDAuMSw3NHY0MC42aC0zNS42di00MC42bC00MC4zLTc0SDQ4NmwxMy45LDI4LjZsOC41LDIwbDguMy0yMGwxNC4xLTI4LjZINTY2eiIvPgo8L2c+Cjwvc3ZnPgo=\";\nvar METADATA2 = {\n  id: \"inkey\" /* INKEY */,\n  chain: \"algorand\",\n  name: \"Inkey Microwallet\",\n  icon: ICON3\n};\n\n// src/clients/inkey/client.ts\nimport msgpack from \"@randlabs/msgpack-bigint\";\nvar arrayBufferToBase64 = /* @__PURE__ */ __name((buffer) => {\n  if (typeof window == void 0) {\n    throw new Error(\"[inkey] cannot access window\");\n  }\n  var binary = \"\";\n  var bytes = new Uint8Array(buffer);\n  var len = bytes.byteLength;\n  for (var i = 0; i < len; i++) {\n    binary += String.fromCharCode(bytes[i]);\n  }\n  return window.btoa(binary);\n}, \"arrayBufferToBase64\");\nvar _InkeyClient = class extends BaseClient {\n  sdk;\n  constructor({\n    sdk: clientSdk\n  }) {\n    super();\n    this.sdk = clientSdk;\n  }\n  static async init(initParams) {\n    try {\n      console.log(\"[inkey] init started\");\n      let clientSdk;\n      if (initParams && initParams.sdk) {\n        clientSdk = initParams.sdk;\n      } else {\n        let clientOptions;\n        const defaultInkeyConfig = {\n          src: \"https://inkey-staging.web.app\",\n          //\n          align: \"center\"\n        };\n        clientOptions = initParams?.config || defaultInkeyConfig;\n        console.log(\"now load up the sdk\");\n        let inkeyLib = await import(\"@thencc/inkey-client-js\");\n        let createClientSdk = inkeyLib.createClient;\n        console.log(\"createClientSdk\", createClientSdk);\n        clientSdk = await createClientSdk(clientOptions);\n      }\n      return new _InkeyClient({\n        sdk: clientSdk\n      });\n    } catch (e) {\n      console.warn(`[${METADATA2.id}] Error initializing...`, e);\n      return null;\n    }\n  }\n  async connect() {\n    console.log(\"doConnect\");\n    const inkeyAccounts = await this.sdk.connect();\n    if (!inkeyAccounts) {\n      throw new Error(\"no inkeyAccounts\");\n    }\n    const accounts = inkeyAccounts.map((a) => {\n      return {\n        address: a.address,\n        name: a.username\n      };\n    });\n    if (accounts.length === 0) {\n      throw new Error(\n        `No accounts found for ${METADATA2.id}`\n      );\n    }\n    const mappedAccounts = accounts.map((account) => ({\n      ...account,\n      providerId: METADATA2.id\n    }));\n    addConnectedAccounts(mappedAccounts);\n    setAsActiveAccount(mappedAccounts[0]);\n    return {\n      ...METADATA2,\n      accounts: mappedAccounts\n    };\n  }\n  // TODO implement reconnect\n  async reconnect() {\n    return null;\n  }\n  async disconnect() {\n    try {\n      await this.sdk.disconnect();\n    } catch (e) {\n      console.warn(e.message);\n    }\n    return;\n  }\n  async signTransactions(connectedAccounts, transactions) {\n    const decodedTxns = transactions.map((txn) => {\n      return msgpack.decode(txn);\n    });\n    console.log(\"decodedTxns\", decodedTxns);\n    const algosdk = await getAlgosdk();\n    console.log(\"getting algosdk... TODO optimize this!\");\n    const txnsToSign = decodedTxns.reduce((acc, txn, i) => {\n      console.log(\"readout txnsToSign:\", {\n        acc,\n        txn,\n        i\n      });\n      if (!(\"txn\" in txn) && // connectedAccounts.includes(this.algosdk.encodeAddress(txn['snd']))\n      connectedAccounts.includes(algosdk.encodeAddress(txn[\"snd\"]))) {\n        acc.push(transactions[i]);\n      }\n      return acc;\n    }, []);\n    const txnsAsStrB64 = txnsToSign.map((tBuff) => arrayBufferToBase64(tBuff));\n    const result = await this.sdk.signTxns(txnsAsStrB64);\n    console.log(\"result\", result);\n    if (!result.success) {\n      throw new Error(\"did not sign txns\");\n    }\n    const returnedTxns = [result.signedTxns];\n    console.log(\"returnedTxns\", returnedTxns);\n    const signedTxns = decodedTxns.reduce((acc, txn, i) => {\n      if (!(\"txn\" in txn)) {\n        const signedByUser = returnedTxns.shift();\n        signedByUser && acc.push(signedByUser);\n      } else {\n        acc.push(transactions[i]);\n      }\n      return acc;\n    }, []);\n    return signedTxns;\n  }\n};\nvar InkeyClient = _InkeyClient;\n__name(InkeyClient, \"InkeyClient\");\n__publicField(InkeyClient, \"metadata\", METADATA2);\n\n// src/clients/myalgo/constants.ts\nvar ICON5 = \"data:image/svg+xml;base64,PHN2ZyB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHZpZXdCb3g9IjAgMCAzMiAzMiI+CiAgPHBhdGggZmlsbD0iIzI0NUVDNiIgZD0iTTE2LDMyYy0zLjIsMC02LjItMC45LTguOS0yLjdjLTIuNi0xLjgtNC43LTQuMy01LjktNy4yQzAsMTkuMi0wLjMsMTYsMC4zLDEyLjlDMC45LDkuOCwyLjQsNyw0LjcsNC43IEM2LjIsMy4yLDcuOSwyLDkuOSwxLjJDMTEuOCwwLjQsMTMuOSwwLDE2LDBzNC4yLDAuNCw2LjEsMS4yYzEuOSwwLjgsMy43LDIsNS4yLDMuNXMyLjcsMy4zLDMuNSw1LjJjMC44LDEuOSwxLjIsNCwxLjIsNi4xIHMtMC40LDQuMi0xLjIsNi4xYy0wLjgsMS45LTIsMy43LTMuNSw1LjJjLTEuNSwxLjUtMy4yLDIuNy01LjIsMy41QzIwLjIsMzEuNiwxOC4xLDMyLDE2LDMyTDE2LDMyeiBNMjAuMiwxMS4ybDAuMSwwLjVsMi42LDkuNWgyLjEgTDIxLjUsOC45bC0wLjEtMC4zaC0xLjlsMCwwLjFsLTEuNywzLjFMMTYsMTQuOWwwLDAuMWwwLTAuMWwtMC4yLTAuOGwtMC42LTIuNGwtMC4xLTAuMmwtMC43LTIuNmwtMC4xLTAuM2gtMS45bDAsMC4xbC0xLjcsMy4xIGwtMS44LDMuMkw3LjEsMThsLTEuOCwzLjJoMi4xTDkuMiwxOGwxLjgtMy4ybDEuOC0zLjJsMC4zLTAuNWwwLjEsMC41bDAuNSwyLjFsMC43LDIuNmwwLjIsMC45TDE0LjIsMThsLTEuOCwzLjJoMi4xbDAuOC0xLjMgbDEuMy0yLjNsMS41LTIuN2wxLjgtMy4yTDIwLjIsMTEuMkwyMC4yLDExLjJ6Ii8+Cjwvc3ZnPgo=\";\nvar METADATA3 = {\n  id: \"myalgo\" /* MYALGO */,\n  chain: \"algorand\",\n  name: \"MyAlgo\",\n  icon: ICON5\n};\n\n// src/clients/myalgo/client.ts\nimport { markRaw as markRaw2 } from \"@vue/reactivity\";\nvar _MyAlgoClient = class extends BaseClient {\n  sdk;\n  constructor({\n    sdk: clientSdk\n    // inited\n  }) {\n    super();\n    this.sdk = clientSdk;\n  }\n  static async init(initParams) {\n    console.log(`[${METADATA3.id}] init started`);\n    try {\n      let clientSdk;\n      if (initParams && initParams.sdk) {\n        clientSdk = initParams.sdk;\n      } else {\n        let sdkConfig;\n        const defaultConfig = {\n          disableLedgerNano: false\n        };\n        sdkConfig = initParams?.config || defaultConfig;\n        let sdkLib = await import(\"@randlabs/myalgo-connect\");\n        let createClientSdk = sdkLib.default;\n        console.log(\"createClientSdk\", createClientSdk);\n        clientSdk = new createClientSdk(sdkConfig);\n      }\n      clientSdk = markRaw2(clientSdk);\n      return new _MyAlgoClient({\n        sdk: clientSdk\n      });\n    } catch (e) {\n      console.error(`[${METADATA3.id}] Error initializing...`, e);\n      return null;\n    }\n  }\n  async connect() {\n    const accounts = await this.sdk.connect();\n    if (accounts.length === 0) {\n      throw new Error(\n        `No accounts found for ${METADATA3.id}`\n      );\n    }\n    const mappedAccounts = accounts.map((account) => ({\n      ...account,\n      providerId: METADATA3.id\n    }));\n    addConnectedAccounts(mappedAccounts);\n    setAsActiveAccount(mappedAccounts[0]);\n    return {\n      ...METADATA3,\n      accounts: mappedAccounts\n    };\n  }\n  async reconnect() {\n    return null;\n  }\n  async disconnect() {\n    return;\n  }\n  async signTransactions(connectedAccounts, transactions) {\n    const algosdk = await getAlgosdk();\n    console.log(\"getting algosdk... TODO optimize this!\");\n    const decodedTxns = transactions.map((txn) => {\n      return algosdk.decodeObj(txn);\n    });\n    const txnsToSign = decodedTxns.reduce((acc, txn, i) => {\n      if (!(\"txn\" in txn) && connectedAccounts.includes(algosdk.encodeAddress(txn[\"snd\"]))) {\n        acc.push(transactions[i]);\n      }\n      return acc;\n    }, []);\n    const result = await this.sdk.signTransaction(txnsToSign);\n    const signedTxns = decodedTxns.reduce((acc, txn, i) => {\n      if (!(\"txn\" in txn)) {\n        const signedByUser = result.shift()?.blob;\n        signedByUser && acc.push(signedByUser);\n      } else {\n        acc.push(transactions[i]);\n      }\n      return acc;\n    }, []);\n    return signedTxns;\n  }\n};\nvar MyAlgoClient = _MyAlgoClient;\n__name(MyAlgoClient, \"MyAlgoClient\");\n__publicField(MyAlgoClient, \"metadata\", METADATA3);\n\n// src/clients/algosigner/client.ts\nimport { Buffer as Buffer2 } from \"buffer\";\n\n// src/clients/algosigner/constants.ts\nvar ICON7 = \"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjM4IiBoZWlnaHQ9IjIzOCIgdmlld0JveD0iMCAwIDIzOCAyMzgiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxwYXRoIGQ9Ik01MS43MDUgMTQ1LjA0MkgxMTYuNzA1TDEwNy43MDUgMTU1LjA0Mkg1MS43MDVWMTQ1LjA0MloiIGZpbGw9IiNENjQ1MDAiLz4KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik0xNDcuNTE5IDE5MS41NTdMMTI5LjU3NyAxNDQuMzk0TDE0Mi40MDQgMTI3LjExMkwxNjcuODc1IDE5MS41NTdIMTQ3LjUxOVpNMTEwLjkzNiA5NS4zOTMyTDEyMC42MTMgMTIwLjgzMUwxMzMuMzU5IDEwNC4yMjhMMTE3LjQ3NSA2NC4wNDIyQzExNS45MjggNjAuMTI4IDExMi4xNDYgNTcuNTU2NSAxMDcuOTM4IDU3LjU1NjVDMTAzLjcyOSA1Ny41NTY1IDk5Ljk0NzQgNjAuMTI4IDk4LjQwMDMgNjQuMDQyMkw2Ny45NjU5IDE0MS4wNDJIODcuNzgwN0M5NS40MTUzIDEyMS4wMTEgMTAyLjg5MyAxMDEuMzk5IDEwNS4xOTggOTUuMzU0MUMxMDUuNjQxIDk0LjE5MTIgMTA2Ljc0MyA5My40NTk5IDEwNy45ODcgOTMuNDU5OUgxMDguMTMyQzEwOS4zNzggOTMuNDU5OSAxMTAuNDkzIDk0LjIyOTMgMTEwLjkzNiA5NS4zOTMyWk04MC45MjEgMTU5LjA0MkM3NC45Mjg5IDE3NC43NjggNjkuODY2MSAxODguMDYzIDY4LjU0NDcgMTkxLjU1N0g0OEw2MC44NTE0IDE1OS4wNDJIODAuOTIxWiIgZmlsbD0iIzIyMkI2MCIvPgo8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTE3Ni4wMjYgNTQuNzUwOUMxNzcuOTk3IDUyLjA4NzIgMTgxLjc1NCA1MS41MjU3IDE4NC40MTggNTMuNDk2N0MxODcuMDgyIDU1LjQ2NzggMTg3LjY0MyA1OS4yMjUxIDE4NS42NzIgNjEuODg4OEwxMzAuMDEzIDEzNy4xMDdDMTI5LjcxNCAxMzcuNTEyIDEyOS4zNDEgMTM3Ljg1NyAxMjguOTEzIDEzOC4xMjNMMTE3Ljg1NiAxNDUuMDEzQzExNy4wODcgMTQ1LjQ5MyAxMTYuMTI4IDE0NC43ODMgMTE2LjM2MSAxNDMuOTA3TDExOS43MTggMTMxLjMxOEMxMTkuODQ3IDEzMC44MzIgMTIwLjA2OCAxMzAuMzc0IDEyMC4zNjcgMTI5Ljk3TDE3MC42NyA2MS45ODlMMTY5LjkyOSA2MS40NDA1QzE2OS40ODUgNjEuMTEyIDE2OC44NTkgNjEuMjA1NiAxNjguNTMgNjEuNjQ5NkwxNTIuMzExIDgzLjU2ODhDMTUyLjU4NiA4NC4yMDIzIDE1Mi41MjQgODQuOTYxMiAxNTIuMDg0IDg1LjU1NjJMMTQ5LjExIDg5LjU3NTVDMTQ4LjQ1MyA5MC40NjM0IDE0Ny4yMDEgOTAuNjUwNiAxNDYuMzEzIDg5Ljk5MzZDMTQ1LjQyNSA4OS4zMzY2IDE0NS4yMzggODguMDg0MSAxNDUuODk1IDg3LjE5NjJMMTQ3LjY3OSA4NC43ODQ3TDE0OC44NjkgODMuMTc2OUwxNjcuMzA4IDU4LjI1NzRDMTY4LjYyMiA1Ni40ODE1IDE3MS4xMjcgNTYuMTA3MiAxNzIuOTAzIDU3LjQyMTJMMTczLjY0NCA1Ny45Njk3TDE3Ni4wMjYgNTQuNzUwOVoiIGZpbGw9IiNENjQ1MDAiLz4KPC9zdmc+Cg==\";\nvar METADATA4 = {\n  id: \"algosigner\" /* ALGOSIGNER */,\n  chain: \"algorand\",\n  name: \"AlgoSigner\",\n  icon: ICON7\n};\n\n// src/clients/algosigner/client.ts\nvar getNetwork = /* @__PURE__ */ __name((network) => {\n  if (network === \"betanet\") {\n    return \"BetaNet\";\n  }\n  if (network === \"testnet\") {\n    return \"TestNet\";\n  }\n  if (network === \"mainnet\") {\n    return \"MainNet\";\n  }\n  return network;\n}, \"getNetwork\");\nvar _AlgoSignerClient = class extends BaseClient {\n  sdk;\n  network;\n  constructor({\n    sdk: clientSdk,\n    network\n  }) {\n    super();\n    this.sdk = clientSdk;\n    this.network = network;\n  }\n  static async init(initParams) {\n    console.log(`[${METADATA4.id}] init started`);\n    try {\n      if (typeof window == \"undefined\" || window.AlgoSigner === void 0) {\n        throw new Error(\"AlgoSigner is not available.\");\n      }\n      const clientSdk = window.AlgoSigner;\n      let network = \"mainnet\";\n      if (initParams?.config?.network) {\n        if (initParams.config.network == \"mainnet\" || initParams.config.network == \"testnet\" || initParams.config.network == \"betanet\") {\n          network = initParams.config.network;\n        } else {\n          console.warn(`invalid network in ${METADATA4.id} config`);\n        }\n      }\n      return new _AlgoSignerClient({\n        sdk: clientSdk,\n        network\n      });\n    } catch (e) {\n      console.error(\"Error initializing...\", e);\n      return null;\n    }\n  }\n  async connect() {\n    await this.sdk.connect();\n    const accounts = await this.sdk.accounts({\n      ledger: getNetwork(this.network)\n    });\n    if (accounts.length === 0) {\n      throw new Error(`No accounts found for ${METADATA4.id}`);\n    }\n    const mappedAccounts = accounts.map(({ address }, index) => ({\n      name: `AlgoSigner ${index + 1}`,\n      address,\n      providerId: METADATA4.id\n    }));\n    addConnectedAccounts(mappedAccounts);\n    setAsActiveAccount(mappedAccounts[0]);\n    return {\n      ...METADATA4,\n      accounts: mappedAccounts\n    };\n  }\n  async reconnect(onDisconnect) {\n    if (window === void 0 || window.AlgoSigner === void 0) {\n      onDisconnect();\n    }\n    return null;\n  }\n  async disconnect() {\n    return;\n  }\n  async signTransactions(connectedAccounts, transactions) {\n    const algosdk = await getAlgosdk();\n    console.log(\"getting algosdk... TODO optimize this!\");\n    const decodedTxns = transactions.map((txn) => {\n      return algosdk.decodeObj(txn);\n    });\n    const txnsToSign = decodedTxns.reduce(\n      (acc, txn, i) => {\n        const txnObj = {\n          txn: this.sdk.encoding.msgpackToBase64(transactions[i])\n        };\n        if (\"txn\" in txn || !connectedAccounts.includes(algosdk.encodeAddress(txn[\"snd\"]))) {\n          txnObj.txn = this.sdk.encoding.msgpackToBase64(\n            algosdk.decodeSignedTransaction(transactions[i]).txn.toByte()\n          );\n          txnObj.signers = [];\n        }\n        acc.push(txnObj);\n        return acc;\n      },\n      []\n    );\n    const result = await this.sdk.signTxn(txnsToSign);\n    const signedTxns = result.reduce((acc, txn, i) => {\n      if (txn) {\n        acc.push(new Uint8Array(Buffer2.from(txn.blob, \"base64\")));\n      } else {\n        acc.push(transactions[i]);\n      }\n      return acc;\n    }, []);\n    return signedTxns;\n  }\n};\nvar AlgoSignerClient = _AlgoSignerClient;\n__name(AlgoSignerClient, \"AlgoSignerClient\");\n__publicField(AlgoSignerClient, \"metadata\", METADATA4);\n\n// src/clients/exodus/constants.ts\nvar ICON8 = \"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPCEtLSBHZW5lcmF0b3I6IEFkb2JlIElsbHVzdHJhdG9yIDI2LjUuMCwgU1ZHIEV4cG9ydCBQbHVnLUluIC4gU1ZHIFZlcnNpb246IDYuMDAgQnVpbGQgMCkgIC0tPgo8c3ZnIHZlcnNpb249IjEuMSIgaWQ9IkxheWVyXzEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4IgoJIHZpZXdCb3g9IjAgMCAzMDAgMzAwIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCAzMDAgMzAwOyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+CjxzdHlsZSB0eXBlPSJ0ZXh0L2NzcyI+Cgkuc3Qwe2ZpbGw6dXJsKCNTVkdJRF8xXyk7fQoJLnN0MXtmaWxsOnVybCgjU1ZHSURfMDAwMDAwNDM0MjYxNjcxNDAxMDY1ODIyNzAwMDAwMDIxMzA3Njg5MDYwNzMxMTM0ODRfKTt9Cgkuc3Qye2ZpbGw6dXJsKCNTVkdJRF8wMDAwMDEwMjUxOTMxNjAxNTI3NjU4MTY0MDAwMDAxNjI3NDExMjM4MzE3NTY0MTc1OV8pO2ZpbHRlcjp1cmwoI0Fkb2JlX09wYWNpdHlNYXNrRmlsdGVyKTt9Cgkuc3Qze2ZpbGw6dXJsKCNTVkdJRF8wMDAwMDEzODU2MzM4MjQ2MjA4NjAyMDM1MDAwMDAxNDg3ODQ5MDI3MDc4MjA3MTIwN18pO30KCS5zdDR7bWFzazp1cmwoI21hc2swXzE2NjFfMjk1XzAwMDAwMDg4MTMyMjUxNTk3NDQxNTczNDkwMDAwMDExNjkzNjEyMDE4NTA2NjgxNDgxXyk7fQoJLnN0NXtmaWxsOnVybCgjU1ZHSURfMDAwMDAxMDYxMjA2MzI0NjE3OTI4NzExNjAwMDAwMDc0MzM5MTMwMzgzMzc3NjY1NzZfKTt9Cjwvc3R5bGU+CjxnPgoJCgkJPGxpbmVhckdyYWRpZW50IGlkPSJTVkdJRF8xXyIgZ3JhZGllbnRVbml0cz0idXNlclNwYWNlT25Vc2UiIHgxPSIyNDYuNjAzIiB5MT0iOS4yMjEyIiB4Mj0iMTc0LjE1OCIgeTI9IjMwOC41NDI2IiBncmFkaWVudFRyYW5zZm9ybT0ibWF0cml4KDEgMCAwIC0xIDAgMzAyKSI+CgkJPHN0b3AgIG9mZnNldD0iMCIgc3R5bGU9InN0b3AtY29sb3I6IzBCNDZGOSIvPgoJCTxzdG9wICBvZmZzZXQ9IjEiIHN0eWxlPSJzdG9wLWNvbG9yOiNCQkZCRTAiLz4KCTwvbGluZWFyR3JhZGllbnQ+Cgk8cGF0aCBjbGFzcz0ic3QwIiBkPSJNMjc0LjcsOTMuOUwxNjYuNiwyM3YzOS42bDY5LjQsNDUuMWwtOC4yLDI1LjhoLTYxLjJ2MzIuOWg2MS4ybDguMiwyNS44bC02OS40LDQ1LjFWMjc3bDEwOC4yLTcwLjdMMjU3LDE1MC4xCgkJTDI3NC43LDkzLjl6Ii8+CgkKCQk8bGluZWFyR3JhZGllbnQgaWQ9IlNWR0lEXzAwMDAwMDE4MjI4MjM3MTUxMjM5MTUxMzIwMDAwMDE3ODM4NjY0MjU5NzY2MjczOTI1XyIgZ3JhZGllbnRVbml0cz0idXNlclNwYWNlT25Vc2UiIHgxPSIxMjkuMzUxNiIgeTE9Ii0xOS4xNTczIiB4Mj0iNTYuOTA2NiIgeTI9IjI4MC4xNjQxIiBncmFkaWVudFRyYW5zZm9ybT0ibWF0cml4KDEgMCAwIC0xIDAgMzAyKSI+CgkJPHN0b3AgIG9mZnNldD0iMCIgc3R5bGU9InN0b3AtY29sb3I6IzBCNDZGOSIvPgoJCTxzdG9wICBvZmZzZXQ9IjEiIHN0eWxlPSJzdG9wLWNvbG9yOiNCQkZCRTAiLz4KCTwvbGluZWFyR3JhZGllbnQ+Cgk8cGF0aCBzdHlsZT0iZmlsbDp1cmwoI1NWR0lEXzAwMDAwMDE4MjI4MjM3MTUxMjM5MTUxMzIwMDAwMDE3ODM4NjY0MjU5NzY2MjczOTI1Xyk7IiBkPSJNNzIuNSwxNjYuNGg2MXYtMzIuOUg3Mi4ybC03LjktMjUuOAoJCWw2OS4yLTQ1LjFWMjNMMjUuMyw5My45TDQzLDE1MC4xbC0xNy43LDU2LjJMMTMzLjcsMjc3di0zOS42bC02OS40LTQ1LjFMNzIuNSwxNjYuNHoiLz4KCTxkZWZzPgoJCTxmaWx0ZXIgaWQ9IkFkb2JlX09wYWNpdHlNYXNrRmlsdGVyIiBmaWx0ZXJVbml0cz0idXNlclNwYWNlT25Vc2UiIHg9IjI1LjQiIHk9IjIzIiB3aWR0aD0iMjQ3LjYiIGhlaWdodD0iMjU0Ij4KCQkJPGZlQ29sb3JNYXRyaXggIHR5cGU9Im1hdHJpeCIgdmFsdWVzPSIxIDAgMCAwIDAgIDAgMSAwIDAgMCAgMCAwIDEgMCAwICAwIDAgMCAxIDAiLz4KCQk8L2ZpbHRlcj4KCTwvZGVmcz4KCQoJCTxtYXNrIG1hc2tVbml0cz0idXNlclNwYWNlT25Vc2UiIHg9IjI1LjQiIHk9IjIzIiB3aWR0aD0iMjQ3LjYiIGhlaWdodD0iMjU0IiBpZD0ibWFzazBfMTY2MV8yOTVfMDAwMDAwODgxMzIyNTE1OTc0NDE1NzM0OTAwMDAwMTE2OTM2MTIwMTg1MDY2ODE0ODFfIj4KCQkKCQkJPGxpbmVhckdyYWRpZW50IGlkPSJTVkdJRF8wMDAwMDE2NTkyOTcyNDMwMzE2NDIwMzAwMDAwMDAwNzEwMTkwNDk4NDUxOTkxNTE2Ml8iIGdyYWRpZW50VW5pdHM9InVzZXJTcGFjZU9uVXNlIiB4MT0iMjQ2LjYwMzgiIHkxPSI5LjIyMTQiIHgyPSIxNzQuMTU4OCIgeTI9IjMwOC41NDI4IiBncmFkaWVudFRyYW5zZm9ybT0ibWF0cml4KDEgMCAwIC0xIDAgMzAyKSI+CgkJCTxzdG9wICBvZmZzZXQ9IjAiIHN0eWxlPSJzdG9wLWNvbG9yOiMwQjQ2RjkiLz4KCQkJPHN0b3AgIG9mZnNldD0iMSIgc3R5bGU9InN0b3AtY29sb3I6I0JCRkJFMCIvPgoJCTwvbGluZWFyR3JhZGllbnQ+CgkJPHBhdGggc3R5bGU9ImZpbGw6dXJsKCNTVkdJRF8wMDAwMDE2NTkyOTcyNDMwMzE2NDIwMzAwMDAwMDAwNzEwMTkwNDk4NDUxOTkxNTE2Ml8pO2ZpbHRlcjp1cmwoI0Fkb2JlX09wYWNpdHlNYXNrRmlsdGVyKTsiIGQ9IgoJCQlNMjc0LjcsOTMuOUwxNjYuNiwyM3YzOS42bDY5LjQsNDUuMWwtOC4yLDI1LjhoLTYxLjJ2MzIuOWg2MS4ybDguMiwyNS44bC02OS40LDQ1LjFWMjc3bDEwOC4yLTcwLjdMMjU3LDE1MC4xTDI3NC43LDkzLjl6Ii8+CgkJCgkJCTxsaW5lYXJHcmFkaWVudCBpZD0iU1ZHSURfMDAwMDAxMTk4MTE3MDc2MjE0NzI4MTQyNzAwMDAwMTA4Mjk2NTkzODM4NTEyMDI0OTFfIiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSIgeDE9IjEyOS4zNTIxIiB5MT0iLTE5LjE1NzEiIHgyPSI1Ni45MDcxIiB5Mj0iMjgwLjE2NDIiIGdyYWRpZW50VHJhbnNmb3JtPSJtYXRyaXgoMSAwIDAgLTEgMCAzMDIpIj4KCQkJPHN0b3AgIG9mZnNldD0iMCIgc3R5bGU9InN0b3AtY29sb3I6IzBCNDZGOSIvPgoJCQk8c3RvcCAgb2Zmc2V0PSIxIiBzdHlsZT0ic3RvcC1jb2xvcjojQkJGQkUwIi8+CgkJPC9saW5lYXJHcmFkaWVudD4KCQk8cGF0aCBzdHlsZT0iZmlsbDp1cmwoI1NWR0lEXzAwMDAwMTE5ODExNzA3NjIxNDcyODE0MjcwMDAwMDEwODI5NjU5MzgzODUxMjAyNDkxXyk7IiBkPSJNNzIuNSwxNjYuNGg2MXYtMzIuOUg3Mi4ybC03LjktMjUuOAoJCQlsNjkuMi00NS4xVjIzTDI1LjMsOTMuOUw0MywxNTAuMWwtMTcuNyw1Ni4yTDEzMy43LDI3N3YtMzkuNmwtNjkuNC00NS4xTDcyLjUsMTY2LjR6Ii8+Cgk8L21hc2s+Cgk8ZyBjbGFzcz0ic3Q0Ij4KCQkKCQkJPGxpbmVhckdyYWRpZW50IGlkPSJTVkdJRF8wMDAwMDEwOTAxOTkxODU1Nzc3MzA1MzQyMDAwMDAxNzYwMjQwNTkwODA2NzEyMDMwMF8iIGdyYWRpZW50VW5pdHM9InVzZXJTcGFjZU9uVXNlIiB4MT0iNDYuNDY2MiIgeTE9IjIyOC43NTU0IiB4Mj0iMTcxLjg2MzgiIHkyPSIxMzUuMTAzOSIgZ3JhZGllbnRUcmFuc2Zvcm09Im1hdHJpeCgxIDAgMCAtMSAwIDMwMikiPgoJCQk8c3RvcCAgb2Zmc2V0PSIwLjExOTgiIHN0eWxlPSJzdG9wLWNvbG9yOiM4OTUyRkY7c3RvcC1vcGFjaXR5OjAuODciLz4KCQkJPHN0b3AgIG9mZnNldD0iMSIgc3R5bGU9InN0b3AtY29sb3I6I0RBQkRGRjtzdG9wLW9wYWNpdHk6MCIvPgoJCTwvbGluZWFyR3JhZGllbnQ+CgkJCgkJCTxyZWN0IHg9IjI1LjQiIHk9IjIzIiBzdHlsZT0iZmlsbDp1cmwoI1NWR0lEXzAwMDAwMTA5MDE5OTE4NTU3NzczMDUzNDIwMDAwMDE3NjAyNDA1OTA4MDY3MTIwMzAwXyk7IiB3aWR0aD0iMjQ3LjYiIGhlaWdodD0iMjU0Ii8+Cgk8L2c+CjwvZz4KPC9zdmc+Cg==\";\nvar METADATA5 = {\n  id: \"exodus\" /* EXODUS */,\n  chain: \"algorand\",\n  name: \"Exodus\",\n  icon: ICON8\n};\n\n// src/clients/exodus/client.ts\nvar _ExodusClient = class extends BaseClient {\n  sdk;\n  onlyIfTrusted;\n  constructor({\n    sdk: clientSdk,\n    onlyIfTrusted\n  }) {\n    super();\n    this.sdk = clientSdk;\n    this.onlyIfTrusted = onlyIfTrusted;\n  }\n  static async init(initParams) {\n    try {\n      if (typeof window == \"undefined\" || window.exodus === void 0) {\n        throw new Error(\"Exodus is not available.\");\n      }\n      const clientSdk = window.exodus.algorand;\n      let onlyIfTrusted = false;\n      if (initParams?.config?.onlyIfTrusted) {\n        onlyIfTrusted = initParams?.config?.onlyIfTrusted;\n      }\n      return new _ExodusClient({\n        sdk: clientSdk,\n        onlyIfTrusted\n      });\n    } catch (e) {\n      console.error(\"Error initializing...\", e);\n      return null;\n    }\n  }\n  async connect() {\n    const { address } = await this.sdk.connect({\n      onlyIfTrusted: this.onlyIfTrusted\n    });\n    if (!address) {\n      throw new Error(`No accounts found for ${METADATA5.id}`);\n    }\n    const accounts = [\n      {\n        name: `Exodus 1`,\n        address,\n        providerId: METADATA5.id\n      }\n    ];\n    return {\n      ...METADATA5,\n      accounts\n    };\n  }\n  async reconnect(onDisconnect) {\n    if (window === void 0 || window.exodus === void 0 || window.exodus.algorand.isConnected !== true) {\n      onDisconnect();\n    }\n    return null;\n  }\n  async disconnect() {\n    return;\n  }\n  async signTransactions(connectedAccounts, transactions) {\n    const algosdk = await getAlgosdk();\n    console.log(\"getting algosdk... TODO optimize this!\");\n    const decodedTxns = transactions.map((txn) => {\n      return algosdk.decodeObj(txn);\n    });\n    const txnsToSign = decodedTxns.reduce((acc, txn, i) => {\n      if (!(\"txn\" in txn) && connectedAccounts.includes(algosdk.encodeAddress(txn[\"snd\"]))) {\n        acc.push(transactions[i]);\n      }\n      return acc;\n    }, []);\n    const result = await this.sdk.signTransaction(txnsToSign);\n    const signedTxns = decodedTxns.reduce((acc, txn, i) => {\n      if (!(\"txn\" in txn)) {\n        const signedByUser = result.shift();\n        signedByUser && acc.push(signedByUser);\n      } else {\n        acc.push(transactions[i]);\n      }\n      return acc;\n    }, []);\n    return signedTxns;\n  }\n};\nvar ExodusClient = _ExodusClient;\n__name(ExodusClient, \"ExodusClient\");\n__publicField(ExodusClient, \"metadata\", METADATA5);\n\n// src/clientsNEW/constants.ts\nvar CLIENT_MAP = {\n  [\"pera\" /* PERA */]: {\n    id: \"pera\" /* PERA */,\n    // TODO remove? just use metadata.id ...?\n    pkg: \"@perawallet/connect\",\n    client: PeraClient,\n    meta: PeraClient.metadata\n    // TODO remove? this too\n  },\n  // TODO consider moving pkg name to each client's metadata + making constants off of those\n  [\"inkey\" /* INKEY */]: {\n    id: \"inkey\" /* INKEY */,\n    pkg: \"@thencc/inkey-client-js\",\n    client: InkeyClient,\n    meta: InkeyClient.metadata\n  },\n  [\"myalgo\" /* MYALGO */]: {\n    id: \"myalgo\" /* MYALGO */,\n    pkg: \"@randlabs/myalgo-connect\",\n    client: MyAlgoClient,\n    meta: MyAlgoClient.metadata\n  },\n  [\"algosigner\" /* ALGOSIGNER */]: {\n    id: \"algosigner\" /* ALGOSIGNER */,\n    pkg: \"\",\n    // DOESNT EXIST, its a chrome ext\n    client: AlgoSignerClient,\n    meta: AlgoSignerClient.metadata\n    // use constant var?\n  },\n  [\"exodus\" /* EXODUS */]: {\n    id: \"exodus\" /* EXODUS */,\n    pkg: \"\",\n    // DOESNT EXIST, its a chrome ext\n    client: ExodusClient,\n    meta: ExodusClient.metadata\n    // use constant var?\n  }\n};\nvar CLIENT_IDS = Object.values(CLIENT_MAP).map((c) => c.client.metadata.id);\nvar CLIENT_PKGS = Object.values(CLIENT_MAP).map((c) => c.pkg).filter((p) => p !== \"\");\nvar excludeClients = /* @__PURE__ */ __name((idsToDisable) => {\n  let pkgsToDisable = [];\n  for (let id of idsToDisable) {\n    pkgsToDisable.push(CLIENT_MAP[id][\"pkg\"]);\n  }\n  return pkgsToDisable;\n}, \"excludeClients\");\n\n// src/wallets/actions.ts\nvar createWallet = /* @__PURE__ */ __name((id, ip = true) => {\n  let w = reactive({\n    // === wallet state ===\n    id,\n    // as W_ID,\n    client: null,\n    initParams: ip,\n    inited: false,\n    // client\n    initing: false,\n    // client + sdk\n    signing: false,\n    // === methods ===\n    isReady: async () => {\n      console.log(\"isReady\");\n      if (w.inited) {\n        return true;\n      } else {\n        console.log(\"do client.init\");\n        w.initing = true;\n        if (typeof ip == \"object\" && (ip.config || ip.sdk)) {\n          w.client = await CLIENT_MAP[id].client.init(ip);\n        } else if (ip == true) {\n          w.client = await CLIENT_MAP[id].client.init();\n        } else {\n          console.warn(\"bad/incomplete init params for wallet:\", id);\n        }\n        w.initing = false;\n        w.inited = true;\n        return true;\n      }\n    },\n    connect: async () => {\n      console.log(`[${id}] connect (in r obj)`);\n      await w.isReady();\n      await w.client.connect(() => {\n      });\n    },\n    disconnect: async () => {\n      await w.isReady();\n      removeAccountsByClient(id);\n      try {\n        await w.client.disconnect();\n      } catch (e) {\n        console.warn(e);\n      }\n    },\n    reconnect: async () => {\n      await w.isReady();\n      await w.client.reconnect(() => {\n      });\n    },\n    setAsActiveWallet: () => {\n      let accts = getAccountsByProvider(id);\n      if (!accts) {\n        throw new Error(\"No accounts for this provider to set as active\");\n      } else {\n        AnyWalletState.stored.activeAccount = accts[0];\n      }\n    },\n    removeAccounts: () => {\n      removeAccountsByClient(id);\n    },\n    // === computeds ===\n    get accounts() {\n      return readonly(computed(() => getAccountsByProvider(id)));\n    },\n    get isActive() {\n      return computed(() => {\n        return AnyWalletState.stored.activeAccount?.providerId === id;\n      });\n    },\n    get isConnected() {\n      return readonly(computed(() => {\n        return AnyWalletState.stored.connectedAccounts.some(\n          (accounts) => accounts.providerId === id\n          // (accounts) => accounts.providerId === this.id\n        );\n      }));\n    }\n    // or is this a better design? (it also works)\n    // isConnected: () => {\n    // \treturn readonly(computed(() => {\n    // \t\treturn AnyWalletState.stored.connectedAccounts.some(\n    // \t\t\t(accounts) => accounts.providerId === id\n    // \t\t\t// (accounts) => accounts.providerId === this.id\n    // \t\t);\n    // \t}));\n    // },\n  });\n  return w;\n}, \"createWallet\");\nvar enableWallets = /* @__PURE__ */ __name((walletsToEnable = DEFAULT_WALLETS_TO_ENABLE) => {\n  console.log(\"enableWallets started\");\n  if (AnyWalletState.enabledWallets !== null) {\n    console.warn(\"enableWallets called while some wallets were already initialized\");\n  } else {\n    AnyWalletState.enabledWallets = {};\n  }\n  for (let [wKey, wInitParams] of Object.entries(walletsToEnable)) {\n    let wId = wKey;\n    AnyWalletState.allWallets[wId].initParams = wInitParams;\n    AnyWalletState.enabledWallets[wId] = AnyWalletState.allWallets[wId];\n  }\n  return AnyWalletState.enabledWallets;\n}, \"enableWallets\");\nvar getAccountsByProvider = /* @__PURE__ */ __name((id) => {\n  return AnyWalletState.stored.connectedAccounts.filter((account) => account.providerId === id);\n}, \"getAccountsByProvider\");\nvar removeAccountsByClient = /* @__PURE__ */ __name((id) => {\n  console.log(\"removeAccountsByClient\", id);\n  if (AnyWalletState.stored.activeAccount) {\n    let acctsToRemove = AnyWalletState.stored.connectedAccounts.filter(\n      (account) => account.providerId == id\n    );\n    for (let acct of acctsToRemove) {\n      if (acct.address == AnyWalletState.stored.activeAccount.address && acct.providerId == AnyWalletState.stored.activeAccount.providerId) {\n        AnyWalletState.stored.activeAccount = null;\n        break;\n      }\n    }\n  }\n  let acctsToKeep = AnyWalletState.stored.connectedAccounts.filter(\n    (account) => account.providerId !== id\n  );\n  AnyWalletState.stored.connectedAccounts = acctsToKeep;\n}, \"removeAccountsByClient\");\nvar addConnectedAccounts = /* @__PURE__ */ __name((accounts) => {\n  console.log(\"addConnectedAccounts\", accounts);\n  for (let newAcct of accounts) {\n    let exists = false;\n    for (let existingAcct of AnyWalletState.stored.connectedAccounts) {\n      if (newAcct.providerId == existingAcct.providerId && newAcct.address == existingAcct.address) {\n        exists = true;\n      }\n    }\n    if (!exists) {\n      AnyWalletState.stored.connectedAccounts.push(newAcct);\n    }\n  }\n}, \"addConnectedAccounts\");\nvar setAsActiveAccount = /* @__PURE__ */ __name((acct) => {\n  console.log(\"setAsActiveAccount\", acct);\n  AnyWalletState.stored.activeAccount = acct;\n}, \"setAsActiveAccount\");\nvar signTransactions = /* @__PURE__ */ __name(async (txns) => {\n  console.log(\"signTransactions\", txns);\n  if (!AnyWalletState.enabledWallets) {\n    throw new Error(\"No wallets enabled\");\n  }\n  if (!AnyWalletState.activeWalletId) {\n    throw new Error(\"No active wallet\");\n  }\n  if (!AnyWalletState.activeAddress) {\n    throw new Error(\"No active account\");\n  }\n  let activeWallet = AnyWalletState.enabledWallets[AnyWalletState.activeWalletId];\n  if (!activeWallet) {\n    throw new Error(\"No active wallet... shouldnt happen.\");\n  }\n  if (activeWallet.inited == false || activeWallet.client == null) {\n    await activeWallet.isReady();\n  }\n  activeWallet.signing = true;\n  let txnsSigned = await activeWallet.client.signTransactions(\n    [AnyWalletState.activeAddress],\n    txns\n  );\n  activeWallet.signing = false;\n  console.log(\"txnsSigned\", txnsSigned);\n  return txnsSigned;\n}, \"signTransactions\");\n\n// src/wallets/constants.ts\nvar WALLET_ID = /* @__PURE__ */ ((WALLET_ID4) => {\n  WALLET_ID4[\"PERA\"] = \"pera\";\n  WALLET_ID4[\"MYALGO\"] = \"myalgo\";\n  WALLET_ID4[\"INKEY\"] = \"inkey\";\n  WALLET_ID4[\"ALGOSIGNER\"] = \"algosigner\";\n  WALLET_ID4[\"EXODUS\"] = \"exodus\";\n  return WALLET_ID4;\n})(WALLET_ID || {});\nvar DEFAULT_WALLETS_TO_ENABLE = {\n  [\"pera\" /* PERA */]: true,\n  [\"inkey\" /* INKEY */]: true,\n  [\"myalgo\" /* MYALGO */]: true,\n  [\"algosigner\" /* ALGOSIGNER */]: true,\n  [\"exodus\" /* EXODUS */]: true\n};\nvar ALL_WALLETS = {\n  [\"pera\" /* PERA */]: createWallet(\"pera\" /* PERA */),\n  [\"inkey\" /* INKEY */]: createWallet(\"inkey\" /* INKEY */),\n  [\"myalgo\" /* MYALGO */]: createWallet(\"myalgo\" /* MYALGO */),\n  [\"algosigner\" /* ALGOSIGNER */]: createWallet(\"algosigner\" /* ALGOSIGNER */),\n  [\"exodus\" /* EXODUS */]: createWallet(\"exodus\" /* EXODUS */)\n  // test: '123'; // breaks, as it should\n};\n\n// src/state/index.ts\nvar AnyWalletState = reactive2({\n  allWallets: ALL_WALLETS,\n  enabledWallets: null,\n  // .wallets (should it be renamed this?)\n  // store in localstorage (FYI: DONT put Maps or Sets or Functions in this)\n  stored: {\n    version: 0,\n    // for future schema changes, can translate old structs to new\n    connectedAccounts: [],\n    activeAccount: null\n    // null works in ls but not undefined. think abt JSON stringify/parse\n  },\n  // computeds\n  activeAddress: readonly2(computed2(() => {\n    let a = \"\";\n    if (AnyWalletState.stored.activeAccount) {\n      a = AnyWalletState.stored.activeAccount.address;\n    }\n    return a;\n  })),\n  activeWalletId: readonly2(computed2(() => {\n    let aWId = null;\n    if (AnyWalletState.stored.activeAccount) {\n      aWId = AnyWalletState.stored.activeAccount.providerId;\n    }\n    return aWId;\n  })),\n  activeWallet: readonly2(computed2(() => {\n    let aW = void 0;\n    if (AnyWalletState.activeWalletId !== null && AnyWalletState.enabledWallets !== null) {\n      aW = AnyWalletState.enabledWallets[AnyWalletState.activeWalletId];\n    }\n    return aW;\n  })),\n  // this type assertion is needed to help w max inferred type size exceeded\n  isSigning: readonly2(computed2(() => {\n    let someWalletIsSigning = false;\n    if (!AnyWalletState.enabledWallets) {\n    } else {\n      for (let [k, w] of Object.entries(AnyWalletState.enabledWallets)) {\n        if (w.signing) {\n          someWalletIsSigning = true;\n          break;\n        }\n      }\n    }\n    return someWalletIsSigning;\n  }))\n});\nif (isBrowser()) {\n  startWatchers();\n}\nvar onChange = /* @__PURE__ */ __name((n) => {\n  console.log(\"onChange\");\n  console.log(\"latest\", n);\n}, \"onChange\");\nwatch2(\n  AnyWalletState,\n  (latestState) => {\n    console.log(\"[in pkg] something changed\");\n    onChange(latestState);\n  },\n  {\n    deep: true\n  }\n);\n\n// src/utils/index.ts\nfunction isBrowser() {\n  let pass = false;\n  if (typeof window !== void 0 && typeof window == \"object\") {\n    if (\"document\" in window && typeof window.document == \"object\") {\n      pass = true;\n    }\n  }\n  return pass;\n}\n__name(isBrowser, \"isBrowser\");\n\n// src/clients/pera/index.ts\nvar pera_default = client_default;\n\n// src/clients/myalgo/index.ts\nvar myalgo_default = MyAlgoClient;\n\n// src/clients/inkey/index.ts\nvar inkey_default = InkeyClient;\n\n// src/clients/index.ts\nvar CLIENT_SDK_MAP = {\n  // [WALLET_ID.PERA]: pera,\n  // [WALLET_ID.MYALGO]: myalgo,\n  // [WALLET_ID.INKEY]: InkeyClient\n};\nexport {\n  ALL_WALLETS,\n  AnyWalletState,\n  CLIENT_IDS,\n  CLIENT_MAP,\n  CLIENT_PKGS,\n  CLIENT_SDK_MAP,\n  DEFAULT_WALLETS_TO_ENABLE,\n  WALLET_ID,\n  addConnectedAccounts,\n  createWallet,\n  enableWallets,\n  excludeClients,\n  getAccountsByProvider,\n  inkey_default as inkey,\n  isBrowser,\n  myalgo_default as myalgo,\n  onChange,\n  pera_default as pera,\n  removeAccountsByClient,\n  setAsActiveAccount,\n  signTransactions,\n  watch3 as watch\n};\n", "import { extend, isArray, isMap, isIntegerKey, hasOwn, isSymbol, isObject, hasChanged, makeMap, capitalize, toRawType, def, isFunction, NOOP } from '@vue/shared';\n\nfunction warn(msg, ...args) {\n    console.warn(`[Vue warn] ${msg}`, ...args);\n}\n\nlet activeEffectScope;\nclass EffectScope {\n    constructor(detached = false) {\n        this.detached = detached;\n        /**\n         * @internal\n         */\n        this._active = true;\n        /**\n         * @internal\n         */\n        this.effects = [];\n        /**\n         * @internal\n         */\n        this.cleanups = [];\n        this.parent = activeEffectScope;\n        if (!detached && activeEffectScope) {\n            this.index =\n                (activeEffectScope.scopes || (activeEffectScope.scopes = [])).push(this) - 1;\n        }\n    }\n    get active() {\n        return this._active;\n    }\n    run(fn) {\n        if (this._active) {\n            const currentEffectScope = activeEffectScope;\n            try {\n                activeEffectScope = this;\n                return fn();\n            }\n            finally {\n                activeEffectScope = currentEffectScope;\n            }\n        }\n        else if ((process.env.NODE_ENV !== 'production')) {\n            warn(`cannot run an inactive effect scope.`);\n        }\n    }\n    /**\n     * This should only be called on non-detached scopes\n     * @internal\n     */\n    on() {\n        activeEffectScope = this;\n    }\n    /**\n     * This should only be called on non-detached scopes\n     * @internal\n     */\n    off() {\n        activeEffectScope = this.parent;\n    }\n    stop(fromParent) {\n        if (this._active) {\n            let i, l;\n            for (i = 0, l = this.effects.length; i < l; i++) {\n                this.effects[i].stop();\n            }\n            for (i = 0, l = this.cleanups.length; i < l; i++) {\n                this.cleanups[i]();\n            }\n            if (this.scopes) {\n                for (i = 0, l = this.scopes.length; i < l; i++) {\n                    this.scopes[i].stop(true);\n                }\n            }\n            // nested scope, dereference from parent to avoid memory leaks\n            if (!this.detached && this.parent && !fromParent) {\n                // optimized O(1) removal\n                const last = this.parent.scopes.pop();\n                if (last && last !== this) {\n                    this.parent.scopes[this.index] = last;\n                    last.index = this.index;\n                }\n            }\n            this.parent = undefined;\n            this._active = false;\n        }\n    }\n}\nfunction effectScope(detached) {\n    return new EffectScope(detached);\n}\nfunction recordEffectScope(effect, scope = activeEffectScope) {\n    if (scope && scope.active) {\n        scope.effects.push(effect);\n    }\n}\nfunction getCurrentScope() {\n    return activeEffectScope;\n}\nfunction onScopeDispose(fn) {\n    if (activeEffectScope) {\n        activeEffectScope.cleanups.push(fn);\n    }\n    else if ((process.env.NODE_ENV !== 'production')) {\n        warn(`onScopeDispose() is called when there is no active effect scope` +\n            ` to be associated with.`);\n    }\n}\n\nconst createDep = (effects) => {\n    const dep = new Set(effects);\n    dep.w = 0;\n    dep.n = 0;\n    return dep;\n};\nconst wasTracked = (dep) => (dep.w & trackOpBit) > 0;\nconst newTracked = (dep) => (dep.n & trackOpBit) > 0;\nconst initDepMarkers = ({ deps }) => {\n    if (deps.length) {\n        for (let i = 0; i < deps.length; i++) {\n            deps[i].w |= trackOpBit; // set was tracked\n        }\n    }\n};\nconst finalizeDepMarkers = (effect) => {\n    const { deps } = effect;\n    if (deps.length) {\n        let ptr = 0;\n        for (let i = 0; i < deps.length; i++) {\n            const dep = deps[i];\n            if (wasTracked(dep) && !newTracked(dep)) {\n                dep.delete(effect);\n            }\n            else {\n                deps[ptr++] = dep;\n            }\n            // clear bits\n            dep.w &= ~trackOpBit;\n            dep.n &= ~trackOpBit;\n        }\n        deps.length = ptr;\n    }\n};\n\nconst targetMap = new WeakMap();\n// The number of effects currently being tracked recursively.\nlet effectTrackDepth = 0;\nlet trackOpBit = 1;\n/**\n * The bitwise track markers support at most 30 levels of recursion.\n * This value is chosen to enable modern JS engines to use a SMI on all platforms.\n * When recursion depth is greater, fall back to using a full cleanup.\n */\nconst maxMarkerBits = 30;\nlet activeEffect;\nconst ITERATE_KEY = Symbol((process.env.NODE_ENV !== 'production') ? 'iterate' : '');\nconst MAP_KEY_ITERATE_KEY = Symbol((process.env.NODE_ENV !== 'production') ? 'Map key iterate' : '');\nclass ReactiveEffect {\n    constructor(fn, scheduler = null, scope) {\n        this.fn = fn;\n        this.scheduler = scheduler;\n        this.active = true;\n        this.deps = [];\n        this.parent = undefined;\n        recordEffectScope(this, scope);\n    }\n    run() {\n        if (!this.active) {\n            return this.fn();\n        }\n        let parent = activeEffect;\n        let lastShouldTrack = shouldTrack;\n        while (parent) {\n            if (parent === this) {\n                return;\n            }\n            parent = parent.parent;\n        }\n        try {\n            this.parent = activeEffect;\n            activeEffect = this;\n            shouldTrack = true;\n            trackOpBit = 1 << ++effectTrackDepth;\n            if (effectTrackDepth <= maxMarkerBits) {\n                initDepMarkers(this);\n            }\n            else {\n                cleanupEffect(this);\n            }\n            return this.fn();\n        }\n        finally {\n            if (effectTrackDepth <= maxMarkerBits) {\n                finalizeDepMarkers(this);\n            }\n            trackOpBit = 1 << --effectTrackDepth;\n            activeEffect = this.parent;\n            shouldTrack = lastShouldTrack;\n            this.parent = undefined;\n            if (this.deferStop) {\n                this.stop();\n            }\n        }\n    }\n    stop() {\n        // stopped while running itself - defer the cleanup\n        if (activeEffect === this) {\n            this.deferStop = true;\n        }\n        else if (this.active) {\n            cleanupEffect(this);\n            if (this.onStop) {\n                this.onStop();\n            }\n            this.active = false;\n        }\n    }\n}\nfunction cleanupEffect(effect) {\n    const { deps } = effect;\n    if (deps.length) {\n        for (let i = 0; i < deps.length; i++) {\n            deps[i].delete(effect);\n        }\n        deps.length = 0;\n    }\n}\nfunction effect(fn, options) {\n    if (fn.effect) {\n        fn = fn.effect.fn;\n    }\n    const _effect = new ReactiveEffect(fn);\n    if (options) {\n        extend(_effect, options);\n        if (options.scope)\n            recordEffectScope(_effect, options.scope);\n    }\n    if (!options || !options.lazy) {\n        _effect.run();\n    }\n    const runner = _effect.run.bind(_effect);\n    runner.effect = _effect;\n    return runner;\n}\nfunction stop(runner) {\n    runner.effect.stop();\n}\nlet shouldTrack = true;\nconst trackStack = [];\nfunction pauseTracking() {\n    trackStack.push(shouldTrack);\n    shouldTrack = false;\n}\nfunction enableTracking() {\n    trackStack.push(shouldTrack);\n    shouldTrack = true;\n}\nfunction resetTracking() {\n    const last = trackStack.pop();\n    shouldTrack = last === undefined ? true : last;\n}\nfunction track(target, type, key) {\n    if (shouldTrack && activeEffect) {\n        let depsMap = targetMap.get(target);\n        if (!depsMap) {\n            targetMap.set(target, (depsMap = new Map()));\n        }\n        let dep = depsMap.get(key);\n        if (!dep) {\n            depsMap.set(key, (dep = createDep()));\n        }\n        const eventInfo = (process.env.NODE_ENV !== 'production')\n            ? { effect: activeEffect, target, type, key }\n            : undefined;\n        trackEffects(dep, eventInfo);\n    }\n}\nfunction trackEffects(dep, debuggerEventExtraInfo) {\n    let shouldTrack = false;\n    if (effectTrackDepth <= maxMarkerBits) {\n        if (!newTracked(dep)) {\n            dep.n |= trackOpBit; // set newly tracked\n            shouldTrack = !wasTracked(dep);\n        }\n    }\n    else {\n        // Full cleanup mode.\n        shouldTrack = !dep.has(activeEffect);\n    }\n    if (shouldTrack) {\n        dep.add(activeEffect);\n        activeEffect.deps.push(dep);\n        if ((process.env.NODE_ENV !== 'production') && activeEffect.onTrack) {\n            activeEffect.onTrack(Object.assign({ effect: activeEffect }, debuggerEventExtraInfo));\n        }\n    }\n}\nfunction trigger(target, type, key, newValue, oldValue, oldTarget) {\n    const depsMap = targetMap.get(target);\n    if (!depsMap) {\n        // never been tracked\n        return;\n    }\n    let deps = [];\n    if (type === \"clear\" /* TriggerOpTypes.CLEAR */) {\n        // collection being cleared\n        // trigger all effects for target\n        deps = [...depsMap.values()];\n    }\n    else if (key === 'length' && isArray(target)) {\n        const newLength = Number(newValue);\n        depsMap.forEach((dep, key) => {\n            if (key === 'length' || key >= newLength) {\n                deps.push(dep);\n            }\n        });\n    }\n    else {\n        // schedule runs for SET | ADD | DELETE\n        if (key !== void 0) {\n            deps.push(depsMap.get(key));\n        }\n        // also run for iteration key on ADD | DELETE | Map.SET\n        switch (type) {\n            case \"add\" /* TriggerOpTypes.ADD */:\n                if (!isArray(target)) {\n                    deps.push(depsMap.get(ITERATE_KEY));\n                    if (isMap(target)) {\n                        deps.push(depsMap.get(MAP_KEY_ITERATE_KEY));\n                    }\n                }\n                else if (isIntegerKey(key)) {\n                    // new index added to array -> length changes\n                    deps.push(depsMap.get('length'));\n                }\n                break;\n            case \"delete\" /* TriggerOpTypes.DELETE */:\n                if (!isArray(target)) {\n                    deps.push(depsMap.get(ITERATE_KEY));\n                    if (isMap(target)) {\n                        deps.push(depsMap.get(MAP_KEY_ITERATE_KEY));\n                    }\n                }\n                break;\n            case \"set\" /* TriggerOpTypes.SET */:\n                if (isMap(target)) {\n                    deps.push(depsMap.get(ITERATE_KEY));\n                }\n                break;\n        }\n    }\n    const eventInfo = (process.env.NODE_ENV !== 'production')\n        ? { target, type, key, newValue, oldValue, oldTarget }\n        : undefined;\n    if (deps.length === 1) {\n        if (deps[0]) {\n            if ((process.env.NODE_ENV !== 'production')) {\n                triggerEffects(deps[0], eventInfo);\n            }\n            else {\n                triggerEffects(deps[0]);\n            }\n        }\n    }\n    else {\n        const effects = [];\n        for (const dep of deps) {\n            if (dep) {\n                effects.push(...dep);\n            }\n        }\n        if ((process.env.NODE_ENV !== 'production')) {\n            triggerEffects(createDep(effects), eventInfo);\n        }\n        else {\n            triggerEffects(createDep(effects));\n        }\n    }\n}\nfunction triggerEffects(dep, debuggerEventExtraInfo) {\n    // spread into array for stabilization\n    const effects = isArray(dep) ? dep : [...dep];\n    for (const effect of effects) {\n        if (effect.computed) {\n            triggerEffect(effect, debuggerEventExtraInfo);\n        }\n    }\n    for (const effect of effects) {\n        if (!effect.computed) {\n            triggerEffect(effect, debuggerEventExtraInfo);\n        }\n    }\n}\nfunction triggerEffect(effect, debuggerEventExtraInfo) {\n    if (effect !== activeEffect || effect.allowRecurse) {\n        if ((process.env.NODE_ENV !== 'production') && effect.onTrigger) {\n            effect.onTrigger(extend({ effect }, debuggerEventExtraInfo));\n        }\n        if (effect.scheduler) {\n            effect.scheduler();\n        }\n        else {\n            effect.run();\n        }\n    }\n}\nfunction getDepFromReactive(object, key) {\n    var _a;\n    return (_a = targetMap.get(object)) === null || _a === void 0 ? void 0 : _a.get(key);\n}\n\nconst isNonTrackableKeys = /*#__PURE__*/ makeMap(`__proto__,__v_isRef,__isVue`);\nconst builtInSymbols = new Set(\n/*#__PURE__*/\nObject.getOwnPropertyNames(Symbol)\n    // ios10.x Object.getOwnPropertyNames(Symbol) can enumerate 'arguments' and 'caller'\n    // but accessing them on Symbol leads to TypeError because Symbol is a strict mode\n    // function\n    .filter(key => key !== 'arguments' && key !== 'caller')\n    .map(key => Symbol[key])\n    .filter(isSymbol));\nconst get$1 = /*#__PURE__*/ createGetter();\nconst shallowGet = /*#__PURE__*/ createGetter(false, true);\nconst readonlyGet = /*#__PURE__*/ createGetter(true);\nconst shallowReadonlyGet = /*#__PURE__*/ createGetter(true, true);\nconst arrayInstrumentations = /*#__PURE__*/ createArrayInstrumentations();\nfunction createArrayInstrumentations() {\n    const instrumentations = {};\n    ['includes', 'indexOf', 'lastIndexOf'].forEach(key => {\n        instrumentations[key] = function (...args) {\n            const arr = toRaw(this);\n            for (let i = 0, l = this.length; i < l; i++) {\n                track(arr, \"get\" /* TrackOpTypes.GET */, i + '');\n            }\n            // we run the method using the original args first (which may be reactive)\n            const res = arr[key](...args);\n            if (res === -1 || res === false) {\n                // if that didn't work, run it again using raw values.\n                return arr[key](...args.map(toRaw));\n            }\n            else {\n                return res;\n            }\n        };\n    });\n    ['push', 'pop', 'shift', 'unshift', 'splice'].forEach(key => {\n        instrumentations[key] = function (...args) {\n            pauseTracking();\n            const res = toRaw(this)[key].apply(this, args);\n            resetTracking();\n            return res;\n        };\n    });\n    return instrumentations;\n}\nfunction hasOwnProperty(key) {\n    const obj = toRaw(this);\n    track(obj, \"has\" /* TrackOpTypes.HAS */, key);\n    return obj.hasOwnProperty(key);\n}\nfunction createGetter(isReadonly = false, shallow = false) {\n    return function get(target, key, receiver) {\n        if (key === \"__v_isReactive\" /* ReactiveFlags.IS_REACTIVE */) {\n            return !isReadonly;\n        }\n        else if (key === \"__v_isReadonly\" /* ReactiveFlags.IS_READONLY */) {\n            return isReadonly;\n        }\n        else if (key === \"__v_isShallow\" /* ReactiveFlags.IS_SHALLOW */) {\n            return shallow;\n        }\n        else if (key === \"__v_raw\" /* ReactiveFlags.RAW */ &&\n            receiver ===\n                (isReadonly\n                    ? shallow\n                        ? shallowReadonlyMap\n                        : readonlyMap\n                    : shallow\n                        ? shallowReactiveMap\n                        : reactiveMap).get(target)) {\n            return target;\n        }\n        const targetIsArray = isArray(target);\n        if (!isReadonly) {\n            if (targetIsArray && hasOwn(arrayInstrumentations, key)) {\n                return Reflect.get(arrayInstrumentations, key, receiver);\n            }\n            if (key === 'hasOwnProperty') {\n                return hasOwnProperty;\n            }\n        }\n        const res = Reflect.get(target, key, receiver);\n        if (isSymbol(key) ? builtInSymbols.has(key) : isNonTrackableKeys(key)) {\n            return res;\n        }\n        if (!isReadonly) {\n            track(target, \"get\" /* TrackOpTypes.GET */, key);\n        }\n        if (shallow) {\n            return res;\n        }\n        if (isRef(res)) {\n            // ref unwrapping - skip unwrap for Array + integer key.\n            return targetIsArray && isIntegerKey(key) ? res : res.value;\n        }\n        if (isObject(res)) {\n            // Convert returned value into a proxy as well. we do the isObject check\n            // here to avoid invalid value warning. Also need to lazy access readonly\n            // and reactive here to avoid circular dependency.\n            return isReadonly ? readonly(res) : reactive(res);\n        }\n        return res;\n    };\n}\nconst set$1 = /*#__PURE__*/ createSetter();\nconst shallowSet = /*#__PURE__*/ createSetter(true);\nfunction createSetter(shallow = false) {\n    return function set(target, key, value, receiver) {\n        let oldValue = target[key];\n        if (isReadonly(oldValue) && isRef(oldValue) && !isRef(value)) {\n            return false;\n        }\n        if (!shallow) {\n            if (!isShallow(value) && !isReadonly(value)) {\n                oldValue = toRaw(oldValue);\n                value = toRaw(value);\n            }\n            if (!isArray(target) && isRef(oldValue) && !isRef(value)) {\n                oldValue.value = value;\n                return true;\n            }\n        }\n        const hadKey = isArray(target) && isIntegerKey(key)\n            ? Number(key) < target.length\n            : hasOwn(target, key);\n        const result = Reflect.set(target, key, value, receiver);\n        // don't trigger if target is something up in the prototype chain of original\n        if (target === toRaw(receiver)) {\n            if (!hadKey) {\n                trigger(target, \"add\" /* TriggerOpTypes.ADD */, key, value);\n            }\n            else if (hasChanged(value, oldValue)) {\n                trigger(target, \"set\" /* TriggerOpTypes.SET */, key, value, oldValue);\n            }\n        }\n        return result;\n    };\n}\nfunction deleteProperty(target, key) {\n    const hadKey = hasOwn(target, key);\n    const oldValue = target[key];\n    const result = Reflect.deleteProperty(target, key);\n    if (result && hadKey) {\n        trigger(target, \"delete\" /* TriggerOpTypes.DELETE */, key, undefined, oldValue);\n    }\n    return result;\n}\nfunction has$1(target, key) {\n    const result = Reflect.has(target, key);\n    if (!isSymbol(key) || !builtInSymbols.has(key)) {\n        track(target, \"has\" /* TrackOpTypes.HAS */, key);\n    }\n    return result;\n}\nfunction ownKeys(target) {\n    track(target, \"iterate\" /* TrackOpTypes.ITERATE */, isArray(target) ? 'length' : ITERATE_KEY);\n    return Reflect.ownKeys(target);\n}\nconst mutableHandlers = {\n    get: get$1,\n    set: set$1,\n    deleteProperty,\n    has: has$1,\n    ownKeys\n};\nconst readonlyHandlers = {\n    get: readonlyGet,\n    set(target, key) {\n        if ((process.env.NODE_ENV !== 'production')) {\n            warn(`Set operation on key \"${String(key)}\" failed: target is readonly.`, target);\n        }\n        return true;\n    },\n    deleteProperty(target, key) {\n        if ((process.env.NODE_ENV !== 'production')) {\n            warn(`Delete operation on key \"${String(key)}\" failed: target is readonly.`, target);\n        }\n        return true;\n    }\n};\nconst shallowReactiveHandlers = /*#__PURE__*/ extend({}, mutableHandlers, {\n    get: shallowGet,\n    set: shallowSet\n});\n// Props handlers are special in the sense that it should not unwrap top-level\n// refs (in order to allow refs to be explicitly passed down), but should\n// retain the reactivity of the normal readonly object.\nconst shallowReadonlyHandlers = /*#__PURE__*/ extend({}, readonlyHandlers, {\n    get: shallowReadonlyGet\n});\n\nconst toShallow = (value) => value;\nconst getProto = (v) => Reflect.getPrototypeOf(v);\nfunction get(target, key, isReadonly = false, isShallow = false) {\n    // #1772: readonly(reactive(Map)) should return readonly + reactive version\n    // of the value\n    target = target[\"__v_raw\" /* ReactiveFlags.RAW */];\n    const rawTarget = toRaw(target);\n    const rawKey = toRaw(key);\n    if (!isReadonly) {\n        if (key !== rawKey) {\n            track(rawTarget, \"get\" /* TrackOpTypes.GET */, key);\n        }\n        track(rawTarget, \"get\" /* TrackOpTypes.GET */, rawKey);\n    }\n    const { has } = getProto(rawTarget);\n    const wrap = isShallow ? toShallow : isReadonly ? toReadonly : toReactive;\n    if (has.call(rawTarget, key)) {\n        return wrap(target.get(key));\n    }\n    else if (has.call(rawTarget, rawKey)) {\n        return wrap(target.get(rawKey));\n    }\n    else if (target !== rawTarget) {\n        // #3602 readonly(reactive(Map))\n        // ensure that the nested reactive `Map` can do tracking for itself\n        target.get(key);\n    }\n}\nfunction has(key, isReadonly = false) {\n    const target = this[\"__v_raw\" /* ReactiveFlags.RAW */];\n    const rawTarget = toRaw(target);\n    const rawKey = toRaw(key);\n    if (!isReadonly) {\n        if (key !== rawKey) {\n            track(rawTarget, \"has\" /* TrackOpTypes.HAS */, key);\n        }\n        track(rawTarget, \"has\" /* TrackOpTypes.HAS */, rawKey);\n    }\n    return key === rawKey\n        ? target.has(key)\n        : target.has(key) || target.has(rawKey);\n}\nfunction size(target, isReadonly = false) {\n    target = target[\"__v_raw\" /* ReactiveFlags.RAW */];\n    !isReadonly && track(toRaw(target), \"iterate\" /* TrackOpTypes.ITERATE */, ITERATE_KEY);\n    return Reflect.get(target, 'size', target);\n}\nfunction add(value) {\n    value = toRaw(value);\n    const target = toRaw(this);\n    const proto = getProto(target);\n    const hadKey = proto.has.call(target, value);\n    if (!hadKey) {\n        target.add(value);\n        trigger(target, \"add\" /* TriggerOpTypes.ADD */, value, value);\n    }\n    return this;\n}\nfunction set(key, value) {\n    value = toRaw(value);\n    const target = toRaw(this);\n    const { has, get } = getProto(target);\n    let hadKey = has.call(target, key);\n    if (!hadKey) {\n        key = toRaw(key);\n        hadKey = has.call(target, key);\n    }\n    else if ((process.env.NODE_ENV !== 'production')) {\n        checkIdentityKeys(target, has, key);\n    }\n    const oldValue = get.call(target, key);\n    target.set(key, value);\n    if (!hadKey) {\n        trigger(target, \"add\" /* TriggerOpTypes.ADD */, key, value);\n    }\n    else if (hasChanged(value, oldValue)) {\n        trigger(target, \"set\" /* TriggerOpTypes.SET */, key, value, oldValue);\n    }\n    return this;\n}\nfunction deleteEntry(key) {\n    const target = toRaw(this);\n    const { has, get } = getProto(target);\n    let hadKey = has.call(target, key);\n    if (!hadKey) {\n        key = toRaw(key);\n        hadKey = has.call(target, key);\n    }\n    else if ((process.env.NODE_ENV !== 'production')) {\n        checkIdentityKeys(target, has, key);\n    }\n    const oldValue = get ? get.call(target, key) : undefined;\n    // forward the operation before queueing reactions\n    const result = target.delete(key);\n    if (hadKey) {\n        trigger(target, \"delete\" /* TriggerOpTypes.DELETE */, key, undefined, oldValue);\n    }\n    return result;\n}\nfunction clear() {\n    const target = toRaw(this);\n    const hadItems = target.size !== 0;\n    const oldTarget = (process.env.NODE_ENV !== 'production')\n        ? isMap(target)\n            ? new Map(target)\n            : new Set(target)\n        : undefined;\n    // forward the operation before queueing reactions\n    const result = target.clear();\n    if (hadItems) {\n        trigger(target, \"clear\" /* TriggerOpTypes.CLEAR */, undefined, undefined, oldTarget);\n    }\n    return result;\n}\nfunction createForEach(isReadonly, isShallow) {\n    return function forEach(callback, thisArg) {\n        const observed = this;\n        const target = observed[\"__v_raw\" /* ReactiveFlags.RAW */];\n        const rawTarget = toRaw(target);\n        const wrap = isShallow ? toShallow : isReadonly ? toReadonly : toReactive;\n        !isReadonly && track(rawTarget, \"iterate\" /* TrackOpTypes.ITERATE */, ITERATE_KEY);\n        return target.forEach((value, key) => {\n            // important: make sure the callback is\n            // 1. invoked with the reactive map as `this` and 3rd arg\n            // 2. the value received should be a corresponding reactive/readonly.\n            return callback.call(thisArg, wrap(value), wrap(key), observed);\n        });\n    };\n}\nfunction createIterableMethod(method, isReadonly, isShallow) {\n    return function (...args) {\n        const target = this[\"__v_raw\" /* ReactiveFlags.RAW */];\n        const rawTarget = toRaw(target);\n        const targetIsMap = isMap(rawTarget);\n        const isPair = method === 'entries' || (method === Symbol.iterator && targetIsMap);\n        const isKeyOnly = method === 'keys' && targetIsMap;\n        const innerIterator = target[method](...args);\n        const wrap = isShallow ? toShallow : isReadonly ? toReadonly : toReactive;\n        !isReadonly &&\n            track(rawTarget, \"iterate\" /* TrackOpTypes.ITERATE */, isKeyOnly ? MAP_KEY_ITERATE_KEY : ITERATE_KEY);\n        // return a wrapped iterator which returns observed versions of the\n        // values emitted from the real iterator\n        return {\n            // iterator protocol\n            next() {\n                const { value, done } = innerIterator.next();\n                return done\n                    ? { value, done }\n                    : {\n                        value: isPair ? [wrap(value[0]), wrap(value[1])] : wrap(value),\n                        done\n                    };\n            },\n            // iterable protocol\n            [Symbol.iterator]() {\n                return this;\n            }\n        };\n    };\n}\nfunction createReadonlyMethod(type) {\n    return function (...args) {\n        if ((process.env.NODE_ENV !== 'production')) {\n            const key = args[0] ? `on key \"${args[0]}\" ` : ``;\n            console.warn(`${capitalize(type)} operation ${key}failed: target is readonly.`, toRaw(this));\n        }\n        return type === \"delete\" /* TriggerOpTypes.DELETE */ ? false : this;\n    };\n}\nfunction createInstrumentations() {\n    const mutableInstrumentations = {\n        get(key) {\n            return get(this, key);\n        },\n        get size() {\n            return size(this);\n        },\n        has,\n        add,\n        set,\n        delete: deleteEntry,\n        clear,\n        forEach: createForEach(false, false)\n    };\n    const shallowInstrumentations = {\n        get(key) {\n            return get(this, key, false, true);\n        },\n        get size() {\n            return size(this);\n        },\n        has,\n        add,\n        set,\n        delete: deleteEntry,\n        clear,\n        forEach: createForEach(false, true)\n    };\n    const readonlyInstrumentations = {\n        get(key) {\n            return get(this, key, true);\n        },\n        get size() {\n            return size(this, true);\n        },\n        has(key) {\n            return has.call(this, key, true);\n        },\n        add: createReadonlyMethod(\"add\" /* TriggerOpTypes.ADD */),\n        set: createReadonlyMethod(\"set\" /* TriggerOpTypes.SET */),\n        delete: createReadonlyMethod(\"delete\" /* TriggerOpTypes.DELETE */),\n        clear: createReadonlyMethod(\"clear\" /* TriggerOpTypes.CLEAR */),\n        forEach: createForEach(true, false)\n    };\n    const shallowReadonlyInstrumentations = {\n        get(key) {\n            return get(this, key, true, true);\n        },\n        get size() {\n            return size(this, true);\n        },\n        has(key) {\n            return has.call(this, key, true);\n        },\n        add: createReadonlyMethod(\"add\" /* TriggerOpTypes.ADD */),\n        set: createReadonlyMethod(\"set\" /* TriggerOpTypes.SET */),\n        delete: createReadonlyMethod(\"delete\" /* TriggerOpTypes.DELETE */),\n        clear: createReadonlyMethod(\"clear\" /* TriggerOpTypes.CLEAR */),\n        forEach: createForEach(true, true)\n    };\n    const iteratorMethods = ['keys', 'values', 'entries', Symbol.iterator];\n    iteratorMethods.forEach(method => {\n        mutableInstrumentations[method] = createIterableMethod(method, false, false);\n        readonlyInstrumentations[method] = createIterableMethod(method, true, false);\n        shallowInstrumentations[method] = createIterableMethod(method, false, true);\n        shallowReadonlyInstrumentations[method] = createIterableMethod(method, true, true);\n    });\n    return [\n        mutableInstrumentations,\n        readonlyInstrumentations,\n        shallowInstrumentations,\n        shallowReadonlyInstrumentations\n    ];\n}\nconst [mutableInstrumentations, readonlyInstrumentations, shallowInstrumentations, shallowReadonlyInstrumentations] = /* #__PURE__*/ createInstrumentations();\nfunction createInstrumentationGetter(isReadonly, shallow) {\n    const instrumentations = shallow\n        ? isReadonly\n            ? shallowReadonlyInstrumentations\n            : shallowInstrumentations\n        : isReadonly\n            ? readonlyInstrumentations\n            : mutableInstrumentations;\n    return (target, key, receiver) => {\n        if (key === \"__v_isReactive\" /* ReactiveFlags.IS_REACTIVE */) {\n            return !isReadonly;\n        }\n        else if (key === \"__v_isReadonly\" /* ReactiveFlags.IS_READONLY */) {\n            return isReadonly;\n        }\n        else if (key === \"__v_raw\" /* ReactiveFlags.RAW */) {\n            return target;\n        }\n        return Reflect.get(hasOwn(instrumentations, key) && key in target\n            ? instrumentations\n            : target, key, receiver);\n    };\n}\nconst mutableCollectionHandlers = {\n    get: /*#__PURE__*/ createInstrumentationGetter(false, false)\n};\nconst shallowCollectionHandlers = {\n    get: /*#__PURE__*/ createInstrumentationGetter(false, true)\n};\nconst readonlyCollectionHandlers = {\n    get: /*#__PURE__*/ createInstrumentationGetter(true, false)\n};\nconst shallowReadonlyCollectionHandlers = {\n    get: /*#__PURE__*/ createInstrumentationGetter(true, true)\n};\nfunction checkIdentityKeys(target, has, key) {\n    const rawKey = toRaw(key);\n    if (rawKey !== key && has.call(target, rawKey)) {\n        const type = toRawType(target);\n        console.warn(`Reactive ${type} contains both the raw and reactive ` +\n            `versions of the same object${type === `Map` ? ` as keys` : ``}, ` +\n            `which can lead to inconsistencies. ` +\n            `Avoid differentiating between the raw and reactive versions ` +\n            `of an object and only use the reactive version if possible.`);\n    }\n}\n\nconst reactiveMap = new WeakMap();\nconst shallowReactiveMap = new WeakMap();\nconst readonlyMap = new WeakMap();\nconst shallowReadonlyMap = new WeakMap();\nfunction targetTypeMap(rawType) {\n    switch (rawType) {\n        case 'Object':\n        case 'Array':\n            return 1 /* TargetType.COMMON */;\n        case 'Map':\n        case 'Set':\n        case 'WeakMap':\n        case 'WeakSet':\n            return 2 /* TargetType.COLLECTION */;\n        default:\n            return 0 /* TargetType.INVALID */;\n    }\n}\nfunction getTargetType(value) {\n    return value[\"__v_skip\" /* ReactiveFlags.SKIP */] || !Object.isExtensible(value)\n        ? 0 /* TargetType.INVALID */\n        : targetTypeMap(toRawType(value));\n}\nfunction reactive(target) {\n    // if trying to observe a readonly proxy, return the readonly version.\n    if (isReadonly(target)) {\n        return target;\n    }\n    return createReactiveObject(target, false, mutableHandlers, mutableCollectionHandlers, reactiveMap);\n}\n/**\n * Return a shallowly-reactive copy of the original object, where only the root\n * level properties are reactive. It also does not auto-unwrap refs (even at the\n * root level).\n */\nfunction shallowReactive(target) {\n    return createReactiveObject(target, false, shallowReactiveHandlers, shallowCollectionHandlers, shallowReactiveMap);\n}\n/**\n * Creates a readonly copy of the original object. Note the returned copy is not\n * made reactive, but `readonly` can be called on an already reactive object.\n */\nfunction readonly(target) {\n    return createReactiveObject(target, true, readonlyHandlers, readonlyCollectionHandlers, readonlyMap);\n}\n/**\n * Returns a reactive-copy of the original object, where only the root level\n * properties are readonly, and does NOT unwrap refs nor recursively convert\n * returned properties.\n * This is used for creating the props proxy object for stateful components.\n */\nfunction shallowReadonly(target) {\n    return createReactiveObject(target, true, shallowReadonlyHandlers, shallowReadonlyCollectionHandlers, shallowReadonlyMap);\n}\nfunction createReactiveObject(target, isReadonly, baseHandlers, collectionHandlers, proxyMap) {\n    if (!isObject(target)) {\n        if ((process.env.NODE_ENV !== 'production')) {\n            console.warn(`value cannot be made reactive: ${String(target)}`);\n        }\n        return target;\n    }\n    // target is already a Proxy, return it.\n    // exception: calling readonly() on a reactive object\n    if (target[\"__v_raw\" /* ReactiveFlags.RAW */] &&\n        !(isReadonly && target[\"__v_isReactive\" /* ReactiveFlags.IS_REACTIVE */])) {\n        return target;\n    }\n    // target already has corresponding Proxy\n    const existingProxy = proxyMap.get(target);\n    if (existingProxy) {\n        return existingProxy;\n    }\n    // only specific value types can be observed.\n    const targetType = getTargetType(target);\n    if (targetType === 0 /* TargetType.INVALID */) {\n        return target;\n    }\n    const proxy = new Proxy(target, targetType === 2 /* TargetType.COLLECTION */ ? collectionHandlers : baseHandlers);\n    proxyMap.set(target, proxy);\n    return proxy;\n}\nfunction isReactive(value) {\n    if (isReadonly(value)) {\n        return isReactive(value[\"__v_raw\" /* ReactiveFlags.RAW */]);\n    }\n    return !!(value && value[\"__v_isReactive\" /* ReactiveFlags.IS_REACTIVE */]);\n}\nfunction isReadonly(value) {\n    return !!(value && value[\"__v_isReadonly\" /* ReactiveFlags.IS_READONLY */]);\n}\nfunction isShallow(value) {\n    return !!(value && value[\"__v_isShallow\" /* ReactiveFlags.IS_SHALLOW */]);\n}\nfunction isProxy(value) {\n    return isReactive(value) || isReadonly(value);\n}\nfunction toRaw(observed) {\n    const raw = observed && observed[\"__v_raw\" /* ReactiveFlags.RAW */];\n    return raw ? toRaw(raw) : observed;\n}\nfunction markRaw(value) {\n    def(value, \"__v_skip\" /* ReactiveFlags.SKIP */, true);\n    return value;\n}\nconst toReactive = (value) => isObject(value) ? reactive(value) : value;\nconst toReadonly = (value) => isObject(value) ? readonly(value) : value;\n\nfunction trackRefValue(ref) {\n    if (shouldTrack && activeEffect) {\n        ref = toRaw(ref);\n        if ((process.env.NODE_ENV !== 'production')) {\n            trackEffects(ref.dep || (ref.dep = createDep()), {\n                target: ref,\n                type: \"get\" /* TrackOpTypes.GET */,\n                key: 'value'\n            });\n        }\n        else {\n            trackEffects(ref.dep || (ref.dep = createDep()));\n        }\n    }\n}\nfunction triggerRefValue(ref, newVal) {\n    ref = toRaw(ref);\n    const dep = ref.dep;\n    if (dep) {\n        if ((process.env.NODE_ENV !== 'production')) {\n            triggerEffects(dep, {\n                target: ref,\n                type: \"set\" /* TriggerOpTypes.SET */,\n                key: 'value',\n                newValue: newVal\n            });\n        }\n        else {\n            triggerEffects(dep);\n        }\n    }\n}\nfunction isRef(r) {\n    return !!(r && r.__v_isRef === true);\n}\nfunction ref(value) {\n    return createRef(value, false);\n}\nfunction shallowRef(value) {\n    return createRef(value, true);\n}\nfunction createRef(rawValue, shallow) {\n    if (isRef(rawValue)) {\n        return rawValue;\n    }\n    return new RefImpl(rawValue, shallow);\n}\nclass RefImpl {\n    constructor(value, __v_isShallow) {\n        this.__v_isShallow = __v_isShallow;\n        this.dep = undefined;\n        this.__v_isRef = true;\n        this._rawValue = __v_isShallow ? value : toRaw(value);\n        this._value = __v_isShallow ? value : toReactive(value);\n    }\n    get value() {\n        trackRefValue(this);\n        return this._value;\n    }\n    set value(newVal) {\n        const useDirectValue = this.__v_isShallow || isShallow(newVal) || isReadonly(newVal);\n        newVal = useDirectValue ? newVal : toRaw(newVal);\n        if (hasChanged(newVal, this._rawValue)) {\n            this._rawValue = newVal;\n            this._value = useDirectValue ? newVal : toReactive(newVal);\n            triggerRefValue(this, newVal);\n        }\n    }\n}\nfunction triggerRef(ref) {\n    triggerRefValue(ref, (process.env.NODE_ENV !== 'production') ? ref.value : void 0);\n}\nfunction unref(ref) {\n    return isRef(ref) ? ref.value : ref;\n}\nconst shallowUnwrapHandlers = {\n    get: (target, key, receiver) => unref(Reflect.get(target, key, receiver)),\n    set: (target, key, value, receiver) => {\n        const oldValue = target[key];\n        if (isRef(oldValue) && !isRef(value)) {\n            oldValue.value = value;\n            return true;\n        }\n        else {\n            return Reflect.set(target, key, value, receiver);\n        }\n    }\n};\nfunction proxyRefs(objectWithRefs) {\n    return isReactive(objectWithRefs)\n        ? objectWithRefs\n        : new Proxy(objectWithRefs, shallowUnwrapHandlers);\n}\nclass CustomRefImpl {\n    constructor(factory) {\n        this.dep = undefined;\n        this.__v_isRef = true;\n        const { get, set } = factory(() => trackRefValue(this), () => triggerRefValue(this));\n        this._get = get;\n        this._set = set;\n    }\n    get value() {\n        return this._get();\n    }\n    set value(newVal) {\n        this._set(newVal);\n    }\n}\nfunction customRef(factory) {\n    return new CustomRefImpl(factory);\n}\nfunction toRefs(object) {\n    if ((process.env.NODE_ENV !== 'production') && !isProxy(object)) {\n        console.warn(`toRefs() expects a reactive object but received a plain one.`);\n    }\n    const ret = isArray(object) ? new Array(object.length) : {};\n    for (const key in object) {\n        ret[key] = toRef(object, key);\n    }\n    return ret;\n}\nclass ObjectRefImpl {\n    constructor(_object, _key, _defaultValue) {\n        this._object = _object;\n        this._key = _key;\n        this._defaultValue = _defaultValue;\n        this.__v_isRef = true;\n    }\n    get value() {\n        const val = this._object[this._key];\n        return val === undefined ? this._defaultValue : val;\n    }\n    set value(newVal) {\n        this._object[this._key] = newVal;\n    }\n    get dep() {\n        return getDepFromReactive(toRaw(this._object), this._key);\n    }\n}\nfunction toRef(object, key, defaultValue) {\n    const val = object[key];\n    return isRef(val)\n        ? val\n        : new ObjectRefImpl(object, key, defaultValue);\n}\n\nvar _a$1;\nclass ComputedRefImpl {\n    constructor(getter, _setter, isReadonly, isSSR) {\n        this._setter = _setter;\n        this.dep = undefined;\n        this.__v_isRef = true;\n        this[_a$1] = false;\n        this._dirty = true;\n        this.effect = new ReactiveEffect(getter, () => {\n            if (!this._dirty) {\n                this._dirty = true;\n                triggerRefValue(this);\n            }\n        });\n        this.effect.computed = this;\n        this.effect.active = this._cacheable = !isSSR;\n        this[\"__v_isReadonly\" /* ReactiveFlags.IS_READONLY */] = isReadonly;\n    }\n    get value() {\n        // the computed ref may get wrapped by other proxies e.g. readonly() #3376\n        const self = toRaw(this);\n        trackRefValue(self);\n        if (self._dirty || !self._cacheable) {\n            self._dirty = false;\n            self._value = self.effect.run();\n        }\n        return self._value;\n    }\n    set value(newValue) {\n        this._setter(newValue);\n    }\n}\n_a$1 = \"__v_isReadonly\" /* ReactiveFlags.IS_READONLY */;\nfunction computed(getterOrOptions, debugOptions, isSSR = false) {\n    let getter;\n    let setter;\n    const onlyGetter = isFunction(getterOrOptions);\n    if (onlyGetter) {\n        getter = getterOrOptions;\n        setter = (process.env.NODE_ENV !== 'production')\n            ? () => {\n                console.warn('Write operation failed: computed value is readonly');\n            }\n            : NOOP;\n    }\n    else {\n        getter = getterOrOptions.get;\n        setter = getterOrOptions.set;\n    }\n    const cRef = new ComputedRefImpl(getter, setter, onlyGetter || !setter, isSSR);\n    if ((process.env.NODE_ENV !== 'production') && debugOptions && !isSSR) {\n        cRef.effect.onTrack = debugOptions.onTrack;\n        cRef.effect.onTrigger = debugOptions.onTrigger;\n    }\n    return cRef;\n}\n\nvar _a;\nconst tick = /*#__PURE__*/ Promise.resolve();\nconst queue = [];\nlet queued = false;\nconst scheduler = (fn) => {\n    queue.push(fn);\n    if (!queued) {\n        queued = true;\n        tick.then(flush);\n    }\n};\nconst flush = () => {\n    for (let i = 0; i < queue.length; i++) {\n        queue[i]();\n    }\n    queue.length = 0;\n    queued = false;\n};\nclass DeferredComputedRefImpl {\n    constructor(getter) {\n        this.dep = undefined;\n        this._dirty = true;\n        this.__v_isRef = true;\n        this[_a] = true;\n        let compareTarget;\n        let hasCompareTarget = false;\n        let scheduled = false;\n        this.effect = new ReactiveEffect(getter, (computedTrigger) => {\n            if (this.dep) {\n                if (computedTrigger) {\n                    compareTarget = this._value;\n                    hasCompareTarget = true;\n                }\n                else if (!scheduled) {\n                    const valueToCompare = hasCompareTarget ? compareTarget : this._value;\n                    scheduled = true;\n                    hasCompareTarget = false;\n                    scheduler(() => {\n                        if (this.effect.active && this._get() !== valueToCompare) {\n                            triggerRefValue(this);\n                        }\n                        scheduled = false;\n                    });\n                }\n                // chained upstream computeds are notified synchronously to ensure\n                // value invalidation in case of sync access; normal effects are\n                // deferred to be triggered in scheduler.\n                for (const e of this.dep) {\n                    if (e.computed instanceof DeferredComputedRefImpl) {\n                        e.scheduler(true /* computedTrigger */);\n                    }\n                }\n            }\n            this._dirty = true;\n        });\n        this.effect.computed = this;\n    }\n    _get() {\n        if (this._dirty) {\n            this._dirty = false;\n            return (this._value = this.effect.run());\n        }\n        return this._value;\n    }\n    get value() {\n        trackRefValue(this);\n        // the computed ref may get wrapped by other proxies e.g. readonly() #3376\n        return toRaw(this)._get();\n    }\n}\n_a = \"__v_isReadonly\" /* ReactiveFlags.IS_READONLY */;\nfunction deferredComputed(getter) {\n    return new DeferredComputedRefImpl(getter);\n}\n\nexport { EffectScope, ITERATE_KEY, ReactiveEffect, computed, customRef, deferredComputed, effect, effectScope, enableTracking, getCurrentScope, isProxy, isReactive, isReadonly, isRef, isShallow, markRaw, onScopeDispose, pauseTracking, proxyRefs, reactive, readonly, ref, resetTracking, shallowReactive, shallowReadonly, shallowRef, stop, toRaw, toRef, toRefs, track, trigger, triggerRef, unref };\n", "/**\n * Make a map and return a function for checking if a key\n * is in that map.\n * IMPORTANT: all calls of this function must be prefixed with\n * \\/\\*#\\_\\_PURE\\_\\_\\*\\/\n * So that rollup can tree-shake them if necessary.\n */\nfunction makeMap(str, expectsLowerCase) {\n    const map = Object.create(null);\n    const list = str.split(',');\n    for (let i = 0; i < list.length; i++) {\n        map[list[i]] = true;\n    }\n    return expectsLowerCase ? val => !!map[val.toLowerCase()] : val => !!map[val];\n}\n\n/**\n * dev only flag -> name mapping\n */\nconst PatchFlagNames = {\n    [1 /* PatchFlags.TEXT */]: `TEXT`,\n    [2 /* PatchFlags.CLASS */]: `CLASS`,\n    [4 /* PatchFlags.STYLE */]: `STYLE`,\n    [8 /* PatchFlags.PROPS */]: `PROPS`,\n    [16 /* PatchFlags.FULL_PROPS */]: `FULL_PROPS`,\n    [32 /* PatchFlags.HYDRATE_EVENTS */]: `HYDRATE_EVENTS`,\n    [64 /* PatchFlags.STABLE_FRAGMENT */]: `STABLE_FRAGMENT`,\n    [128 /* PatchFlags.KEYED_FRAGMENT */]: `KEYED_FRAGMENT`,\n    [256 /* PatchFlags.UNKEYED_FRAGMENT */]: `UNKEYED_FRAGMENT`,\n    [512 /* PatchFlags.NEED_PATCH */]: `NEED_PATCH`,\n    [1024 /* PatchFlags.DYNAMIC_SLOTS */]: `DYNAMIC_SLOTS`,\n    [2048 /* PatchFlags.DEV_ROOT_FRAGMENT */]: `DEV_ROOT_FRAGMENT`,\n    [-1 /* PatchFlags.HOISTED */]: `HOISTED`,\n    [-2 /* PatchFlags.BAIL */]: `BAIL`\n};\n\n/**\n * Dev only\n */\nconst slotFlagsText = {\n    [1 /* SlotFlags.STABLE */]: 'STABLE',\n    [2 /* SlotFlags.DYNAMIC */]: 'DYNAMIC',\n    [3 /* SlotFlags.FORWARDED */]: 'FORWARDED'\n};\n\nconst GLOBALS_WHITE_LISTED = 'Infinity,undefined,NaN,isFinite,isNaN,parseFloat,parseInt,decodeURI,' +\n    'decodeURIComponent,encodeURI,encodeURIComponent,Math,Number,Date,Array,' +\n    'Object,Boolean,String,RegExp,Map,Set,JSON,Intl,BigInt';\nconst isGloballyWhitelisted = /*#__PURE__*/ makeMap(GLOBALS_WHITE_LISTED);\n\nconst range = 2;\nfunction generateCodeFrame(source, start = 0, end = source.length) {\n    // Split the content into individual lines but capture the newline sequence\n    // that separated each line. This is important because the actual sequence is\n    // needed to properly take into account the full line length for offset\n    // comparison\n    let lines = source.split(/(\\r?\\n)/);\n    // Separate the lines and newline sequences into separate arrays for easier referencing\n    const newlineSequences = lines.filter((_, idx) => idx % 2 === 1);\n    lines = lines.filter((_, idx) => idx % 2 === 0);\n    let count = 0;\n    const res = [];\n    for (let i = 0; i < lines.length; i++) {\n        count +=\n            lines[i].length +\n                ((newlineSequences[i] && newlineSequences[i].length) || 0);\n        if (count >= start) {\n            for (let j = i - range; j <= i + range || end > count; j++) {\n                if (j < 0 || j >= lines.length)\n                    continue;\n                const line = j + 1;\n                res.push(`${line}${' '.repeat(Math.max(3 - String(line).length, 0))}|  ${lines[j]}`);\n                const lineLength = lines[j].length;\n                const newLineSeqLength = (newlineSequences[j] && newlineSequences[j].length) || 0;\n                if (j === i) {\n                    // push underline\n                    const pad = start - (count - (lineLength + newLineSeqLength));\n                    const length = Math.max(1, end > count ? lineLength - pad : end - start);\n                    res.push(`   |  ` + ' '.repeat(pad) + '^'.repeat(length));\n                }\n                else if (j > i) {\n                    if (end > count) {\n                        const length = Math.max(Math.min(end - count, lineLength), 1);\n                        res.push(`   |  ` + '^'.repeat(length));\n                    }\n                    count += lineLength + newLineSeqLength;\n                }\n            }\n            break;\n        }\n    }\n    return res.join('\\n');\n}\n\nfunction normalizeStyle(value) {\n    if (isArray(value)) {\n        const res = {};\n        for (let i = 0; i < value.length; i++) {\n            const item = value[i];\n            const normalized = isString(item)\n                ? parseStringStyle(item)\n                : normalizeStyle(item);\n            if (normalized) {\n                for (const key in normalized) {\n                    res[key] = normalized[key];\n                }\n            }\n        }\n        return res;\n    }\n    else if (isString(value)) {\n        return value;\n    }\n    else if (isObject(value)) {\n        return value;\n    }\n}\nconst listDelimiterRE = /;(?![^(]*\\))/g;\nconst propertyDelimiterRE = /:([^]+)/;\nconst styleCommentRE = /\\/\\*.*?\\*\\//gs;\nfunction parseStringStyle(cssText) {\n    const ret = {};\n    cssText\n        .replace(styleCommentRE, '')\n        .split(listDelimiterRE)\n        .forEach(item => {\n        if (item) {\n            const tmp = item.split(propertyDelimiterRE);\n            tmp.length > 1 && (ret[tmp[0].trim()] = tmp[1].trim());\n        }\n    });\n    return ret;\n}\nfunction stringifyStyle(styles) {\n    let ret = '';\n    if (!styles || isString(styles)) {\n        return ret;\n    }\n    for (const key in styles) {\n        const value = styles[key];\n        const normalizedKey = key.startsWith(`--`) ? key : hyphenate(key);\n        if (isString(value) || typeof value === 'number') {\n            // only render valid values\n            ret += `${normalizedKey}:${value};`;\n        }\n    }\n    return ret;\n}\nfunction normalizeClass(value) {\n    let res = '';\n    if (isString(value)) {\n        res = value;\n    }\n    else if (isArray(value)) {\n        for (let i = 0; i < value.length; i++) {\n            const normalized = normalizeClass(value[i]);\n            if (normalized) {\n                res += normalized + ' ';\n            }\n        }\n    }\n    else if (isObject(value)) {\n        for (const name in value) {\n            if (value[name]) {\n                res += name + ' ';\n            }\n        }\n    }\n    return res.trim();\n}\nfunction normalizeProps(props) {\n    if (!props)\n        return null;\n    let { class: klass, style } = props;\n    if (klass && !isString(klass)) {\n        props.class = normalizeClass(klass);\n    }\n    if (style) {\n        props.style = normalizeStyle(style);\n    }\n    return props;\n}\n\n// These tag configs are shared between compiler-dom and runtime-dom, so they\n// https://developer.mozilla.org/en-US/docs/Web/HTML/Element\nconst HTML_TAGS = 'html,body,base,head,link,meta,style,title,address,article,aside,footer,' +\n    'header,hgroup,h1,h2,h3,h4,h5,h6,nav,section,div,dd,dl,dt,figcaption,' +\n    'figure,picture,hr,img,li,main,ol,p,pre,ul,a,b,abbr,bdi,bdo,br,cite,code,' +\n    'data,dfn,em,i,kbd,mark,q,rp,rt,ruby,s,samp,small,span,strong,sub,sup,' +\n    'time,u,var,wbr,area,audio,map,track,video,embed,object,param,source,' +\n    'canvas,script,noscript,del,ins,caption,col,colgroup,table,thead,tbody,td,' +\n    'th,tr,button,datalist,fieldset,form,input,label,legend,meter,optgroup,' +\n    'option,output,progress,select,textarea,details,dialog,menu,' +\n    'summary,template,blockquote,iframe,tfoot';\n// https://developer.mozilla.org/en-US/docs/Web/SVG/Element\nconst SVG_TAGS = 'svg,animate,animateMotion,animateTransform,circle,clipPath,color-profile,' +\n    'defs,desc,discard,ellipse,feBlend,feColorMatrix,feComponentTransfer,' +\n    'feComposite,feConvolveMatrix,feDiffuseLighting,feDisplacementMap,' +\n    'feDistantLight,feDropShadow,feFlood,feFuncA,feFuncB,feFuncG,feFuncR,' +\n    'feGaussianBlur,feImage,feMerge,feMergeNode,feMorphology,feOffset,' +\n    'fePointLight,feSpecularLighting,feSpotLight,feTile,feTurbulence,filter,' +\n    'foreignObject,g,hatch,hatchpath,image,line,linearGradient,marker,mask,' +\n    'mesh,meshgradient,meshpatch,meshrow,metadata,mpath,path,pattern,' +\n    'polygon,polyline,radialGradient,rect,set,solidcolor,stop,switch,symbol,' +\n    'text,textPath,title,tspan,unknown,use,view';\nconst VOID_TAGS = 'area,base,br,col,embed,hr,img,input,link,meta,param,source,track,wbr';\n/**\n * Compiler only.\n * Do NOT use in runtime code paths unless behind `(process.env.NODE_ENV !== 'production')` flag.\n */\nconst isHTMLTag = /*#__PURE__*/ makeMap(HTML_TAGS);\n/**\n * Compiler only.\n * Do NOT use in runtime code paths unless behind `(process.env.NODE_ENV !== 'production')` flag.\n */\nconst isSVGTag = /*#__PURE__*/ makeMap(SVG_TAGS);\n/**\n * Compiler only.\n * Do NOT use in runtime code paths unless behind `(process.env.NODE_ENV !== 'production')` flag.\n */\nconst isVoidTag = /*#__PURE__*/ makeMap(VOID_TAGS);\n\n/**\n * On the client we only need to offer special cases for boolean attributes that\n * have different names from their corresponding dom properties:\n * - itemscope -> N/A\n * - allowfullscreen -> allowFullscreen\n * - formnovalidate -> formNoValidate\n * - ismap -> isMap\n * - nomodule -> noModule\n * - novalidate -> noValidate\n * - readonly -> readOnly\n */\nconst specialBooleanAttrs = `itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly`;\nconst isSpecialBooleanAttr = /*#__PURE__*/ makeMap(specialBooleanAttrs);\n/**\n * The full list is needed during SSR to produce the correct initial markup.\n */\nconst isBooleanAttr = /*#__PURE__*/ makeMap(specialBooleanAttrs +\n    `,async,autofocus,autoplay,controls,default,defer,disabled,hidden,` +\n    `loop,open,required,reversed,scoped,seamless,` +\n    `checked,muted,multiple,selected`);\n/**\n * Boolean attributes should be included if the value is truthy or ''.\n * e.g. `<select multiple>` compiles to `{ multiple: '' }`\n */\nfunction includeBooleanAttr(value) {\n    return !!value || value === '';\n}\nconst unsafeAttrCharRE = /[>/=\"'\\u0009\\u000a\\u000c\\u0020]/;\nconst attrValidationCache = {};\nfunction isSSRSafeAttrName(name) {\n    if (attrValidationCache.hasOwnProperty(name)) {\n        return attrValidationCache[name];\n    }\n    const isUnsafe = unsafeAttrCharRE.test(name);\n    if (isUnsafe) {\n        console.error(`unsafe attribute name: ${name}`);\n    }\n    return (attrValidationCache[name] = !isUnsafe);\n}\nconst propsToAttrMap = {\n    acceptCharset: 'accept-charset',\n    className: 'class',\n    htmlFor: 'for',\n    httpEquiv: 'http-equiv'\n};\n/**\n * Known attributes, this is used for stringification of runtime static nodes\n * so that we don't stringify bindings that cannot be set from HTML.\n * Don't also forget to allow `data-*` and `aria-*`!\n * Generated from https://developer.mozilla.org/en-US/docs/Web/HTML/Attributes\n */\nconst isKnownHtmlAttr = /*#__PURE__*/ makeMap(`accept,accept-charset,accesskey,action,align,allow,alt,async,` +\n    `autocapitalize,autocomplete,autofocus,autoplay,background,bgcolor,` +\n    `border,buffered,capture,challenge,charset,checked,cite,class,code,` +\n    `codebase,color,cols,colspan,content,contenteditable,contextmenu,controls,` +\n    `coords,crossorigin,csp,data,datetime,decoding,default,defer,dir,dirname,` +\n    `disabled,download,draggable,dropzone,enctype,enterkeyhint,for,form,` +\n    `formaction,formenctype,formmethod,formnovalidate,formtarget,headers,` +\n    `height,hidden,high,href,hreflang,http-equiv,icon,id,importance,integrity,` +\n    `ismap,itemprop,keytype,kind,label,lang,language,loading,list,loop,low,` +\n    `manifest,max,maxlength,minlength,media,min,multiple,muted,name,novalidate,` +\n    `open,optimum,pattern,ping,placeholder,poster,preload,radiogroup,readonly,` +\n    `referrerpolicy,rel,required,reversed,rows,rowspan,sandbox,scope,scoped,` +\n    `selected,shape,size,sizes,slot,span,spellcheck,src,srcdoc,srclang,srcset,` +\n    `start,step,style,summary,tabindex,target,title,translate,type,usemap,` +\n    `value,width,wrap`);\n/**\n * Generated from https://developer.mozilla.org/en-US/docs/Web/SVG/Attribute\n */\nconst isKnownSvgAttr = /*#__PURE__*/ makeMap(`xmlns,accent-height,accumulate,additive,alignment-baseline,alphabetic,amplitude,` +\n    `arabic-form,ascent,attributeName,attributeType,azimuth,baseFrequency,` +\n    `baseline-shift,baseProfile,bbox,begin,bias,by,calcMode,cap-height,class,` +\n    `clip,clipPathUnits,clip-path,clip-rule,color,color-interpolation,` +\n    `color-interpolation-filters,color-profile,color-rendering,` +\n    `contentScriptType,contentStyleType,crossorigin,cursor,cx,cy,d,decelerate,` +\n    `descent,diffuseConstant,direction,display,divisor,dominant-baseline,dur,dx,` +\n    `dy,edgeMode,elevation,enable-background,end,exponent,fill,fill-opacity,` +\n    `fill-rule,filter,filterRes,filterUnits,flood-color,flood-opacity,` +\n    `font-family,font-size,font-size-adjust,font-stretch,font-style,` +\n    `font-variant,font-weight,format,from,fr,fx,fy,g1,g2,glyph-name,` +\n    `glyph-orientation-horizontal,glyph-orientation-vertical,glyphRef,` +\n    `gradientTransform,gradientUnits,hanging,height,href,hreflang,horiz-adv-x,` +\n    `horiz-origin-x,id,ideographic,image-rendering,in,in2,intercept,k,k1,k2,k3,` +\n    `k4,kernelMatrix,kernelUnitLength,kerning,keyPoints,keySplines,keyTimes,` +\n    `lang,lengthAdjust,letter-spacing,lighting-color,limitingConeAngle,local,` +\n    `marker-end,marker-mid,marker-start,markerHeight,markerUnits,markerWidth,` +\n    `mask,maskContentUnits,maskUnits,mathematical,max,media,method,min,mode,` +\n    `name,numOctaves,offset,opacity,operator,order,orient,orientation,origin,` +\n    `overflow,overline-position,overline-thickness,panose-1,paint-order,path,` +\n    `pathLength,patternContentUnits,patternTransform,patternUnits,ping,` +\n    `pointer-events,points,pointsAtX,pointsAtY,pointsAtZ,preserveAlpha,` +\n    `preserveAspectRatio,primitiveUnits,r,radius,referrerPolicy,refX,refY,rel,` +\n    `rendering-intent,repeatCount,repeatDur,requiredExtensions,requiredFeatures,` +\n    `restart,result,rotate,rx,ry,scale,seed,shape-rendering,slope,spacing,` +\n    `specularConstant,specularExponent,speed,spreadMethod,startOffset,` +\n    `stdDeviation,stemh,stemv,stitchTiles,stop-color,stop-opacity,` +\n    `strikethrough-position,strikethrough-thickness,string,stroke,` +\n    `stroke-dasharray,stroke-dashoffset,stroke-linecap,stroke-linejoin,` +\n    `stroke-miterlimit,stroke-opacity,stroke-width,style,surfaceScale,` +\n    `systemLanguage,tabindex,tableValues,target,targetX,targetY,text-anchor,` +\n    `text-decoration,text-rendering,textLength,to,transform,transform-origin,` +\n    `type,u1,u2,underline-position,underline-thickness,unicode,unicode-bidi,` +\n    `unicode-range,units-per-em,v-alphabetic,v-hanging,v-ideographic,` +\n    `v-mathematical,values,vector-effect,version,vert-adv-y,vert-origin-x,` +\n    `vert-origin-y,viewBox,viewTarget,visibility,width,widths,word-spacing,` +\n    `writing-mode,x,x-height,x1,x2,xChannelSelector,xlink:actuate,xlink:arcrole,` +\n    `xlink:href,xlink:role,xlink:show,xlink:title,xlink:type,xml:base,xml:lang,` +\n    `xml:space,y,y1,y2,yChannelSelector,z,zoomAndPan`);\n\nconst escapeRE = /[\"'&<>]/;\nfunction escapeHtml(string) {\n    const str = '' + string;\n    const match = escapeRE.exec(str);\n    if (!match) {\n        return str;\n    }\n    let html = '';\n    let escaped;\n    let index;\n    let lastIndex = 0;\n    for (index = match.index; index < str.length; index++) {\n        switch (str.charCodeAt(index)) {\n            case 34: // \"\n                escaped = '&quot;';\n                break;\n            case 38: // &\n                escaped = '&amp;';\n                break;\n            case 39: // '\n                escaped = '&#39;';\n                break;\n            case 60: // <\n                escaped = '&lt;';\n                break;\n            case 62: // >\n                escaped = '&gt;';\n                break;\n            default:\n                continue;\n        }\n        if (lastIndex !== index) {\n            html += str.slice(lastIndex, index);\n        }\n        lastIndex = index + 1;\n        html += escaped;\n    }\n    return lastIndex !== index ? html + str.slice(lastIndex, index) : html;\n}\n// https://www.w3.org/TR/html52/syntax.html#comments\nconst commentStripRE = /^-?>|<!--|-->|--!>|<!-$/g;\nfunction escapeHtmlComment(src) {\n    return src.replace(commentStripRE, '');\n}\n\nfunction looseCompareArrays(a, b) {\n    if (a.length !== b.length)\n        return false;\n    let equal = true;\n    for (let i = 0; equal && i < a.length; i++) {\n        equal = looseEqual(a[i], b[i]);\n    }\n    return equal;\n}\nfunction looseEqual(a, b) {\n    if (a === b)\n        return true;\n    let aValidType = isDate(a);\n    let bValidType = isDate(b);\n    if (aValidType || bValidType) {\n        return aValidType && bValidType ? a.getTime() === b.getTime() : false;\n    }\n    aValidType = isSymbol(a);\n    bValidType = isSymbol(b);\n    if (aValidType || bValidType) {\n        return a === b;\n    }\n    aValidType = isArray(a);\n    bValidType = isArray(b);\n    if (aValidType || bValidType) {\n        return aValidType && bValidType ? looseCompareArrays(a, b) : false;\n    }\n    aValidType = isObject(a);\n    bValidType = isObject(b);\n    if (aValidType || bValidType) {\n        /* istanbul ignore if: this if will probably never be called */\n        if (!aValidType || !bValidType) {\n            return false;\n        }\n        const aKeysCount = Object.keys(a).length;\n        const bKeysCount = Object.keys(b).length;\n        if (aKeysCount !== bKeysCount) {\n            return false;\n        }\n        for (const key in a) {\n            const aHasKey = a.hasOwnProperty(key);\n            const bHasKey = b.hasOwnProperty(key);\n            if ((aHasKey && !bHasKey) ||\n                (!aHasKey && bHasKey) ||\n                !looseEqual(a[key], b[key])) {\n                return false;\n            }\n        }\n    }\n    return String(a) === String(b);\n}\nfunction looseIndexOf(arr, val) {\n    return arr.findIndex(item => looseEqual(item, val));\n}\n\n/**\n * For converting {{ interpolation }} values to displayed strings.\n * @private\n */\nconst toDisplayString = (val) => {\n    return isString(val)\n        ? val\n        : val == null\n            ? ''\n            : isArray(val) ||\n                (isObject(val) &&\n                    (val.toString === objectToString || !isFunction(val.toString)))\n                ? JSON.stringify(val, replacer, 2)\n                : String(val);\n};\nconst replacer = (_key, val) => {\n    // can't use isRef here since @vue/shared has no deps\n    if (val && val.__v_isRef) {\n        return replacer(_key, val.value);\n    }\n    else if (isMap(val)) {\n        return {\n            [`Map(${val.size})`]: [...val.entries()].reduce((entries, [key, val]) => {\n                entries[`${key} =>`] = val;\n                return entries;\n            }, {})\n        };\n    }\n    else if (isSet(val)) {\n        return {\n            [`Set(${val.size})`]: [...val.values()]\n        };\n    }\n    else if (isObject(val) && !isArray(val) && !isPlainObject(val)) {\n        return String(val);\n    }\n    return val;\n};\n\nconst EMPTY_OBJ = (process.env.NODE_ENV !== 'production')\n    ? Object.freeze({})\n    : {};\nconst EMPTY_ARR = (process.env.NODE_ENV !== 'production') ? Object.freeze([]) : [];\nconst NOOP = () => { };\n/**\n * Always return false.\n */\nconst NO = () => false;\nconst onRE = /^on[^a-z]/;\nconst isOn = (key) => onRE.test(key);\nconst isModelListener = (key) => key.startsWith('onUpdate:');\nconst extend = Object.assign;\nconst remove = (arr, el) => {\n    const i = arr.indexOf(el);\n    if (i > -1) {\n        arr.splice(i, 1);\n    }\n};\nconst hasOwnProperty = Object.prototype.hasOwnProperty;\nconst hasOwn = (val, key) => hasOwnProperty.call(val, key);\nconst isArray = Array.isArray;\nconst isMap = (val) => toTypeString(val) === '[object Map]';\nconst isSet = (val) => toTypeString(val) === '[object Set]';\nconst isDate = (val) => toTypeString(val) === '[object Date]';\nconst isRegExp = (val) => toTypeString(val) === '[object RegExp]';\nconst isFunction = (val) => typeof val === 'function';\nconst isString = (val) => typeof val === 'string';\nconst isSymbol = (val) => typeof val === 'symbol';\nconst isObject = (val) => val !== null && typeof val === 'object';\nconst isPromise = (val) => {\n    return isObject(val) && isFunction(val.then) && isFunction(val.catch);\n};\nconst objectToString = Object.prototype.toString;\nconst toTypeString = (value) => objectToString.call(value);\nconst toRawType = (value) => {\n    // extract \"RawType\" from strings like \"[object RawType]\"\n    return toTypeString(value).slice(8, -1);\n};\nconst isPlainObject = (val) => toTypeString(val) === '[object Object]';\nconst isIntegerKey = (key) => isString(key) &&\n    key !== 'NaN' &&\n    key[0] !== '-' &&\n    '' + parseInt(key, 10) === key;\nconst isReservedProp = /*#__PURE__*/ makeMap(\n// the leading comma is intentional so empty string \"\" is also included\n',key,ref,ref_for,ref_key,' +\n    'onVnodeBeforeMount,onVnodeMounted,' +\n    'onVnodeBeforeUpdate,onVnodeUpdated,' +\n    'onVnodeBeforeUnmount,onVnodeUnmounted');\nconst isBuiltInDirective = /*#__PURE__*/ makeMap('bind,cloak,else-if,else,for,html,if,model,on,once,pre,show,slot,text,memo');\nconst cacheStringFunction = (fn) => {\n    const cache = Object.create(null);\n    return ((str) => {\n        const hit = cache[str];\n        return hit || (cache[str] = fn(str));\n    });\n};\nconst camelizeRE = /-(\\w)/g;\n/**\n * @private\n */\nconst camelize = cacheStringFunction((str) => {\n    return str.replace(camelizeRE, (_, c) => (c ? c.toUpperCase() : ''));\n});\nconst hyphenateRE = /\\B([A-Z])/g;\n/**\n * @private\n */\nconst hyphenate = cacheStringFunction((str) => str.replace(hyphenateRE, '-$1').toLowerCase());\n/**\n * @private\n */\nconst capitalize = cacheStringFunction((str) => str.charAt(0).toUpperCase() + str.slice(1));\n/**\n * @private\n */\nconst toHandlerKey = cacheStringFunction((str) => str ? `on${capitalize(str)}` : ``);\n// compare whether a value has changed, accounting for NaN.\nconst hasChanged = (value, oldValue) => !Object.is(value, oldValue);\nconst invokeArrayFns = (fns, arg) => {\n    for (let i = 0; i < fns.length; i++) {\n        fns[i](arg);\n    }\n};\nconst def = (obj, key, value) => {\n    Object.defineProperty(obj, key, {\n        configurable: true,\n        enumerable: false,\n        value\n    });\n};\n/**\n * \"123-foo\" will be parsed to 123\n * This is used for the .number modifier in v-model\n */\nconst looseToNumber = (val) => {\n    const n = parseFloat(val);\n    return isNaN(n) ? val : n;\n};\n/**\n * Only conerces number-like strings\n * \"123-foo\" will be returned as-is\n */\nconst toNumber = (val) => {\n    const n = isString(val) ? Number(val) : NaN;\n    return isNaN(n) ? val : n;\n};\nlet _globalThis;\nconst getGlobalThis = () => {\n    return (_globalThis ||\n        (_globalThis =\n            typeof globalThis !== 'undefined'\n                ? globalThis\n                : typeof self !== 'undefined'\n                    ? self\n                    : typeof window !== 'undefined'\n                        ? window\n                        : typeof global !== 'undefined'\n                            ? global\n                            : {}));\n};\nconst identRE = /^[_$a-zA-Z\\xA0-\\uFFFF][_$a-zA-Z0-9\\xA0-\\uFFFF]*$/;\nfunction genPropsAccessExp(name) {\n    return identRE.test(name)\n        ? `__props.${name}`\n        : `__props[${JSON.stringify(name)}]`;\n}\n\nexport { EMPTY_ARR, EMPTY_OBJ, NO, NOOP, PatchFlagNames, camelize, capitalize, def, escapeHtml, escapeHtmlComment, extend, genPropsAccessExp, generateCodeFrame, getGlobalThis, hasChanged, hasOwn, hyphenate, includeBooleanAttr, invokeArrayFns, isArray, isBooleanAttr, isBuiltInDirective, isDate, isFunction, isGloballyWhitelisted, isHTMLTag, isIntegerKey, isKnownHtmlAttr, isKnownSvgAttr, isMap, isModelListener, isObject, isOn, isPlainObject, isPromise, isRegExp, isReservedProp, isSSRSafeAttrName, isSVGTag, isSet, isSpecialBooleanAttr, isString, isSymbol, isVoidTag, looseEqual, looseIndexOf, looseToNumber, makeMap, normalizeClass, normalizeProps, normalizeStyle, objectToString, parseStringStyle, propsToAttrMap, remove, slotFlagsText, stringifyStyle, toDisplayString, toHandlerKey, toNumber, toRawType, toTypeString };\n", "// src/index.ts\nimport { ReactiveEffect, isReactive, isRef, isShallow } from \"@vue/reactivity\";\nimport { NOOP, hasChanged, isArray, isFunction as isFunction2, isObject } from \"@vue/shared\";\n\n// src/errorHandling.ts\nimport { isFunction, isPromise } from \"@vue/shared\";\nfunction callWithErrorHandling(fn, type, args) {\n  let res;\n  try {\n    res = args ? fn(...args) : fn();\n  } catch (err) {\n    handleError(err, type);\n  }\n  return res;\n}\nfunction callWithAsyncErrorHandling(fn, type, args) {\n  if (isFunction(fn)) {\n    const res = callWithErrorHandling(fn, type, args);\n    if (res && isPromise(res)) {\n      res.catch((err) => {\n        handleError(err, type);\n      });\n    }\n    return res;\n  }\n  const values = [];\n  for (let i = 0; i < fn.length; i++)\n    values.push(callWithAsyncErrorHandling(fn[i], type, args));\n  return values;\n}\nfunction handleError(err, type) {\n  console.error(new Error(`[@vue-reactivity/watch]: ${type}`));\n  console.error(err);\n}\nfunction warn(message) {\n  console.warn(createError(message));\n}\nfunction createError(message) {\n  return new Error(`[reactivue]: ${message}`);\n}\n\n// src/index.ts\nvar INITIAL_WATCHER_VALUE = {};\nfunction watchEffect(effect, options) {\n  return doWatch(effect, null, options);\n}\nfunction watch(source, cb, options) {\n  return doWatch(source, cb, options);\n}\nfunction doWatch(source, cb, { immediate, deep, flush } = {}) {\n  let getter;\n  let forceTrigger = false;\n  let isMultiSource = false;\n  if (isRef(source)) {\n    getter = () => source.value;\n    forceTrigger = isShallow(source);\n  } else if (isReactive(source)) {\n    getter = () => source;\n    deep = true;\n  } else if (isArray(source)) {\n    isMultiSource = true;\n    forceTrigger = source.some(isReactive);\n    getter = () => source.map((s) => {\n      if (isRef(s))\n        return s.value;\n      else if (isReactive(s))\n        return traverse(s);\n      else if (isFunction2(s))\n        return callWithErrorHandling(s, \"watch getter\");\n      else\n        return warn(\"invalid source\");\n    });\n  } else if (isFunction2(source)) {\n    if (cb) {\n      getter = () => callWithErrorHandling(source, \"watch getter\");\n    } else {\n      getter = () => {\n        if (cleanup)\n          cleanup();\n        return callWithAsyncErrorHandling(source, \"watch callback\", [onCleanup]);\n      };\n    }\n  } else {\n    getter = NOOP;\n  }\n  if (cb && deep) {\n    const baseGetter = getter;\n    getter = () => traverse(baseGetter());\n  }\n  let cleanup;\n  let onCleanup = (fn) => {\n    cleanup = effect.onStop = () => {\n      callWithErrorHandling(fn, \"watch cleanup\");\n    };\n  };\n  let oldValue = isMultiSource ? [] : INITIAL_WATCHER_VALUE;\n  const job = () => {\n    if (!effect.active)\n      return;\n    if (cb) {\n      const newValue = effect.run();\n      if (deep || forceTrigger || (isMultiSource ? newValue.some((v, i) => hasChanged(v, oldValue[i])) : hasChanged(newValue, oldValue))) {\n        if (cleanup)\n          cleanup();\n        callWithAsyncErrorHandling(cb, \"watch value\", [\n          newValue,\n          oldValue === INITIAL_WATCHER_VALUE ? void 0 : oldValue,\n          onCleanup\n        ]);\n        oldValue = newValue;\n      }\n    } else {\n      effect.run();\n    }\n  };\n  job.allowRecurse = !!cb;\n  let scheduler;\n  if (flush === \"sync\") {\n    scheduler = job;\n  } else {\n    scheduler = () => {\n      job();\n    };\n  }\n  const effect = new ReactiveEffect(getter, scheduler);\n  if (cb) {\n    if (immediate)\n      job();\n    else\n      oldValue = effect.run();\n  } else {\n    effect.run();\n  }\n  return () => effect.stop();\n}\nfunction traverse(value, seen = /* @__PURE__ */ new Set()) {\n  if (!isObject(value) || seen.has(value))\n    return value;\n  seen.add(value);\n  if (isArray(value)) {\n    for (let i = 0; i < value.length; i++)\n      traverse(value[i], seen);\n  } else if (value instanceof Map) {\n    value.forEach((_, key) => {\n      traverse(value.get(key), seen);\n    });\n  } else if (value instanceof Set) {\n    value.forEach((v) => {\n      traverse(v, seen);\n    });\n  } else {\n    for (const key of Object.keys(value))\n      traverse(value[key], seen);\n  }\n  return value;\n}\nexport {\n  watch,\n  watchEffect\n};\n", "/* eslint-disable @typescript-eslint/indent */\n\nimport type { AlgonautConfig } from './AlgonautTypes';\n\n// [parent-window]<->[iframe] communications class\nexport class FrameBus {\n\tready = false;\n\tiniting = false; // for async init w initSrc\n\tdestroying = false;\n\n\t// this iframe\n\twalEl: null | any = null; // should be HTMLIFrameElement but that breaks in a Node env\n\t// container for iframe 3d persp\n\twalElContainer: null | any = null; // should be HTMLIFrameElement but that breaks in a Node env\n\twalWin: null | Window = null;\n\t// need a reference to onMsgHandler since .bind(this) makes a new instance of that method and removeEventListener needs the real thing\n\tonMsgHandler: null | ((event: any) => void) = null; // `event` param should be MessageEvent<any> type, but that breaks in Node env\n\n\trequests = new Map<\n\t\tstring,\n\t\t{\n\t\t\treq: Record<string, any>,\n\t\t\tresolve: (value: any) => void\n\t\t}\n\t>();\n\n\tconstructor(config?:\n\t\tstring | // existing wallElId\n\t\t{\n\t\t\tid?: string, // existing wallElId\n\t\t\tsrc?: string; //\n\t\t\talign?: AlgonautConfig['INKEY_ALIGN']\n\t\t}\n\t) {\n\t\tif (!config) {\n\t\t\tthis.initSrc(); // aka INSERT into DOM\n\t\t} else {\n\t\t\tif (typeof config == 'string') {\n\t\t\t\tthis.initId(config);\n\t\t\t} else if (typeof config == 'object') {\n\t\t\t\tif (config.id) {\n\t\t\t\t\tthis.initId(config.id);\n\t\t\t\t} else if (config.src) {\n\t\t\t\t\tthis.initSrc(config.src, config.align);\n\t\t\t\t} else {\n\t\t\t\t\tconsole.error('err constructing FrameBus');\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tconsole.error('err constructing FrameBus');\n\t\t\t}\n\t\t}\n\n\t\t// catch case where user/script deletes el from DOM, close/reset properly\n\t\tdocument.body.addEventListener('DOMNodeRemoved', (evt) => {\n\t\t\tif (!this.destroying) {\n\t\t\t\tconst removedNode = evt.target;\n\t\t\t\tif (removedNode == this.walElContainer) {\n\t\t\t\t\tconsole.log('iframe container removed from DOM');\n\t\t\t\t\tthis.destroy();\n\t\t\t\t}\n\t\t\t}\n\t\t}, false);\n\t}\n\n\tinitId(walElId: string) {\n\t\tconsole.log('initId');\n\t\tconsole.warn('WARNING: initId is less tested + supported than initSrc...');\n\n\t\tthis.destroy(); // reset\n\n\t\tconst walEl = document.getElementById(walElId) as null | HTMLIFrameElement;\n\t\t// console.log('walEl', walEl);\n\t\tif (!walEl) {\n\t\t\tconsole.error('no walEl');\n\t\t\treturn;\n\t\t}\n\t\tthis.walEl = walEl;\n\n\t\tconst walWin = walEl.contentWindow;\n\t\twalEl.classList.add('inkey-frame');\n\t\t// console.log('walWin', walWin);\n\t\tif (!walWin) {\n\t\t\tconsole.error('no walWin');\n\t\t\treturn;\n\t\t}\n\t\tthis.walWin = walWin;\n\n\t\t// success\n\t\tthis.ready = true;\n\t\tthis.onMsgHandler = this.onMessage.bind(this);\n\t\twindow.addEventListener('message', this.onMsgHandler, false);\n\t}\n\n\t// aka INSERT into DOM\n\tasync initSrc(src = 'http://default-src.com', align?: AlgonautConfig['INKEY_ALIGN']) {\n\t\tconsole.log('initSrc', src);\n\n\t\tconst exEl = document.querySelector('iframe#inkey-frame');\n\t\tif (exEl) {\n\t\t\tconsole.warn('dont mount frame to DOM again');\n\t\t\treturn;\n\t\t}\n\n\t\tthis.destroy(); // reset\n\n\t\tthis.initing = true;\n\n\t\t// make container el (positioning + 3d transform wrapper)\n\t\tconst walElContainer = document.createElement('div');\n\t\twalElContainer.setAttribute('id', 'inkey-frame-container');\n\t\tif (align == 'left') walElContainer.classList.add('align-left');\n\t\tif (align == 'right') walElContainer.classList.add('align-right');\n\n\t\t// make iframe el\n\t\tconst walEl = document.createElement('iframe');\n\t\twalEl.src = src;\n\t\twalEl.classList.add('inkey-frame');\n\t\twalEl.setAttribute('id', 'inkey-frame');\n\t\twalEl.setAttribute('name', 'walFrame');\n\t\twalEl.setAttribute('title', 'Algorand Microwallet');\n\t\twalEl.setAttribute('frameborder', '0');\n\t\twalEl.setAttribute('sandbox', 'allow-scripts allow-same-origin allow-forms allow-modals allow-popups allow-downloads');\n\t\twalEl.setAttribute('allow', 'publickey-credentials-get; clipboard-write');\n\t\t// walEl.setAttribute('allow', 'publickey-credentials-create'); // gah, wish this existed...\n\t\twalEl.style.visibility = 'hidden'; // mount as invisible, real css added later\n\n\t\t// settings locals for easy access for later (should this happen on event listener load? might be safer in case init get caught in strange halfway mounted state)\n\t\tthis.walEl = walEl;\n\t\tthis.walElContainer = walElContainer;\n\t\t// mount el\n\t\twalElContainer.appendChild(walEl);\n\t\tdocument.body.append(walElContainer);\n\n\t\t// get iframe window\n\t\tconst walWin = walEl.contentWindow;\n\t\tif (!walWin) {\n\t\t\tconsole.error('no walWin');\n\t\t\treturn;\n\t\t}\n\t\tthis.walWin = walWin;\n\n\t\twalEl.addEventListener('load', () => {\n\t\t\t// console.log('iframe loaded');\n\n\t\t\t// 100ms delay needed for no glitch on first load\n\t\t\t// setTimeout(() => {\n\t\t\t// \tthis.walEl.style.visibility = 'initial';\n\t\t\t// }, 100);\n\n\t\t\t// success\n\t\t\tthis.ready = true;\n\t\t\tthis.initing = false;\n\t\t\tthis.onMsgHandler = this.onMessage.bind(this);\n\t\t\twindow.addEventListener('message', this.onMsgHandler, false);\n\n\t\t\t// get css styles\n\t\t\tconst data: any = {\n\t\t\t\tsource: 'ncc-inkey-client', // needed\n\t\t\t\ttype: 'get-style-recs', // specific\n\t\t\t};\n\t\t\tthis.emit(data);\n\t\t});\n\t}\n\n\tshowFrame(routepath?: string) {\n\t\tif (this.walEl) {\n\t\t\tthis.walEl.classList.add('visible');\n\n\t\t\t// position toggle fix for old ios mobiles\n\t\t\tthis.walEl.style.position = 'sticky';\n\t\t\tsetTimeout(() => {\n\t\t\t\tthis.walEl.style.position = 'absolute';\n\t\t\t}, 100);\n\n\t\t\tconst data: any = {\n\t\t\t\t// needed\n\t\t\t\tsource: 'ncc-inkey-client',\n\t\t\t\t// specific\n\t\t\t\ttype: 'set-visibility',\n\t\t\t\tpayload: {\n\t\t\t\t\tvisible: true,\n\t\t\t\t\troute: routepath\n\t\t\t\t}\n\t\t\t};\n\t\t\tthis.emit(data);\n\t\t}\n\t}\n\n\thideFrame() {\n\t\tif (this.walEl) {\n\t\t\tthis.walEl.classList.remove('visible');\n\n\t\t\tconst data: any = {\n\t\t\t\t// needed\n\t\t\t\tsource: 'ncc-inkey-client',\n\t\t\t\t// specific\n\t\t\t\ttype: 'set-visibility',\n\t\t\t\tpayload: {\n\t\t\t\t\tvisible: false\n\t\t\t\t}\n\t\t\t};\n\t\t\tthis.emit(data);\n\t\t}\n\t}\n\n\tsetHeight(height: number, unit = 'px') {\n\t\tif (this.walEl) {\n\t\t\tthis.walEl.style.height = `${height}${unit}`;\n\t\t}\n\t}\n\n\tdestroy() {\n\t\t// console.log('destroy FrameBus');\n\t\tthis.destroying = true;\n\n\t\tif (this.walElContainer) {\n\t\t\tif (this.walEl) {\n\t\t\t\tthis.walElContainer.removeChild(this.walEl);\n\t\t\t}\n\t\t\tdocument.body.removeChild(this.walElContainer);\n\t\t\tthis.walElContainer = null;\n\t\t}\n\n\t\tif (this.walEl) {\n\t\t\tthis.walEl = null;\n\t\t}\n\n\t\tif (this.walWin) {\n\t\t\tthis.walWin = null;\n\t\t}\n\n\t\tif (this.onMsgHandler) {\n\t\t\twindow.removeEventListener('message', this.onMsgHandler, false);\n\t\t\tthis.onMsgHandler = null;\n\t\t}\n\n\t\tthis.removeStyles();\n\n\t\t// ? emit some disconnect event over bus before close?\n\n\t\tthis.ready = false;\n\t\tthis.initing = false;\n\t\tthis.destroying = false;\n\t}\n\n\t// async ready for waiting for iframe to mount + load into DOM\n\tasync isReady(): Promise<boolean> {\n\t\treturn new Promise((resolve) => {\n\t\t\tif (this.ready) {\n\t\t\t\tresolve(true);\n\t\t\t} else {\n\t\t\t\tif (this.initing) {\n\t\t\t\t\tconst readyInterval = setInterval(() => {\n\t\t\t\t\t\tconsole.log('isReady intervaling');\n\t\t\t\t\t\tif (this.ready) {\n\t\t\t\t\t\t\tclearInterval(readyInterval);\n\t\t\t\t\t\t\tresolve(true);\n\t\t\t\t\t\t}\n\t\t\t\t\t}, 150);\n\t\t\t\t} else {\n\t\t\t\t\tconsole.warn('do initSrc again');\n\t\t\t\t\tresolve(false);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\n\tpublic setOnDisconnect(f: any) {\n\t\tthis.onDisconnect = f;\n\t}\n\tonDisconnect() {\n\t\tconsole.log('onDisconnect');\n\t}\n\n\tonMessage(event: any) { // should be MessageEvent, but that breaks in a Node env\n\t\t// console.log('client onMess', event);\n\n\t\tif (\n\t\t\tevent.data.source &&\n\t\t\tevent.data.source == 'ncc-inkey-wallet') {\n\t\t\t// event.data.source.substring(0, 4) == 'ncc-') {\n\t\t\t// event.data.source.substring(0, 16) == 'ncc-inkey-wallet') {\n\t\t\tconsole.log('client got mess', event.data);\n\n\t\t\t// handle hide messages\n\t\t\tif (event.data.type === 'hide') {\n\t\t\t\tthis.hideFrame();\n\t\t\t}\n\n\t\t\tif (event.data.type === 'disconnect') {\n\t\t\t\tthis.onDisconnect();\n\t\t\t}\n\n\t\t\tif (event.data.type === 'set-height') {\n\t\t\t\t// console.log('got mess: set-height');\n\t\t\t\tconst h = event.data.payload.height as number;\n\t\t\t\tif (h) {\n\t\t\t\t\tthis.setHeight(h);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (event.data.type == 'styles-recommonded') {\n\t\t\t\tconst css = event.data.payload.css as string;\n\t\t\t\tthis.insertStyles(css);\n\t\t\t}\n\n\n\t\t\t// async message handling back to callee resolver\n\t\t\tif (event.data['async'] && event.data.async == true && event.data.uuid) {\n\t\t\t\t// console.log('requests', this.requests);\n\t\t\t\t// console.log('getting', event.data.uuid);\n\n\t\t\t\tconst outgoing = this.requests.get(event.data.uuid); // \"this\" is still Class scope because of .bind(this)\n\t\t\t\tif (!outgoing) {\n\t\t\t\t\tthrow Error('no outgoing val for event type');\n\t\t\t\t}\n\n\t\t\t\t// clean up garb\n\t\t\t\tthis.requests.delete(event.data.uuid);\n\n\t\t\t\tconst resolve = outgoing.resolve;\n\t\t\t\tresolve(event.data.payload);\n\t\t\t}\n\t\t}\n\t}\n\n\t// TODO only have 1 emit method, just check for data.async == true, then add to requests queue\n\t// simple sync emit (dont to add to async response queue)\n\temit(data: Record<string, any>) {\n\t\t// console.log('emit to wallet iframe');\n\n\t\tif (!this.ready) {\n\t\t\t// console.error('FrameBus not ready, please init first');\n\t\t\t// return;\n\t\t\tthrow new Error('FrameBus not ready');\n\t\t}\n\n\t\tconst uuid = new Date().getTime().toString();\n\n\t\tdata = {\n\t\t\t...data,\n\t\t\tuuid,\n\t\t};\n\n\t\tif (this.walEl && this.walWin) {\n\t\t\tthis.walWin.postMessage(data, this.walEl.src);\n\t\t} else {\n\t\t\tthrow new Error('no wallEl or walWin');\n\t\t}\n\t}\n\n\t// TODO should we also support emitCb(data: any, cb()?: CallbackFn) -- combined w normal? can they all be 1 definition?\n\t// TODO in algonaut make asyncEmit private so we can abstract asyncEmit method to asyncSendTxn(wrapping asyncEmit...) and all args are type safe\n\n\t// async emit\n\temitAsync<T>(data: Record<string, any>) {\n\t\tconsole.log('emitAsync');\n\n\t\tif (!this.ready) {\n\t\t\tthrow new Error('FrameBus not ready');\n\t\t}\n\n\t\tconst uuid = new Date().getTime().toString();\n\n\t\tdata = {\n\t\t\t...data,\n\t\t\tuuid,\n\t\t\tasync: true\n\t\t};\n\n\t\tif (this.walEl && this.walWin) {\n\t\t\tthis.walWin.postMessage(data, this.walEl.src);\n\t\t} else {\n\t\t\tthrow new Error('no wallEl or walWin');\n\t\t}\n\n\t\treturn new Promise<T>((resolve) => {\n\t\t\t// this.requests.set(uuid, resolve); // works\n\t\t\tthis.requests.set(uuid, { req: data, resolve }); // works, more info\n\t\t});\n\t}\n\n\tinsertStyles(css: string) {\n\t\t// console.log('insertStyles', css);\n\n\t\t// TODO verifiy check + sterilize this incoming arg\n\n\t\t// insert styles (if not there)\n\t\tconst existingStyles: HTMLStyleElement | null = document.querySelector('style#inkey-frame-styles');\n\t\tif (!existingStyles) {\n\t\t\tconst stylesheet = document.createElement('style');\n\t\t\tstylesheet.setAttribute('id', 'inkey-frame-styles');\n\t\t\tstylesheet.innerText = css;\n\t\t\tdocument.head.appendChild(stylesheet);\n\t\t} else {\n\t\t\t// replace styles into existing style tag\n\t\t\texistingStyles.innerText = css;\n\t\t}\n\n\t\tif (this.walEl) {\n\t\t\t// 100ms delay needed for no glitch on first load\n\t\t\tsetTimeout(() => {\n\t\t\t\tthis.walEl.style.visibility = 'initial';\n\t\t\t}, 100);\n\t\t} else {\n\t\t\tconsole.warn('no walEl for style.visibility reset');\n\t\t}\n\n\t}\n\n\tremoveStyles() {\n\t\t// remove injected style tag\n\t\tconst styleEl = document.querySelector('style#inkey-frame-styles');\n\t\tif (styleEl) {\n\t\t\tdocument.head.removeChild(styleEl);\n\t\t}\n\t}\n\n\t// wallet needs to handle asyncMessages like...\n\t/**\n\t * \tevent.source?.postMessage({\n\t\t\tsource: 'ncc-inkey-wallet',\n\t\t\tpayload: {\n\t\t\t\ttype: 'async works?',\n\t\t\t\ta: 'AAA',\n\t\t\t\tb: 'bbb'\n\t\t\t},\n\n\t\t\t//\n\t\t\tasync: true, // send back a flag saying this was an async emit\n\t\t\tuuid: event.data.uuid // SEND BACK THE SAME UUID\n\t\t}, {\n\t\t\ttargetOrigin: event.origin // works\n\t\t});\n\t */\n}\n"],
  "mappings": "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",
  "names": ["t", "buffer", "offset", "isLE", "mLen", "nBytes", "e", "m", "eLen", "eMax", "eBias", "nBits", "i", "d", "s", "NaN", "Infinity", "Math", "pow", "uint32Max", "BigInt", "minHiSafeInt", "floor", "Number", "MIN_SAFE_INTEGER", "maxHiSafeInt", "MAX_SAFE_INTEGER", "options", "Uint8Array", "Error", "this", "ofs", "len", "length", "extension", "tokenMap", "push", "fn", "constantNull", "bind", "invalidOpcode", "constantFalse", "constantTrue", "readBinary", "param", "readUint8", "readUint16", "readUint32", "readExtension", "readFloat", "readDouble", "readUint64", "readInt8", "readInt16", "readInt32", "readInt64", "readString", "readArray", "readMap", "MsgPackDecoder", "opcode", "checkAvailable", "n", "hi", "lo", "ieee754.read", "value", "slice", "type", "toString", "start", "invalidUtf8", "savedOffset", "savedParam", "str", "ch", "String", "fromCharCode", "join", "idx", "process", "Array", "count", "uint8Max", "uint16Max", "uint64Max", "neg32", "int8Min", "int16Min", "int32Min", "int64Min", "obj", "bufferView", "DataView", "ArrayBuffer", "bufferLen", "sortKeys", "useFloat", "MsgPackEncoder", "parse", "encodeNull", "encodeBoolean", "encodeNumber", "encodeString", "encodeBigInt", "encodeObject", "writeUint8", "b", "isSafeInteger", "writeUint16", "writeUint32", "writeUint64", "writeInt8", "writeInt16", "writeInt32", "writeInt64", "writeFloat", "writeDouble", "strLen", "buf", "pos", "byteLength", "newBuf", "set", "charCodeAt", "ch2", "writeBuffer", "ext", "encodeExtension", "isArray", "encodeArray", "isView", "encodeBinary", "Object", "prototype", "apply", "encodeMap", "size", "byteOffset", "obj_1", "_i", "v", "keys", "sort", "keysCount", "keys_1", "key", "r", "keys_2", "_a", "data", "ensureSpace", "setUint8", "setInt8", "setUint16", "setInt16", "setUint32", "setInt32", "setFloat32", "setFloat64", "newBufferSize", "newBufferView", "newBuffer", "MsgPackBigInt", "init_shim", "import_buffer", "init_shim", "init_shim", "init_shim", "init_shim", "makeMap", "str", "expectsLowerCase", "map", "list", "i", "val", "specialBooleanAttrs", "isBooleanAttr", "makeMap", "specialBooleanAttrs", "EMPTY_OBJ", "process", "EMPTY_ARR", "NOOP", "extend", "hasOwnProperty", "hasOwn", "val", "key", "isArray", "isMap", "toTypeString", "isFunction", "val", "isString", "isSymbol", "isObject", "isPromise", "objectToString", "toTypeString", "value", "toRawType", "isIntegerKey", "key", "isString", "cacheStringFunction", "fn", "cache", "str", "camelizeRE", "camelize", "_", "c", "hyphenateRE", "hyphenate", "capitalize", "toHandlerKey", "hasChanged", "value", "oldValue", "def", "obj", "key", "value", "warn", "msg", "args", "activeEffectScope", "recordEffectScope", "effect", "scope", "activeEffectScope", "createDep", "effects", "dep", "wasTracked", "trackOpBit", "newTracked", "initDepMarkers", "deps", "i", "finalizeDepMarkers", "effect", "ptr", "targetMap", "effectTrackDepth", "maxMarkerBits", "activeEffect", "ITERATE_KEY", "process", "MAP_KEY_ITERATE_KEY", "ReactiveEffect", "fn", "scheduler", "scope", "recordEffectScope", "parent", "lastShouldTrack", "shouldTrack", "cleanupEffect", "shouldTrack", "trackStack", "pauseTracking", "resetTracking", "last", "trackStack", "shouldTrack", "track", "target", "type", "key", "activeEffect", "depsMap", "targetMap", "dep", "createDep", "eventInfo", "process", "trackEffects", "debuggerEventExtraInfo", "effectTrackDepth", "maxMarkerBits", "newTracked", "trackOpBit", "wasTracked", "trigger", "newValue", "oldValue", "oldTarget", "deps", "isArray", "newLength", "isIntegerKey", "ITERATE_KEY", "isMap", "MAP_KEY_ITERATE_KEY", "triggerEffects", "effects", "effect", "triggerEffect", "extend", "isNonTrackableKeys", "makeMap", "builtInSymbols", "key", "isSymbol", "get$1", "createGetter", "readonlyGet", "createGetter", "arrayInstrumentations", "createArrayInstrumentations", "instrumentations", "key", "args", "arr", "toRaw", "i", "l", "track", "res", "pauseTracking", "resetTracking", "hasOwnProperty", "obj", "createGetter", "isReadonly", "shallow", "target", "receiver", "shallowReadonlyMap", "readonlyMap", "shallowReactiveMap", "reactiveMap", "targetIsArray", "isArray", "hasOwn", "isSymbol", "builtInSymbols", "isNonTrackableKeys", "isRef", "isIntegerKey", "isObject", "readonly", "reactive", "set$1", "createSetter", "createSetter", "shallow", "target", "key", "value", "receiver", "oldValue", "isReadonly", "isRef", "isShallow", "toRaw", "isArray", "hadKey", "isIntegerKey", "hasOwn", "result", "hasChanged", "trigger", "deleteProperty", "has$1", "isSymbol", "builtInSymbols", "track", "ownKeys", "ITERATE_KEY", "mutableHandlers", "get$1", "set$1", "readonlyHandlers", "readonlyGet", "process", "warn", "toShallow", "value", "getProto", "v", "get", "target", "key", "isReadonly", "isShallow", "rawTarget", "toRaw", "rawKey", "track", "has", "wrap", "toReadonly", "toReactive", "size", "ITERATE_KEY", "add", "trigger", "set", "hadKey", "process", "checkIdentityKeys", "oldValue", "hasChanged", "deleteEntry", "result", "clear", "hadItems", "oldTarget", "isMap", "createForEach", "callback", "thisArg", "observed", "createIterableMethod", "method", "args", "targetIsMap", "isPair", "isKeyOnly", "innerIterator", "MAP_KEY_ITERATE_KEY", "done", "createReadonlyMethod", "type", "capitalize", "createInstrumentations", "mutableInstrumentations", "shallowInstrumentations", "readonlyInstrumentations", "shallowReadonlyInstrumentations", "createInstrumentationGetter", "shallow", "instrumentations", "receiver", "hasOwn", "mutableCollectionHandlers", "readonlyCollectionHandlers", "createInstrumentationGetter", "checkIdentityKeys", "target", "has", "key", "rawKey", "toRaw", "type", "toRawType", "reactiveMap", "shallowReactiveMap", "readonlyMap", "shallowReadonlyMap", "targetTypeMap", "rawType", "getTargetType", "value", "reactive", "isReadonly", "createReactiveObject", "mutableHandlers", "mutableCollectionHandlers", "readonly", "target", "createReactiveObject", "readonlyHandlers", "readonlyCollectionHandlers", "readonlyMap", "createReactiveObject", "target", "isReadonly", "baseHandlers", "collectionHandlers", "proxyMap", "isObject", "process", "existingProxy", "targetType", "getTargetType", "proxy", "isReactive", "value", "isShallow", "toRaw", "observed", "raw", "markRaw", "value", "def", "toReactive", "isObject", "reactive", "toReadonly", "readonly", "trackRefValue", "ref", "shouldTrack", "activeEffect", "process", "trackEffects", "createDep", "triggerRefValue", "newVal", "dep", "triggerEffects", "isRef", "r", "_a$1", "ComputedRefImpl", "getter", "_setter", "isReadonly", "isSSR", "ReactiveEffect", "triggerRefValue", "self", "toRaw", "trackRefValue", "newValue", "computed", "getterOrOptions", "debugOptions", "setter", "onlyGetter", "isFunction", "process", "NOOP", "cRef", "_a", "_a", "init_shim", "callWithErrorHandling", "fn", "type", "args", "res", "err", "handleError", "callWithAsyncErrorHandling", "isFunction", "isPromise", "values", "i", "warn", "message", "createError", "INITIAL_WATCHER_VALUE", "watch", "source", "cb", "options", "doWatch", "immediate", "deep", "flush", "getter", "forceTrigger", "isMultiSource", "isRef", "isShallow", "isReactive", "isArray", "s", "traverse", "isFunction", "callWithErrorHandling", "warn", "cleanup", "callWithAsyncErrorHandling", "onCleanup", "NOOP", "baseGetter", "fn", "effect", "oldValue", "INITIAL_WATCHER_VALUE", "job", "newValue", "v", "i", "hasChanged", "scheduler", "ReactiveEffect", "value", "seen", "isObject", "_", "key", "import_msgpack_bigint", "import_buffer", "__defProp", "__defNormalProp", "obj", "key", "value", "__name", "target", "__publicField", "lsKey", "startWatchers", "isBrowser", "onLoadLStor", "onLoadLStorObj", "AnyWalletState", "watch", "BaseClient", "params", "getAlgosdk", "buff", "ICON", "METADATA", "_PeraClient", "clientSdk", "initParams", "sdkConfig", "defaultConfig", "sdkLib", "createClientSdk", "markRaw", "e", "onDisconnect", "accounts", "mappedAccounts", "address", "index", "addConnectedAccounts", "setAsActiveAccount", "connectedAccounts", "transactions", "algosdk", "decodedTxns", "txn", "txnsToSign", "acc", "i", "result", "signedByUser", "PeraClient", "client_default", "ICON3", "METADATA2", "arrayBufferToBase64", "buffer", "binary", "bytes", "len", "_InkeyClient", "clientOptions", "defaultInkeyConfig", "inkeyAccounts", "a", "account", "msgpack", "txnsAsStrB64", "tBuff", "returnedTxns", "InkeyClient", "ICON5", "METADATA3", "_MyAlgoClient", "MyAlgoClient", "ICON7", "METADATA4", "getNetwork", "network", "_AlgoSignerClient", "txnObj", "Buffer2", "AlgoSignerClient", "ICON8", "METADATA5", "_ExodusClient", "onlyIfTrusted", "ExodusClient", "CLIENT_MAP", "CLIENT_IDS", "c", "CLIENT_PKGS", "p", "excludeClients", "idsToDisable", "pkgsToDisable", "id", "createWallet", "ip", "w", "reactive", "removeAccountsByClient", "accts", "getAccountsByProvider", "readonly", "computed", "enableWallets", "walletsToEnable", "DEFAULT_WALLETS_TO_ENABLE", "wKey", "wInitParams", "wId", "acctsToRemove", "acct", "acctsToKeep", "newAcct", "exists", "existingAcct", "signTransactions", "txns", "activeWallet", "txnsSigned", "WALLET_ID", "WALLET_ID4", "ALL_WALLETS", "aWId", "aW", "someWalletIsSigning", "k", "onChange", "n", "latestState", "pass", "pera_default", "myalgo_default", "inkey_default", "CLIENT_SDK_MAP", "init_shim", "FrameBus", "config", "evt", "walElId", "walEl", "walWin", "src", "align", "walElContainer", "data", "routepath", "height", "unit", "resolve", "readyInterval", "f", "event", "h", "css", "outgoing", "uuid", "existingStyles", "stylesheet", "styleEl", "Algonaut", "esm_default", "config", "isValid", "AlgodClient", "IndexerClient", "status", "mountConfig", "FrameBus", "account", "secretKeyToMnemonic", "address", "generateAccount", "mnemonic", "utils", "txId", "limitDelta", "log", "lastround", "limit", "returnValue", "pendingInfo", "er", "base64ProgramString", "assetIndex", "optionalTxnArgs", "suggestedParams", "makeAssetTransferTxnWithSuggestedParamsFromObject", "callbacks", "transaction", "args", "optInState", "asset", "metaBlockLength", "note", "addr", "totalIssuance", "manager", "reserve", "freeze", "clawback", "makeAssetCreateTxnWithSuggestedParams", "txn", "txStatus", "ptx", "assetId", "enc", "makeAssetDestroyTxnWithSuggestedParams", "fromAddr", "sender", "makeApplicationOptInTxnFromObject", "appIndex", "makeApplicationDeleteTxn", "appId", "e", "processedArgs", "makeApplicationNoOpTxnFromObject", "makeApplicationCloseOutTxnFromObject", "proms", "promsRes", "info", "localState", "state", "approvalProgram", "clearProgram", "makeApplicationCreateTxnFromObject", "OnApplicationComplete", "result", "transactionResponse", "onComplete", "makeApplicationCreateTxn", "encodedArgs", "signedTxn", "signLogicSigTransactionObject", "makeApplicationUpdateTxn", "programSource", "programBytes", "compileResponse", "encodedNote", "makePaymentTxnWithSuggestedParamsFromObject", "accountInfo", "stkBalance", "applicationIndex", "accountInfoResponse", "i", "n", "stateItem", "key", "type", "value", "valueAsAddr", "encodeAddress", "txnOrTxns", "signedTxns", "txnsToSign", "encodeUnsignedTransaction", "inkeyResponse", "encodedTxn", "tx", "data", "options", "txns", "res", "routepath", "appCode", "payload", "transactions", "signed", "txnGroup", "assignGroupID", "signedTx", "signLogicSigTransaction", "signTransaction", "txnsForSigning", "str", "stateArray", "encoded", "src_default", "mnemonicToSecretKey", "isValidAddress", "error", "program", "LogicSigAccount", "arg", "encodeUint64", "getApplicationAddress", "stateObj", "txnFS", "decodedTxn", "tfs", "signMultisigTransaction", "txnUnsignedDecoded", "decodedTxns", "decodeUnsignedTransaction", "to", "from", "microalgosToAlgos", "buffer"]
}

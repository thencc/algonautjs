import{A as Vt,Aa as Kt,D as Ee,E as Tt,I as bt,M as Ht,R as De,S as xe,T as Ce,aa as Jt,b as Zt,da as Se,e as Ae,f as dt,fb as X,g as Me,ha as ke,i as ft,l as Yt,m as Ie,ma as Nt,na as Qt,nb as Ue,oa as Le,pa as je,q as Te,ra as ve,t as be,ua as Oe,w as Ne,wa as ze}from"./chunk-RBN4TTU6.mjs";import{b as Tn,d as Gt,f as M,h as E,i as ye}from"./chunk-ENGTMBWY.mjs";var ln=Tn((ue,de)=>{E();(function(e,t){typeof ue=="object"&&typeof de<"u"?de.exports=t():typeof define=="function"&&define.amd?define(t):(e=typeof globalThis<"u"?globalThis:e||self).MsgPackBigInt=t()})(ue,function(){"use strict";var e=function(g,s,l,h,w){var A,y,b=8*w-h-1,v=(1<<b)-1,me=v>>1,O=-7,K=l?w-1:0,Bt=l?-1:1,It=g[s+K];for(K+=Bt,A=It&(1<<-O)-1,It>>=-O,O+=b;O>0;A=256*A+g[s+K],K+=Bt,O-=8);for(y=A&(1<<-O)-1,A>>=-O,O+=h;O>0;y=256*y+g[s+K],K+=Bt,O-=8);if(A===0)A=1-me;else{if(A===v)return y?NaN:1/0*(It?-1:1);y+=Math.pow(2,h),A-=me}return(It?-1:1)*y*Math.pow(2,A-h)},t=BigInt(4294967296),n=Math.floor(Number.MIN_SAFE_INTEGER/4294967296),i=Math.floor(Number.MAX_SAFE_INTEGER/4294967296),o=function(){function g(s,l){if(!(s instanceof Uint8Array))throw new Error("UInt64: invalid data");this.buffer=s,this.ofs=0,this.len=s.length,this.extension=void 0,l&&l.extension&&(this.extension=l.extension),this.tokenMap=[],this.tokenMap.push({fn:this.constantNull.bind(this)}),this.tokenMap.push({fn:this.invalidOpcode.bind(this)}),this.tokenMap.push({fn:this.constantFalse.bind(this)}),this.tokenMap.push({fn:this.constantTrue.bind(this)}),this.tokenMap.push({fn:this.readBinary.bind(this),param:this.readUint8.bind(this)}),this.tokenMap.push({fn:this.readBinary.bind(this),param:this.readUint16.bind(this)}),this.tokenMap.push({fn:this.readBinary.bind(this),param:this.readUint32.bind(this)}),this.tokenMap.push({fn:this.readExtension.bind(this),param:this.readUint8.bind(this)}),this.tokenMap.push({fn:this.readExtension.bind(this),param:this.readUint16.bind(this)}),this.tokenMap.push({fn:this.readExtension.bind(this),param:this.readUint32.bind(this)}),this.tokenMap.push({fn:this.readFloat.bind(this)}),this.tokenMap.push({fn:this.readDouble.bind(this)}),this.tokenMap.push({fn:this.readUint8.bind(this)}),this.tokenMap.push({fn:this.readUint16.bind(this)}),this.tokenMap.push({fn:this.readUint32.bind(this)}),this.tokenMap.push({fn:this.readUint64.bind(this)}),this.tokenMap.push({fn:this.readInt8.bind(this)}),this.tokenMap.push({fn:this.readInt16.bind(this)}),this.tokenMap.push({fn:this.readInt32.bind(this)}),this.tokenMap.push({fn:this.readInt64.bind(this)}),this.tokenMap.push({fn:this.readExtension.bind(this),param:1}),this.tokenMap.push({fn:this.readExtension.bind(this),param:2}),this.tokenMap.push({fn:this.readExtension.bind(this),param:4}),this.tokenMap.push({fn:this.readExtension.bind(this),param:8}),this.tokenMap.push({fn:this.readExtension.bind(this),param:16}),this.tokenMap.push({fn:this.readString.bind(this),param:this.readUint8.bind(this)}),this.tokenMap.push({fn:this.readString.bind(this),param:this.readUint16.bind(this)}),this.tokenMap.push({fn:this.readString.bind(this),param:this.readUint32.bind(this)}),this.tokenMap.push({fn:this.readArray.bind(this),param:this.readUint16.bind(this)}),this.tokenMap.push({fn:this.readArray.bind(this),param:this.readUint32.bind(this)}),this.tokenMap.push({fn:this.readMap.bind(this),param:this.readUint16.bind(this)}),this.tokenMap.push({fn:this.readMap.bind(this),param:this.readUint32.bind(this)})}return g.prototype.process=function(){if(!(this.ofs>=this.len)){var s=this.readUint8();return s<128?s:s>=224?s-256:s<144?this.readMap(s-128):s<160?this.readArray(s-144):s<192?this.readString(s-160):this.tokenMap[s-192].fn(this.tokenMap[s-192].param)}},g.prototype.readUint8=function(){this.checkAvailable(1);var s=this.buffer[this.ofs];return this.ofs+=1,s},g.prototype.readInt8=function(){this.checkAvailable(1);var s=this.buffer[this.ofs];return this.ofs+=1,128&s?s-256:s},g.prototype.readUint16=function(){this.checkAvailable(2);var s=this.buffer[this.ofs]<<8;return s|=this.buffer[this.ofs+1],this.ofs+=2,s},g.prototype.readInt16=function(){this.checkAvailable(2);var s=this.buffer[this.ofs];return this.ofs+=2,32768&s?s-65536:s},g.prototype.readUint32=function(){this.checkAvailable(4);var s=this.buffer[this.ofs+1]<<16;return s|=this.buffer[this.ofs+2]<<8,s|=this.buffer[this.ofs+3],s+=16777216*this.buffer[this.ofs],this.ofs+=4,s},g.prototype.readInt32=function(){this.checkAvailable(4);var s=this.buffer[this.ofs+1]<<16;return s|=this.buffer[this.ofs+2]<<8,s|=this.buffer[this.ofs+3],s|=this.buffer[this.ofs]<<24,this.ofs+=4,s},g.prototype.readUint64=function(){var s=this.readUint32(),l=this.readUint32();return s>i?BigInt(s)*t+BigInt(l):4294967296*s+l},g.prototype.readInt64=function(){var s=this.readUint32(),l=this.readUint32();return s<n||s===n&&l===0||s>i?BigInt(s)*t+BigInt(l):4294967296*s+l},g.prototype.readFloat=function(){this.checkAvailable(4);var s=e(this.buffer,this.ofs,!1,23,4);return this.ofs+=8,s},g.prototype.readDouble=function(){this.checkAvailable(8);var s=e(this.buffer,this.ofs,!1,52,8);return this.ofs+=8,s},g.prototype.constantNull=function(){return null},g.prototype.constantFalse=function(){return!1},g.prototype.constantTrue=function(){return!0},g.prototype.readBinary=function(s){if(typeof s=="function"&&(s=s(0)),!s)return new Uint8Array;this.checkAvailable(s);var l=this.buffer.slice(this.ofs,this.ofs+s);return this.ofs+=s,l},g.prototype.readExtension=function(s){typeof s=="function"&&(s=s(0));var l=this.readUint8();if(s&&this.checkAvailable(s),!this.extension)throw new Error("MsgPackDecoder: unsupported extension of type 0x"+l.toString(16));var h=this.ofs;return this.ofs+=s,this.extension(l,this.buffer.slice(h,h+s))},g.prototype.readString=function(s){if(typeof s=="function"&&(s=s(0)),!s)return"";this.checkAvailable(s);for(var l=!1,h=this.ofs,w=s,A=[];s>0;){var y=this.buffer[this.ofs];if(this.ofs+=1,s-=1,y<128)A.push(String.fromCharCode(y));else{if((224&y)==192){if(s<1){l=!0;break}y=(31&y)<<6|63&this.buffer[this.ofs],this.ofs+=1,s-=1}else if((240&y)==224){if(s<2){l=!0;break}y=(15&y)<<12|(63&this.buffer[this.ofs])<<6|63&this.buffer[this.ofs+1],this.ofs+=2,s-=2}else{if((248&y)!=240){l=!0;break}if(s<3){l=!0;break}y=(15&y)<<18|(63&this.buffer[this.ofs])<<12|(63&this.buffer[this.ofs+1])<<6|63&this.buffer[this.ofs+2],this.ofs+=3,s-=3}y>=65536?(y-=65536,A.push(String.fromCharCode(55296+(y>>>10),56320+(1023&y)))):A.push(String.fromCharCode(y))}}if(l)for(A=[],this.ofs=h,s=w;s>0;s-=1)A.push(String.fromCharCode(this.buffer[this.ofs])),this.ofs+=1;return A.join("")},g.prototype.readMap=function(s){typeof s=="function"&&(s=s(0));for(var l={},h=0;h<s;h++)l[this.process()]=this.process();return l},g.prototype.readArray=function(s){typeof s=="function"&&(s=s(0));for(var l=new Array(s),h=0;h<s;h++)l[h]=this.process();return l},g.prototype.checkAvailable=function(s){if(this.len-this.ofs<s)throw new Error("MsgPackDecoder: end of stream reached")},g.prototype.invalidOpcode=function(){throw new Error("MsgPackDecoder: invalid opcode")},g}(),r=BigInt(256),c=BigInt(65536),a=BigInt(4294967296),d=BigInt("0x10000000000000000"),u=BigInt(-32),f=BigInt(-128),m=BigInt(-32768),C=BigInt(-2147483648),j=BigInt("-9223372036854775808"),N=function(){function g(s,l){this.obj=s,this.bufferView=new DataView(new ArrayBuffer(2048)),this.buffer=new Uint8Array(this.bufferView.buffer),this.bufferLen=0,this.extension=null,this.sortKeys=!1,this.useFloat=!1,l&&(l.extension&&(this.extension=l.extension),l.sortKeys&&(this.sortKeys=l.sortKeys),l.useFloat&&(this.useFloat=l.useFloat))}return g.prototype.process=function(){return this.parse(this.obj),new Uint8Array(this.buffer.buffer,0,this.bufferLen)},g.prototype.parse=function(s){s===null?this.encodeNull():typeof s=="boolean"?this.encodeBoolean(s):typeof s=="number"?this.encodeNumber(s):typeof s=="string"?this.encodeString(s):typeof s=="bigint"?this.encodeBigInt(s):this.encodeObject(s)},g.prototype.encodeNull=function(){this.writeUint8(192)},g.prototype.encodeBoolean=function(s){this.writeUint8(s===!1?194:195)},g.prototype.encodeNumber=function(s){Number.isSafeInteger(s)?s>=0?s<128?this.writeUint8(s):s<256?(this.writeUint8(204),this.writeUint8(s)):s<65536?(this.writeUint8(205),this.writeUint16(s)):s<4294967296?(this.writeUint8(206),this.writeUint32(s)):(this.writeUint8(207),this.writeUint64(s)):s>=-32?this.writeUint8(224|s+32):s>=-128?(this.writeUint8(208),this.writeInt8(s)):s>=-32768?(this.writeUint8(209),this.writeInt16(s)):s>=-2147483648?(this.writeUint8(210),this.writeInt32(s)):(this.writeUint8(211),this.writeInt64(s)):this.useFloat?(this.writeUint8(202),this.writeFloat(s)):(this.writeUint8(203),this.writeDouble(s))},g.prototype.encodeString=function(s){for(var l=s.length,h=new Uint8Array(2*s.length),w=0,A=0;A<l;){if(h.byteLength-w<4){var y=new Uint8Array(h.byteLength+2048);y.set(h),h=y}var b=s.charCodeAt(A);if(A+=1,(4294967168&b)!=0){if((4294965248&b)==0)h[w]=b>>6&31|192,w+=1;else{if(b>=55296&&b<=56319&&A<l){var v=s.charCodeAt(A);(64512&v)==56320&&(A+=1,b=((1023&b)<<10)+(1023&v)+65536)}(4294901760&b)==0?(h[w]=b>>12&15|224,h[w+1]=b>>6&63|128,w+=2):(h[w]=b>>18&7|240,h[w+1]=b>>12&63|128,h[w+2]=b>>6&63|128,w+=3)}h[w]=63&b|128,w+=1}else h[w]=b,w+=1}if(w<32)this.writeUint8(160+w);else if(w<256)this.writeUint8(217),this.writeUint8(w);else if(w<65536)this.writeUint8(218),this.writeUint16(w);else{if(!(w<4294967296))throw new Error("MsgPackEncoder: string too long");this.writeUint8(219),this.writeUint32(w)}this.writeBuffer(new Uint8Array(h.buffer,0,w))},g.prototype.encodeBigInt=function(s){if(s>=BigInt(0))if(s<BigInt(128))this.writeUint8(Number(s));else if(s<r)this.writeUint8(204),this.writeUint8(Number(s));else if(s<c)this.writeUint8(205),this.writeUint16(Number(s));else if(s<a)this.writeUint8(206),this.writeUint32(Number(s));else{if(!(s<d))throw new Error("MsgPackEncoder: positive bigint too big");this.writeUint8(207),this.writeUint64(s)}else if(s>=u)this.writeUint8(224|Number(s)+32);else if(s>=f)this.writeUint8(208),this.writeInt8(Number(s));else if(s>=m)this.writeUint8(209),this.writeInt16(Number(s));else if(s>=C)this.writeUint8(210),this.writeInt32(Number(s));else{if(!(s>=j))throw new Error("MsgPackEncoder: negative bigint too big");this.writeUint8(211),this.writeInt64(s)}},g.prototype.encodeObject=function(s){if(this.extension){var l=this.extension(s);if(l)return void this.encodeExtension(l)}if(Array.isArray(s))this.encodeArray(s);else if(ArrayBuffer.isView(s))this.encodeBinary(s);else{if(typeof s!="object")throw new Error("MsgPackEncoder: unsupported object of type "+Object.prototype.toString.apply(s));this.encodeMap(s)}},g.prototype.encodeBinary=function(s){var l=s.byteLength;if(l<256)this.writeUint8(196),this.writeUint8(l);else if(l<65536)this.writeUint8(197),this.writeUint16(l);else{if(!(l<4294967296))throw new Error("MsgPackEncoder: binary object is too large");this.writeUint8(198),this.writeUint32(l)}this.writeBuffer(new Uint8Array(s.buffer,s.byteOffset,s.byteLength))},g.prototype.encodeArray=function(s){var l=s.length;if(l<16)this.writeUint8(144+l);else if(l<65536)this.writeUint8(220),this.writeUint16(l);else{if(!(l<4294967296))throw new Error("MsgPackEncoder: array object is too large");this.writeUint8(221),this.writeUint32(l)}for(var h=0,w=s;h<w.length;h++){var A=w[h];this.parse(A)}},g.prototype.encodeMap=function(s){var l=Object.keys(s);this.sortKeys&&l.sort();for(var h=0,w=0,A=l;w<A.length;w++)s[v=A[w]]!==void 0&&(h+=1);if(h<16)this.writeUint8(128+h);else if(h<65536)this.writeUint8(222),this.writeUint16(h);else{if(!(h<4294967296))throw new Error("MsgPackEncoder: array object is too large");this.writeUint8(223),this.writeUint32(h)}for(var y=0,b=l;y<b.length;y++){var v;s[v=b[y]]!==void 0&&(this.encodeString(v),this.parse(s[v]))}},g.prototype.encodeExtension=function(s){var l=s.data.length;if(l===1)this.writeUint8(212);else if(l===2)this.writeUint8(213);else if(l===4)this.writeUint8(214);else if(l===8)this.writeUint8(215);else if(l===16)this.writeUint8(216);else if(l<256)this.writeUint8(199),this.writeUint8(l);else if(l<65536)this.writeUint8(200),this.writeUint16(l);else{if(!(l<4294967296))throw new Error("MsgPackEncoder: extension object is too large");this.writeUint8(201),this.writeUint32(l)}this.writeUint8(s.type),this.writeBuffer(s.data)},g.prototype.writeUint8=function(s){this.ensureSpace(1),this.bufferView.setUint8(this.bufferLen,s),this.bufferLen+=1},g.prototype.writeInt8=function(s){this.ensureSpace(1),this.bufferView.setInt8(this.bufferLen,s),this.bufferLen+=1},g.prototype.writeUint16=function(s){this.ensureSpace(2),this.bufferView.setUint16(this.bufferLen,s),this.bufferLen+=2},g.prototype.writeInt16=function(s){this.ensureSpace(2),this.bufferView.setInt16(this.bufferLen,s),this.bufferLen+=2},g.prototype.writeUint32=function(s){this.ensureSpace(4),this.bufferView.setUint32(this.bufferLen,s),this.bufferLen+=4},g.prototype.writeInt32=function(s){this.ensureSpace(4),this.bufferView.setInt32(this.bufferLen,s),this.bufferLen+=4},g.prototype.writeUint64=function(s){if(this.ensureSpace(8),typeof s=="number"){var l=Math.floor(s/4294967296);this.bufferView.setUint32(this.bufferLen,l),this.bufferView.setUint32(this.bufferLen+4,s)}else{l=Number(s/a);var h=Number(s%a);this.bufferView.setUint32(this.bufferLen,l),this.bufferView.setUint32(this.bufferLen+4,h)}this.bufferLen+=8},g.prototype.writeInt64=function(s){if(this.ensureSpace(8),typeof s=="number"){var l=Math.floor(s/4294967296);this.bufferView.setUint32(this.bufferLen,l),this.bufferView.setUint32(this.bufferLen+4,s)}else{l=Number(s/a);var h=Number(s%a);l<0&&h!==0&&(l-=1),this.bufferView.setUint32(this.bufferLen,l),this.bufferView.setUint32(this.bufferLen+4,h)}this.bufferLen+=8},g.prototype.writeFloat=function(s){this.ensureSpace(4),this.bufferView.setFloat32(this.bufferLen,s),this.bufferLen+=4},g.prototype.writeDouble=function(s){this.ensureSpace(8),this.bufferView.setFloat64(this.bufferLen,s),this.bufferLen+=8},g.prototype.writeBuffer=function(s){this.ensureSpace(s.byteLength),this.buffer.set(s,this.bufferLen),this.bufferLen+=s.byteLength},g.prototype.ensureSpace=function(s){if(this.bufferView.byteLength-this.bufferLen<s){var l=this.bufferView.byteLength+s+2047&-2048,h=new DataView(new ArrayBuffer(l)),w=new Uint8Array(h.buffer);w.set(this.buffer),this.buffer=w,this.bufferView=h}},g}();return function(){function g(){}return g.encode=function(s,l){return new N(s,l).process()},g.decode=function(s,l){return new o(s,l).process()},g.createEncoder=function(s,l){return new N(s,l)},g.createDecoder=function(s,l){return new o(s,l)},g}()})});E();var x=Gt(ye());E();E();E();E();function Xt(e,t){let n=Object.create(null),i=e.split(",");for(let o=0;o<i.length;o++)n[i[o]]=!0;return t?o=>!!n[o.toLowerCase()]:o=>!!n[o]}var bn="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly";var Ei=Xt(bn+",async,autofocus,autoplay,controls,default,defer,disabled,hidden,loop,open,required,reversed,scoped,seamless,checked,muted,multiple,selected");var Di=M.default.env.NODE_ENV!=="production"?Object.freeze({}):{},xi=M.default.env.NODE_ENV!=="production"?Object.freeze([]):[],Et=()=>{};var Pe=Object.assign;var Nn=Object.prototype.hasOwnProperty,gt=(e,t)=>Nn.call(e,t),k=Array.isArray,q=e=>Re(e)==="[object Map]";var U=e=>typeof e=="function",En=e=>typeof e=="string",Dt=e=>typeof e=="symbol",W=e=>e!==null&&typeof e=="object",_e=e=>W(e)&&U(e.then)&&U(e.catch),Dn=Object.prototype.toString,Re=e=>Dn.call(e),$t=e=>Re(e).slice(8,-1);var xt=e=>En(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e;var Ct=e=>{let t=Object.create(null);return n=>t[n]||(t[n]=e(n))},xn=/-(\w)/g,Ci=Ct(e=>e.replace(xn,(t,n)=>n?n.toUpperCase():"")),Cn=/\B([A-Z])/g,Si=Ct(e=>e.replace(Cn,"-$1").toLowerCase()),qt=Ct(e=>e.charAt(0).toUpperCase()+e.slice(1)),ki=Ct(e=>e?`on${qt(e)}`:""),tt=(e,t)=>!Object.is(e,t);var We=(e,t,n)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,value:n})};function Fe(e,...t){console.warn(`[Vue warn] ${e}`,...t)}var Sn;function kn(e,t=Sn){t&&t.active&&t.effects.push(e)}var pt=e=>{let t=new Set(e);return t.w=0,t.n=0,t},Qe=e=>(e.w&Z)>0,Ke=e=>(e.n&Z)>0,Ln=({deps:e})=>{if(e.length)for(let t=0;t<e.length;t++)e[t].w|=Z},jn=e=>{let{deps:t}=e;if(t.length){let n=0;for(let i=0;i<t.length;i++){let o=t[i];Qe(o)&&!Ke(o)?o.delete(e):t[n++]=o,o.w&=~Z,o.n&=~Z}t.length=n}},te=new WeakMap,ht=0,Z=1,ee=30,D,J=Symbol(M.default.env.NODE_ENV!=="production"?"iterate":""),ne=Symbol(M.default.env.NODE_ENV!=="production"?"Map key iterate":""),wt=class{constructor(t,n=null,i){this.fn=t,this.scheduler=n,this.active=!0,this.deps=[],this.parent=void 0,kn(this,i)}run(){if(!this.active)return this.fn();let t=D,n=G;for(;t;){if(t===this)return;t=t.parent}try{return this.parent=D,D=this,G=!0,Z=1<<++ht,ht<=ee?Ln(this):Be(this),this.fn()}finally{ht<=ee&&jn(this),Z=1<<--ht,D=this.parent,G=n,this.parent=void 0,this.deferStop&&this.stop()}}stop(){D===this?this.deferStop=!0:this.active&&(Be(this),this.onStop&&this.onStop(),this.active=!1)}};function Be(e){let{deps:t}=e;if(t.length){for(let n=0;n<t.length;n++)t[n].delete(e);t.length=0}}var G=!0,Xe=[];function vn(){Xe.push(G),G=!1}function On(){let e=Xe.pop();G=e===void 0?!0:e}function L(e,t,n){if(G&&D){let i=te.get(e);i||te.set(e,i=new Map);let o=i.get(n);o||i.set(n,o=pt());let r=M.default.env.NODE_ENV!=="production"?{effect:D,target:e,type:t,key:n}:void 0;ie(o,r)}}function ie(e,t){let n=!1;ht<=ee?Ke(e)||(e.n|=Z,n=!Qe(e)):n=!e.has(D),n&&(e.add(D),D.deps.push(e),M.default.env.NODE_ENV!=="production"&&D.onTrack&&D.onTrack(Object.assign({effect:D},t)))}function Y(e,t,n,i,o,r){let c=te.get(e);if(!c)return;let a=[];if(t==="clear")a=[...c.values()];else if(n==="length"&&k(e)){let u=Number(i);c.forEach((f,m)=>{(m==="length"||m>=u)&&a.push(f)})}else switch(n!==void 0&&a.push(c.get(n)),t){case"add":k(e)?xt(n)&&a.push(c.get("length")):(a.push(c.get(J)),q(e)&&a.push(c.get(ne)));break;case"delete":k(e)||(a.push(c.get(J)),q(e)&&a.push(c.get(ne)));break;case"set":q(e)&&a.push(c.get(J));break}let d=M.default.env.NODE_ENV!=="production"?{target:e,type:t,key:n,newValue:i,oldValue:o,oldTarget:r}:void 0;if(a.length===1)a[0]&&(M.default.env.NODE_ENV!=="production"?et(a[0],d):et(a[0]));else{let u=[];for(let f of a)f&&u.push(...f);M.default.env.NODE_ENV!=="production"?et(pt(u),d):et(pt(u))}}function et(e,t){let n=k(e)?e:[...e];for(let i of n)i.computed&&Ge(i,t);for(let i of n)i.computed||Ge(i,t)}function Ge(e,t){(e!==D||e.allowRecurse)&&(M.default.env.NODE_ENV!=="production"&&e.onTrigger&&e.onTrigger(Pe({effect:e},t)),e.scheduler?e.scheduler():e.run())}var zn=Xt("__proto__,__v_isRef,__isVue"),$e=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(Dt)),Un=qe();var Pn=qe(!0);var Ze=_n();function _n(){let e={};return["includes","indexOf","lastIndexOf"].forEach(t=>{e[t]=function(...n){let i=I(this);for(let r=0,c=this.length;r<c;r++)L(i,"get",r+"");let o=i[t](...n);return o===-1||o===!1?i[t](...n.map(I)):o}}),["push","pop","shift","unshift","splice"].forEach(t=>{e[t]=function(...n){vn();let i=I(this)[t].apply(this,n);return On(),i}}),e}function Rn(e){let t=I(this);return L(t,"has",e),t.hasOwnProperty(e)}function qe(e=!1,t=!1){return function(i,o,r){if(o==="__v_isReactive")return!e;if(o==="__v_isReadonly")return e;if(o==="__v_isShallow")return t;if(o==="__v_raw"&&r===(e?t?ei:sn:t?ti:nn).get(i))return i;let c=k(i);if(!e){if(c&&gt(Ze,o))return Reflect.get(Ze,o,r);if(o==="hasOwnProperty")return Rn}let a=Reflect.get(i,o,r);return(Dt(o)?$e.has(o):zn(o))||(e||L(i,"get",o),t)?a:B(a)?c&&xt(o)?a:a.value:W(a)?e?z(a):nt(a):a}}var Wn=Fn();function Fn(e=!1){return function(n,i,o,r){let c=n[i];if(Ot(c)&&B(c)&&!B(o))return!1;if(!e&&(!re(o)&&!Ot(o)&&(c=I(c),o=I(o)),!k(n)&&B(c)&&!B(o)))return c.value=o,!0;let a=k(n)&&xt(i)?Number(i)<n.length:gt(n,i),d=Reflect.set(n,i,o,r);return n===I(r)&&(a?tt(o,c)&&Y(n,"set",i,o,c):Y(n,"add",i,o)),d}}function Bn(e,t){let n=gt(e,t),i=e[t],o=Reflect.deleteProperty(e,t);return o&&n&&Y(e,"delete",t,void 0,i),o}function Gn(e,t){let n=Reflect.has(e,t);return(!Dt(t)||!$e.has(t))&&L(e,"has",t),n}function Zn(e){return L(e,"iterate",k(e)?"length":J),Reflect.ownKeys(e)}var Yn={get:Un,set:Wn,deleteProperty:Bn,has:Gn,ownKeys:Zn},Vn={get:Pn,set(e,t){return M.default.env.NODE_ENV!=="production"&&Fe(`Set operation on key "${String(t)}" failed: target is readonly.`,e),!0},deleteProperty(e,t){return M.default.env.NODE_ENV!=="production"&&Fe(`Delete operation on key "${String(t)}" failed: target is readonly.`,e),!0}};var oe=e=>e,zt=e=>Reflect.getPrototypeOf(e);function St(e,t,n=!1,i=!1){e=e.__v_raw;let o=I(e),r=I(t);n||(t!==r&&L(o,"get",t),L(o,"get",r));let{has:c}=zt(o),a=i?oe:n?ce:ae;if(c.call(o,t))return a(e.get(t));if(c.call(o,r))return a(e.get(r));e!==o&&e.get(t)}function kt(e,t=!1){let n=this.__v_raw,i=I(n),o=I(e);return t||(e!==o&&L(i,"has",e),L(i,"has",o)),e===o?n.has(e):n.has(e)||n.has(o)}function Lt(e,t=!1){return e=e.__v_raw,!t&&L(I(e),"iterate",J),Reflect.get(e,"size",e)}function Ye(e){e=I(e);let t=I(this);return zt(t).has.call(t,e)||(t.add(e),Y(t,"add",e,e)),this}function Ve(e,t){t=I(t);let n=I(this),{has:i,get:o}=zt(n),r=i.call(n,e);r?M.default.env.NODE_ENV!=="production"&&en(n,i,e):(e=I(e),r=i.call(n,e));let c=o.call(n,e);return n.set(e,t),r?tt(t,c)&&Y(n,"set",e,t,c):Y(n,"add",e,t),this}function He(e){let t=I(this),{has:n,get:i}=zt(t),o=n.call(t,e);o?M.default.env.NODE_ENV!=="production"&&en(t,n,e):(e=I(e),o=n.call(t,e));let r=i?i.call(t,e):void 0,c=t.delete(e);return o&&Y(t,"delete",e,void 0,r),c}function Je(){let e=I(this),t=e.size!==0,n=M.default.env.NODE_ENV!=="production"?q(e)?new Map(e):new Set(e):void 0,i=e.clear();return t&&Y(e,"clear",void 0,void 0,n),i}function jt(e,t){return function(i,o){let r=this,c=r.__v_raw,a=I(c),d=t?oe:e?ce:ae;return!e&&L(a,"iterate",J),c.forEach((u,f)=>i.call(o,d(u),d(f),r))}}function vt(e,t,n){return function(...i){let o=this.__v_raw,r=I(o),c=q(r),a=e==="entries"||e===Symbol.iterator&&c,d=e==="keys"&&c,u=o[e](...i),f=n?oe:t?ce:ae;return!t&&L(r,"iterate",d?ne:J),{next(){let{value:m,done:C}=u.next();return C?{value:m,done:C}:{value:a?[f(m[0]),f(m[1])]:f(m),done:C}},[Symbol.iterator](){return this}}}}function F(e){return function(...t){if(M.default.env.NODE_ENV!=="production"){let n=t[0]?`on key "${t[0]}" `:"";console.warn(`${qt(e)} operation ${n}failed: target is readonly.`,I(this))}return e==="delete"?!1:this}}function Hn(){let e={get(r){return St(this,r)},get size(){return Lt(this)},has:kt,add:Ye,set:Ve,delete:He,clear:Je,forEach:jt(!1,!1)},t={get(r){return St(this,r,!1,!0)},get size(){return Lt(this)},has:kt,add:Ye,set:Ve,delete:He,clear:Je,forEach:jt(!1,!0)},n={get(r){return St(this,r,!0)},get size(){return Lt(this,!0)},has(r){return kt.call(this,r,!0)},add:F("add"),set:F("set"),delete:F("delete"),clear:F("clear"),forEach:jt(!0,!1)},i={get(r){return St(this,r,!0,!0)},get size(){return Lt(this,!0)},has(r){return kt.call(this,r,!0)},add:F("add"),set:F("set"),delete:F("delete"),clear:F("clear"),forEach:jt(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(r=>{e[r]=vt(r,!1,!1),n[r]=vt(r,!0,!1),t[r]=vt(r,!1,!0),i[r]=vt(r,!0,!0)}),[e,n,t,i]}var[Jn,Qn,Kn,Xn]=Hn();function tn(e,t){let n=t?e?Xn:Kn:e?Qn:Jn;return(i,o,r)=>o==="__v_isReactive"?!e:o==="__v_isReadonly"?e:o==="__v_raw"?i:Reflect.get(gt(n,o)&&o in i?n:i,o,r)}var $n={get:tn(!1,!1)};var qn={get:tn(!0,!1)};function en(e,t,n){let i=I(n);if(i!==n&&t.call(e,i)){let o=$t(e);console.warn(`Reactive ${o} contains both the raw and reactive versions of the same object${o==="Map"?" as keys":""}, which can lead to inconsistencies. Avoid differentiating between the raw and reactive versions of an object and only use the reactive version if possible.`)}}var nn=new WeakMap,ti=new WeakMap,sn=new WeakMap,ei=new WeakMap;function ni(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function ii(e){return e.__v_skip||!Object.isExtensible(e)?0:ni($t(e))}function nt(e){return Ot(e)?e:on(e,!1,Yn,$n,nn)}function z(e){return on(e,!0,Vn,qn,sn)}function on(e,t,n,i,o){if(!W(e))return M.default.env.NODE_ENV!=="production"&&console.warn(`value cannot be made reactive: ${String(e)}`),e;if(e.__v_raw&&!(t&&e.__v_isReactive))return e;let r=o.get(e);if(r)return r;let c=ii(e);if(c===0)return e;let a=new Proxy(e,c===2?i:n);return o.set(e,a),a}function mt(e){return Ot(e)?mt(e.__v_raw):!!(e&&e.__v_isReactive)}function Ot(e){return!!(e&&e.__v_isReadonly)}function re(e){return!!(e&&e.__v_isShallow)}function I(e){let t=e&&e.__v_raw;return t?I(t):e}function it(e){return We(e,"__v_skip",!0),e}var ae=e=>W(e)?nt(e):e,ce=e=>W(e)?z(e):e;function si(e){G&&D&&(e=I(e),M.default.env.NODE_ENV!=="production"?ie(e.dep||(e.dep=pt()),{target:e,type:"get",key:"value"}):ie(e.dep||(e.dep=pt())))}function oi(e,t){e=I(e);let n=e.dep;n&&(M.default.env.NODE_ENV!=="production"?et(n,{target:e,type:"set",key:"value",newValue:t}):et(n))}function B(e){return!!(e&&e.__v_isRef===!0)}var rn,se=class{constructor(t,n,i,o){this._setter=n,this.dep=void 0,this.__v_isRef=!0,this[rn]=!1,this._dirty=!0,this.effect=new wt(t,()=>{this._dirty||(this._dirty=!0,oi(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!o,this.__v_isReadonly=i}get value(){let t=I(this);return si(t),(t._dirty||!t._cacheable)&&(t._dirty=!1,t._value=t.effect.run()),t._value}set value(t){this._setter(t)}};rn="__v_isReadonly";function P(e,t,n=!1){let i,o,r=U(e);r?(i=e,o=M.default.env.NODE_ENV!=="production"?()=>{console.warn("Write operation failed: computed value is readonly")}:Et):(i=e.get,o=e.set);let c=new se(i,o,r||!o,n);return M.default.env.NODE_ENV!=="production"&&t&&!n&&(c.effect.onTrack=t.onTrack,c.effect.onTrigger=t.onTrigger),c}var ri;ri="__v_isReadonly";E();function Ut(e,t,n){let i;try{i=n?e(...n):e()}catch(o){cn(o,t)}return i}function le(e,t,n){if(U(e)){let o=Ut(e,t,n);return o&&_e(o)&&o.catch(r=>{cn(r,t)}),o}let i=[];for(let o=0;o<e.length;o++)i.push(le(e[o],t,n));return i}function cn(e,t){console.error(new Error(`[@vue-reactivity/watch]: ${t}`)),console.error(e)}function ai(e){console.warn(ci(e))}function ci(e){return new Error(`[reactivue]: ${e}`)}var an={};function yt(e,t,n){return li(e,t,n)}function li(e,t,{immediate:n,deep:i,flush:o}={}){let r,c=!1,a=!1;if(B(e)?(r=()=>e.value,c=re(e)):mt(e)?(r=()=>e,i=!0):k(e)?(a=!0,c=e.some(mt),r=()=>e.map(N=>B(N)?N.value:mt(N)?st(N):U(N)?Ut(N,"watch getter"):ai("invalid source"))):U(e)?t?r=()=>Ut(e,"watch getter"):r=()=>(d&&d(),le(e,"watch callback",[u])):r=Et,t&&i){let N=r;r=()=>st(N())}let d,u=N=>{d=j.onStop=()=>{Ut(N,"watch cleanup")}},f=a?[]:an,m=()=>{if(!!j.active)if(t){let N=j.run();(i||c||(a?N.some((g,s)=>tt(g,f[s])):tt(N,f)))&&(d&&d(),le(t,"watch value",[N,f===an?void 0:f,u]),f=N)}else j.run()};m.allowRecurse=!!t;let C;o==="sync"?C=m:C=()=>{m()};let j=new wt(r,C);return t?n?m():f=j.run():j.run(),()=>j.stop()}function st(e,t=new Set){if(!W(e)||t.has(e))return e;if(t.add(e),k(e))for(let n=0;n<e.length;n++)st(e[n],t);else if(e instanceof Map)e.forEach((n,i)=>{st(e.get(i),t)});else if(e instanceof Set)e.forEach(n=>{st(n,t)});else for(let n of Object.keys(e))st(e[n],t);return e}var pn=Gt(ln(),1);var yn=Gt(ye(),1);var gn=Object.defineProperty,ui=(e,t,n)=>t in e?gn(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,T=(e,t)=>gn(e,"name",{value:t,configurable:!0}),V=(e,t,n)=>(ui(e,typeof t!="symbol"?t+"":t,n),n),un="AnyWallet",di=T(()=>{if(!pe()){console.warn("not in browser...");return}T(()=>{let t=localStorage.getItem(un);if(t)try{let n=JSON.parse(t);p.stored=n}catch{console.warn("bad sLocalStorage parse")}},"initLocalStorage")(),yt(()=>p.stored,()=>{localStorage.setItem(un,JSON.stringify(p.stored))},{deep:!0})},"startWatchers"),R=class{constructor(e){console.log("params",e)}setAsActiveAccount(){console.log("setAsActiveAccount - TODO")}};T(R,"BaseClient");V(R,"metadata");V(R,"init");var ct=T(async()=>{try{if(typeof window<"u"){let e=await import("./buffer-DEE2PWSU.mjs");console.log("buff (dynamic import)",e),window.Buffer=e.default.Buffer}return(await import("./esm-TG7WAIFQ.mjs")).default}catch(e){throw console.warn(e),new Error("err w dynamic algosdk/buffer imports")}},"getAlgosdk"),fi="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz48c3ZnIGlkPSJMYXllcl8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxNzcgMTg3Ij48cmVjdCB4PSItMTEuMzgiIHk9Ii0yNS45NyIgd2lkdGg9IjIwMC4wMiIgaGVpZ2h0PSIyMzEuNTMiIHN0eWxlPSJmaWxsOiNmZTU7Ii8+PHBhdGggZD0iTTk0LjA1LDU5LjYxYzIuMDUsOC40OCwxLjM2LDE1Ljk0LTEuNTUsMTYuNjYtMi45LC43Mi02LjkxLTUuNTctOC45Ni0xNC4wNS0yLjA1LTguNDgtMS4zNi0xNS45NCwxLjU1LTE2LjY2LDIuOS0uNzIsNi45MSw1LjU3LDguOTYsMTQuMDVaIiBzdHlsZT0iZmlsbDojMWMxYzFjOyIvPjxwYXRoIGQ9Ik0xMjcuODUsNjYuOWMtNC41My00LjgxLTEzLjU1LTMuNS0yMC4xNSwyLjkxLTYuNTksNi40MS04LjI2LDE1LjUtMy43MywyMC4zMSw0LjUzLDQuOCwxMy41NSwzLjUsMjAuMTUtMi45MXM4LjI2LTE1LjUsMy43My0yMC4zMVoiIHN0eWxlPSJmaWxsOiMxYzFjMWM7Ii8+PHBhdGggZD0iTTkxLjc5LDE0MC40N2MyLjktLjcyLDMuNDktOC42LDEuMzItMTcuNjEtMi4xNy05LTYuMjktMTUuNzEtOS4xOS0xNC45OS0yLjksLjcyLTMuNDksOC42LTEuMzIsMTcuNjEsMi4xNyw5LDYuMjksMTUuNzEsOS4xOSwxNC45OVoiIHN0eWxlPSJmaWxsOiMxYzFjMWM7Ii8+PHBhdGggZD0iTTYyLjIyLDcxLjNjOC4zNywyLjQ3LDE0LjQ4LDYuOCwxMy42Niw5LjY3LS44MywyLjg3LTguMjgsMy4yLTE2LjY1LC43My04LjM3LTIuNDctMTQuNDgtNi44LTEzLjY2LTkuNjcsLjgzLTIuODcsOC4yOC0zLjIsMTYuNjUtLjczWiIgc3R5bGU9ImZpbGw6IzFjMWMxYzsiLz48cGF0aCBkPSJNMTE2LjU0LDEwMy43NGM4Ljg4LDIuNjIsMTUuNDEsNy4wNywxNC41OSw5Ljk0LS44MywyLjg3LTguNywzLjA4LTE3LjU4LC40Ni04Ljg4LTIuNjItMTUuNDEtNy4wNy0xNC41OS05Ljk0LC44My0yLjg3LDguNy0zLjA4LDE3LjU4LS40NloiIHN0eWxlPSJmaWxsOiMxYzFjMWM7Ii8+PHBhdGggZD0iTTcxLjY0LDk3LjcxYy0yLjA4LTIuMTUtOC44OCwuOTgtMTUuMiw2Ljk5LTYuMzIsNi4wMS05Ljc2LDEyLjYzLTcuNjksMTQuNzgsMi4wOCwyLjE1LDguODgtLjk4LDE1LjItNi45OSw2LjMyLTYuMDEsOS43Ni0xMi42Myw3LjY5LTE0Ljc4WiIgc3R5bGU9ImZpbGw6IzFjMWMxYzsiLz48L3N2Zz4=",_={id:"pera",chain:"algorand",name:"Pera",icon:fi,pkg:"@perawallet/connect"},hn=class extends R{sdk;constructor({sdk:e}){super(),this.sdk=e}static async init(e){console.log(`[${_.id}] init started`);try{typeof window<"u"?window.global=window:console.warn("Using a browser lib not in a browser...");let t;if(e&&e.sdk)t=e.sdk;else{let n,i={shouldShowSignTxnToast:!1};n=e?.config||i;let o=await import("@perawallet/connect"),r=o.PeraWalletConnect||o.default.PeraWalletConnect;t=new r(n)}return t=it(t),new hn({sdk:t})}catch(t){return console.error(`[${_.id}] Error initializing...`,t),null}}async connect(e){console.log(`[${_.id}] connect (in class)`);let t=await this.sdk.connect();if(this.sdk.connector?.on("disconnect",e),t.length===0)throw new Error(`No accounts found for ${_.id}`);let n=t.map((i,o)=>({name:`Pera Wallet ${o+1}`,address:i,providerId:_.id}));return lt(n),ut(n[0]),{..._,accounts:n}}async reconnect(e){let t=await this.sdk.reconnectSession().catch(console.info);return this.sdk.connector?.on("disconnect",e),t?{..._,accounts:t.map((n,i)=>({name:`Pera Wallet ${i+1}`,address:n,providerId:_.id}))}:null}async disconnect(){await this.sdk.disconnect()}async signTransactions(e,t){let n=await ct();console.log("getting algosdk... TODO optimize this!");let i=t.map(a=>n.decodeObj(a)),o=i.reduce((a,d,u)=>(!("txn"in d)&&e.includes(n.encodeAddress(d.snd))?a.push({txn:n.decodeUnsignedTransaction(t[u])}):a.push({txn:n.decodeSignedTransaction(t[u]).txn,signers:[]}),a),[]),r=await this.sdk.signTransaction([o]);return i.reduce((a,d,u)=>{if("txn"in d)a.push(t[u]);else{let f=r.shift();f&&a.push(f)}return a},[])}},_t=hn;T(_t,"PeraClient");V(_t,"metadata",_);var gi=_t,hi="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPCEtLSBHZW5lcmF0b3I6IEFkb2JlIElsbHVzdHJhdG9yIDI0LjIuMCwgU1ZHIEV4cG9ydCBQbHVnLUluIC4gU1ZHIFZlcnNpb246IDYuMDAgQnVpbGQgMCkgIC0tPgo8c3ZnIHZlcnNpb249IjEuMSIgaWQ9IkxheWVyXzEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4IgoJIHZpZXdCb3g9IjAgMCA2MDAgNjAwIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA2MDAgNjAwOyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+CjxzdHlsZSB0eXBlPSJ0ZXh0L2NzcyI+Cgkuc3Qwe2ZpbGw6IzE5MTkxOTt9Cgkuc3Qxe2ZpbGw6I0ZGRkZGRjt9Cjwvc3R5bGU+CjxnPgoJPHBhdGggY2xhc3M9InN0MCIgZD0iTTQ2MCwwSDE0MEM2Mi43LDAsMCw2Mi43LDAsMTQwdjMyMGMwLDc3LjMsNjIuNywxNDAsMTQwLDE0MGg0Ny45TDMwMCw0ODcuOUw0MTIuMSw2MDBINDYwCgkJYzc3LjMsMCwxNDAtNjIuNywxNDAtMTQwVjE0MEM2MDAsNjIuNyw1MzcuMywwLDQ2MCwweiIvPgo8L2c+CjxnPgoJPHBhdGggY2xhc3M9InN0MSIgZD0iTTc3LjEsMjM0Ljl2MTE0LjZINDEuNlYyMzQuOUg3Ny4xeiIvPgoJPHBhdGggY2xhc3M9InN0MSIgZD0iTTIwNi4yLDIzNC45djExNC42aC0zOC45bC0zMS4zLTU2LjhsLTcuMy0xNS41aC0wLjNsMC43LDIyLjZ2NDkuN0g5OC4yVjIzNC45SDEzN2wzMS4zLDU2LjhsNy41LDE1LjVoMC4yCgkJbC0wLjctMjIuNnYtNDkuN0gyMDYuMnoiLz4KCTxwb2x5Z29uIGNsYXNzPSJzdDEiIHBvaW50cz0iMjk5LDM0OS41IDMzOS4xLDM0OS41IDI5OS41LDI4MC45IDMzNi4zLDIzNC45IDI5Ny45LDIzNC45IDI2Mi44LDI4MS43IDI2Mi44LDIzNC45IDIyNy40LDIzNC45IAoJCTIyNy40LDM0OS41IDI2Mi44LDM0OS41IDI2Mi44LDMxOC42IDI3NC41LDMwMy41IAkiLz4KCTxwYXRoIGNsYXNzPSJzdDEiIGQ9Ik0zNTAsMzQ5LjVWMjM0LjloOTIuNHYyNi42aC01Ni45VjI4MGg0NS41djI0LjdoLTQ1LjV2MTguMmg1OS4ydjI2LjZIMzUweiIvPgoJPHBhdGggY2xhc3M9InN0MSIgZD0iTTU2NiwyMzQuOWwtNDAuMSw3NHY0MC42aC0zNS42di00MC42bC00MC4zLTc0SDQ4NmwxMy45LDI4LjZsOC41LDIwbDguMy0yMGwxNC4xLTI4LjZINTY2eiIvPgo8L2c+Cjwvc3ZnPgo=",At={id:"inkey",chain:"algorand",name:"Inkey Microwallet",icon:hi,pkg:"@thencc/inkey-client-js"},pi=T(e=>{if(typeof window==null)throw new Error("[inkey] cannot access window");for(var t="",n=new Uint8Array(e),i=n.byteLength,o=0;o<i;o++)t+=String.fromCharCode(n[o]);return window.btoa(t)},"arrayBufferToBase64"),wn=class extends R{sdk;constructor({sdk:e}){super(),this.sdk=e}static async init(e){try{console.log("[inkey] init started");let t;if(e&&e.sdk)t=e.sdk;else{let n,i={src:"https://inkey-staging.web.app",align:"center"};n=e?.config||i,console.log("now load up the sdk");let r=(await import("@thencc/inkey-client-js")).createClient;console.log("createClientSdk",r),t=await r(n)}return new wn({sdk:t})}catch(t){return console.warn(`[${At.id}] Error initializing...`,t),null}}async connect(){console.log("doConnect");let e=await this.sdk.connect();if(!e)throw new Error("no inkeyAccounts");let t=e.map(i=>({address:i.address,name:i.username}));if(t.length===0)throw new Error(`No accounts found for ${At.id}`);let n=t.map(i=>({...i,providerId:At.id}));return lt(n),ut(n[0]),{...At,accounts:n}}async reconnect(){return null}async disconnect(){try{await this.sdk.disconnect()}catch(e){console.warn(e.message)}}async signTransactions(e,t){let n=t.map(u=>pn.default.decode(u));console.log("decodedTxns",n);let i=await ct();console.log("getting algosdk... TODO optimize this!");let r=n.reduce((u,f,m)=>(console.log("readout txnsToSign:",{acc:u,txn:f,i:m}),!("txn"in f)&&e.includes(i.encodeAddress(f.snd))&&u.push(t[m]),u),[]).map(u=>pi(u)),c=await this.sdk.signTxns(r);if(console.log("result",c),!c.success)throw new Error("did not sign txns");let a=[c.signedTxns];return console.log("returnedTxns",a),n.reduce((u,f,m)=>{if("txn"in f)u.push(t[m]);else{let C=a.shift();C&&u.push(C)}return u},[])}},Rt=wn;T(Rt,"InkeyClient");V(Rt,"metadata",At);var wi="data:image/svg+xml;base64,PHN2ZyB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHZpZXdCb3g9IjAgMCAzMiAzMiI+CiAgPHBhdGggZmlsbD0iIzI0NUVDNiIgZD0iTTE2LDMyYy0zLjIsMC02LjItMC45LTguOS0yLjdjLTIuNi0xLjgtNC43LTQuMy01LjktNy4yQzAsMTkuMi0wLjMsMTYsMC4zLDEyLjlDMC45LDkuOCwyLjQsNyw0LjcsNC43IEM2LjIsMy4yLDcuOSwyLDkuOSwxLjJDMTEuOCwwLjQsMTMuOSwwLDE2LDBzNC4yLDAuNCw2LjEsMS4yYzEuOSwwLjgsMy43LDIsNS4yLDMuNXMyLjcsMy4zLDMuNSw1LjJjMC44LDEuOSwxLjIsNCwxLjIsNi4xIHMtMC40LDQuMi0xLjIsNi4xYy0wLjgsMS45LTIsMy43LTMuNSw1LjJjLTEuNSwxLjUtMy4yLDIuNy01LjIsMy41QzIwLjIsMzEuNiwxOC4xLDMyLDE2LDMyTDE2LDMyeiBNMjAuMiwxMS4ybDAuMSwwLjVsMi42LDkuNWgyLjEgTDIxLjUsOC45bC0wLjEtMC4zaC0xLjlsMCwwLjFsLTEuNywzLjFMMTYsMTQuOWwwLDAuMWwwLTAuMWwtMC4yLTAuOGwtMC42LTIuNGwtMC4xLTAuMmwtMC43LTIuNmwtMC4xLTAuM2gtMS45bDAsMC4xbC0xLjcsMy4xIGwtMS44LDMuMkw3LjEsMThsLTEuOCwzLjJoMi4xTDkuMiwxOGwxLjgtMy4ybDEuOC0zLjJsMC4zLTAuNWwwLjEsMC41bDAuNSwyLjFsMC43LDIuNmwwLjIsMC45TDE0LjIsMThsLTEuOCwzLjJoMi4xbDAuOC0xLjMgbDEuMy0yLjNsMS41LTIuN2wxLjgtMy4yTDIwLjIsMTEuMkwyMC4yLDExLjJ6Ii8+Cjwvc3ZnPgo=",rt={id:"myalgo",chain:"algorand",name:"MyAlgo",icon:wi,pkg:"@randlabs/myalgo-connect"},mn=class extends R{sdk;constructor({sdk:e}){super(),this.sdk=e}static async init(e){console.log(`[${rt.id}] init started`);try{let t;if(e&&e.sdk)t=e.sdk;else{let n,i={disableLedgerNano:!1};n=e?.config||i;let r=(await import("@randlabs/myalgo-connect")).default;console.log("createClientSdk",r),t=new r(n)}return t=it(t),new mn({sdk:t})}catch(t){return console.error(`[${rt.id}] Error initializing...`,t),null}}async connect(){let e=await this.sdk.connect();if(e.length===0)throw new Error(`No accounts found for ${rt.id}`);let t=e.map(n=>({...n,providerId:rt.id}));return lt(t),ut(t[0]),{...rt,accounts:t}}async reconnect(){return null}async disconnect(){}async signTransactions(e,t){let n=await ct();console.log("getting algosdk... TODO optimize this!");let i=t.map(a=>n.decodeObj(a)),o=i.reduce((a,d,u)=>(!("txn"in d)&&e.includes(n.encodeAddress(d.snd))&&a.push(t[u]),a),[]),r=await this.sdk.signTransaction(o);return i.reduce((a,d,u)=>{if("txn"in d)a.push(t[u]);else{let f=r.shift()?.blob;f&&a.push(f)}return a},[])}},Wt=mn;T(Wt,"MyAlgoClient");V(Wt,"metadata",rt);var mi="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjM4IiBoZWlnaHQ9IjIzOCIgdmlld0JveD0iMCAwIDIzOCAyMzgiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxwYXRoIGQ9Ik01MS43MDUgMTQ1LjA0MkgxMTYuNzA1TDEwNy43MDUgMTU1LjA0Mkg1MS43MDVWMTQ1LjA0MloiIGZpbGw9IiNENjQ1MDAiLz4KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik0xNDcuNTE5IDE5MS41NTdMMTI5LjU3NyAxNDQuMzk0TDE0Mi40MDQgMTI3LjExMkwxNjcuODc1IDE5MS41NTdIMTQ3LjUxOVpNMTEwLjkzNiA5NS4zOTMyTDEyMC42MTMgMTIwLjgzMUwxMzMuMzU5IDEwNC4yMjhMMTE3LjQ3NSA2NC4wNDIyQzExNS45MjggNjAuMTI4IDExMi4xNDYgNTcuNTU2NSAxMDcuOTM4IDU3LjU1NjVDMTAzLjcyOSA1Ny41NTY1IDk5Ljk0NzQgNjAuMTI4IDk4LjQwMDMgNjQuMDQyMkw2Ny45NjU5IDE0MS4wNDJIODcuNzgwN0M5NS40MTUzIDEyMS4wMTEgMTAyLjg5MyAxMDEuMzk5IDEwNS4xOTggOTUuMzU0MUMxMDUuNjQxIDk0LjE5MTIgMTA2Ljc0MyA5My40NTk5IDEwNy45ODcgOTMuNDU5OUgxMDguMTMyQzEwOS4zNzggOTMuNDU5OSAxMTAuNDkzIDk0LjIyOTMgMTEwLjkzNiA5NS4zOTMyWk04MC45MjEgMTU5LjA0MkM3NC45Mjg5IDE3NC43NjggNjkuODY2MSAxODguMDYzIDY4LjU0NDcgMTkxLjU1N0g0OEw2MC44NTE0IDE1OS4wNDJIODAuOTIxWiIgZmlsbD0iIzIyMkI2MCIvPgo8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTE3Ni4wMjYgNTQuNzUwOUMxNzcuOTk3IDUyLjA4NzIgMTgxLjc1NCA1MS41MjU3IDE4NC40MTggNTMuNDk2N0MxODcuMDgyIDU1LjQ2NzggMTg3LjY0MyA1OS4yMjUxIDE4NS42NzIgNjEuODg4OEwxMzAuMDEzIDEzNy4xMDdDMTI5LjcxNCAxMzcuNTEyIDEyOS4zNDEgMTM3Ljg1NyAxMjguOTEzIDEzOC4xMjNMMTE3Ljg1NiAxNDUuMDEzQzExNy4wODcgMTQ1LjQ5MyAxMTYuMTI4IDE0NC43ODMgMTE2LjM2MSAxNDMuOTA3TDExOS43MTggMTMxLjMxOEMxMTkuODQ3IDEzMC44MzIgMTIwLjA2OCAxMzAuMzc0IDEyMC4zNjcgMTI5Ljk3TDE3MC42NyA2MS45ODlMMTY5LjkyOSA2MS40NDA1QzE2OS40ODUgNjEuMTEyIDE2OC44NTkgNjEuMjA1NiAxNjguNTMgNjEuNjQ5NkwxNTIuMzExIDgzLjU2ODhDMTUyLjU4NiA4NC4yMDIzIDE1Mi41MjQgODQuOTYxMiAxNTIuMDg0IDg1LjU1NjJMMTQ5LjExIDg5LjU3NTVDMTQ4LjQ1MyA5MC40NjM0IDE0Ny4yMDEgOTAuNjUwNiAxNDYuMzEzIDg5Ljk5MzZDMTQ1LjQyNSA4OS4zMzY2IDE0NS4yMzggODguMDg0MSAxNDUuODk1IDg3LjE5NjJMMTQ3LjY3OSA4NC43ODQ3TDE0OC44NjkgODMuMTc2OUwxNjcuMzA4IDU4LjI1NzRDMTY4LjYyMiA1Ni40ODE1IDE3MS4xMjcgNTYuMTA3MiAxNzIuOTAzIDU3LjQyMTJMMTczLjY0NCA1Ny45Njk3TDE3Ni4wMjYgNTQuNzUwOVoiIGZpbGw9IiNENjQ1MDAiLz4KPC9zdmc+Cg==",at={id:"algosigner",chain:"algorand",name:"AlgoSigner",icon:mi,pkg:""},yi=T(e=>e==="betanet"?"BetaNet":e==="testnet"?"TestNet":e==="mainnet"?"MainNet":e,"getNetwork"),An=class extends R{sdk;network;constructor({sdk:e,network:t}){super(),this.sdk=e,this.network=t}static async init(e){console.log(`[${at.id}] init started`);try{if(typeof window>"u"||window.AlgoSigner===void 0)throw new Error("AlgoSigner is not available.");let t=window.AlgoSigner,n="mainnet";return e?.config?.network&&(e.config.network=="mainnet"||e.config.network=="testnet"||e.config.network=="betanet"?n=e.config.network:console.warn(`invalid network in ${at.id} config`)),new An({sdk:t,network:n})}catch(t){return console.error("Error initializing...",t),null}}async connect(){await this.sdk.connect();let e=await this.sdk.accounts({ledger:yi(this.network)});if(e.length===0)throw new Error(`No accounts found for ${at.id}`);let t=e.map(({address:n},i)=>({name:`AlgoSigner ${i+1}`,address:n,providerId:at.id}));return lt(t),ut(t[0]),{...at,accounts:t}}async reconnect(e){return(window===void 0||window.AlgoSigner===void 0)&&e(),null}async disconnect(){}async signTransactions(e,t){let n=await ct();console.log("getting algosdk... TODO optimize this!");let o=t.map(a=>n.decodeObj(a)).reduce((a,d,u)=>{let f={txn:this.sdk.encoding.msgpackToBase64(t[u])};return("txn"in d||!e.includes(n.encodeAddress(d.snd)))&&(f.txn=this.sdk.encoding.msgpackToBase64(n.decodeSignedTransaction(t[u]).txn.toByte()),f.signers=[]),a.push(f),a},[]);return(await this.sdk.signTxn(o)).reduce((a,d,u)=>(d?a.push(new Uint8Array(yn.Buffer.from(d.blob,"base64"))):a.push(t[u]),a),[])}},fe=An;T(fe,"AlgoSignerClient");V(fe,"metadata",at);var Ai="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPCEtLSBHZW5lcmF0b3I6IEFkb2JlIElsbHVzdHJhdG9yIDI2LjUuMCwgU1ZHIEV4cG9ydCBQbHVnLUluIC4gU1ZHIFZlcnNpb246IDYuMDAgQnVpbGQgMCkgIC0tPgo8c3ZnIHZlcnNpb249IjEuMSIgaWQ9IkxheWVyXzEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4IgoJIHZpZXdCb3g9IjAgMCAzMDAgMzAwIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCAzMDAgMzAwOyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+CjxzdHlsZSB0eXBlPSJ0ZXh0L2NzcyI+Cgkuc3Qwe2ZpbGw6dXJsKCNTVkdJRF8xXyk7fQoJLnN0MXtmaWxsOnVybCgjU1ZHSURfMDAwMDAwNDM0MjYxNjcxNDAxMDY1ODIyNzAwMDAwMDIxMzA3Njg5MDYwNzMxMTM0ODRfKTt9Cgkuc3Qye2ZpbGw6dXJsKCNTVkdJRF8wMDAwMDEwMjUxOTMxNjAxNTI3NjU4MTY0MDAwMDAxNjI3NDExMjM4MzE3NTY0MTc1OV8pO2ZpbHRlcjp1cmwoI0Fkb2JlX09wYWNpdHlNYXNrRmlsdGVyKTt9Cgkuc3Qze2ZpbGw6dXJsKCNTVkdJRF8wMDAwMDEzODU2MzM4MjQ2MjA4NjAyMDM1MDAwMDAxNDg3ODQ5MDI3MDc4MjA3MTIwN18pO30KCS5zdDR7bWFzazp1cmwoI21hc2swXzE2NjFfMjk1XzAwMDAwMDg4MTMyMjUxNTk3NDQxNTczNDkwMDAwMDExNjkzNjEyMDE4NTA2NjgxNDgxXyk7fQoJLnN0NXtmaWxsOnVybCgjU1ZHSURfMDAwMDAxMDYxMjA2MzI0NjE3OTI4NzExNjAwMDAwMDc0MzM5MTMwMzgzMzc3NjY1NzZfKTt9Cjwvc3R5bGU+CjxnPgoJCgkJPGxpbmVhckdyYWRpZW50IGlkPSJTVkdJRF8xXyIgZ3JhZGllbnRVbml0cz0idXNlclNwYWNlT25Vc2UiIHgxPSIyNDYuNjAzIiB5MT0iOS4yMjEyIiB4Mj0iMTc0LjE1OCIgeTI9IjMwOC41NDI2IiBncmFkaWVudFRyYW5zZm9ybT0ibWF0cml4KDEgMCAwIC0xIDAgMzAyKSI+CgkJPHN0b3AgIG9mZnNldD0iMCIgc3R5bGU9InN0b3AtY29sb3I6IzBCNDZGOSIvPgoJCTxzdG9wICBvZmZzZXQ9IjEiIHN0eWxlPSJzdG9wLWNvbG9yOiNCQkZCRTAiLz4KCTwvbGluZWFyR3JhZGllbnQ+Cgk8cGF0aCBjbGFzcz0ic3QwIiBkPSJNMjc0LjcsOTMuOUwxNjYuNiwyM3YzOS42bDY5LjQsNDUuMWwtOC4yLDI1LjhoLTYxLjJ2MzIuOWg2MS4ybDguMiwyNS44bC02OS40LDQ1LjFWMjc3bDEwOC4yLTcwLjdMMjU3LDE1MC4xCgkJTDI3NC43LDkzLjl6Ii8+CgkKCQk8bGluZWFyR3JhZGllbnQgaWQ9IlNWR0lEXzAwMDAwMDE4MjI4MjM3MTUxMjM5MTUxMzIwMDAwMDE3ODM4NjY0MjU5NzY2MjczOTI1XyIgZ3JhZGllbnRVbml0cz0idXNlclNwYWNlT25Vc2UiIHgxPSIxMjkuMzUxNiIgeTE9Ii0xOS4xNTczIiB4Mj0iNTYuOTA2NiIgeTI9IjI4MC4xNjQxIiBncmFkaWVudFRyYW5zZm9ybT0ibWF0cml4KDEgMCAwIC0xIDAgMzAyKSI+CgkJPHN0b3AgIG9mZnNldD0iMCIgc3R5bGU9InN0b3AtY29sb3I6IzBCNDZGOSIvPgoJCTxzdG9wICBvZmZzZXQ9IjEiIHN0eWxlPSJzdG9wLWNvbG9yOiNCQkZCRTAiLz4KCTwvbGluZWFyR3JhZGllbnQ+Cgk8cGF0aCBzdHlsZT0iZmlsbDp1cmwoI1NWR0lEXzAwMDAwMDE4MjI4MjM3MTUxMjM5MTUxMzIwMDAwMDE3ODM4NjY0MjU5NzY2MjczOTI1Xyk7IiBkPSJNNzIuNSwxNjYuNGg2MXYtMzIuOUg3Mi4ybC03LjktMjUuOAoJCWw2OS4yLTQ1LjFWMjNMMjUuMyw5My45TDQzLDE1MC4xbC0xNy43LDU2LjJMMTMzLjcsMjc3di0zOS42bC02OS40LTQ1LjFMNzIuNSwxNjYuNHoiLz4KCTxkZWZzPgoJCTxmaWx0ZXIgaWQ9IkFkb2JlX09wYWNpdHlNYXNrRmlsdGVyIiBmaWx0ZXJVbml0cz0idXNlclNwYWNlT25Vc2UiIHg9IjI1LjQiIHk9IjIzIiB3aWR0aD0iMjQ3LjYiIGhlaWdodD0iMjU0Ij4KCQkJPGZlQ29sb3JNYXRyaXggIHR5cGU9Im1hdHJpeCIgdmFsdWVzPSIxIDAgMCAwIDAgIDAgMSAwIDAgMCAgMCAwIDEgMCAwICAwIDAgMCAxIDAiLz4KCQk8L2ZpbHRlcj4KCTwvZGVmcz4KCQoJCTxtYXNrIG1hc2tVbml0cz0idXNlclNwYWNlT25Vc2UiIHg9IjI1LjQiIHk9IjIzIiB3aWR0aD0iMjQ3LjYiIGhlaWdodD0iMjU0IiBpZD0ibWFzazBfMTY2MV8yOTVfMDAwMDAwODgxMzIyNTE1OTc0NDE1NzM0OTAwMDAwMTE2OTM2MTIwMTg1MDY2ODE0ODFfIj4KCQkKCQkJPGxpbmVhckdyYWRpZW50IGlkPSJTVkdJRF8wMDAwMDE2NTkyOTcyNDMwMzE2NDIwMzAwMDAwMDAwNzEwMTkwNDk4NDUxOTkxNTE2Ml8iIGdyYWRpZW50VW5pdHM9InVzZXJTcGFjZU9uVXNlIiB4MT0iMjQ2LjYwMzgiIHkxPSI5LjIyMTQiIHgyPSIxNzQuMTU4OCIgeTI9IjMwOC41NDI4IiBncmFkaWVudFRyYW5zZm9ybT0ibWF0cml4KDEgMCAwIC0xIDAgMzAyKSI+CgkJCTxzdG9wICBvZmZzZXQ9IjAiIHN0eWxlPSJzdG9wLWNvbG9yOiMwQjQ2RjkiLz4KCQkJPHN0b3AgIG9mZnNldD0iMSIgc3R5bGU9InN0b3AtY29sb3I6I0JCRkJFMCIvPgoJCTwvbGluZWFyR3JhZGllbnQ+CgkJPHBhdGggc3R5bGU9ImZpbGw6dXJsKCNTVkdJRF8wMDAwMDE2NTkyOTcyNDMwMzE2NDIwMzAwMDAwMDAwNzEwMTkwNDk4NDUxOTkxNTE2Ml8pO2ZpbHRlcjp1cmwoI0Fkb2JlX09wYWNpdHlNYXNrRmlsdGVyKTsiIGQ9IgoJCQlNMjc0LjcsOTMuOUwxNjYuNiwyM3YzOS42bDY5LjQsNDUuMWwtOC4yLDI1LjhoLTYxLjJ2MzIuOWg2MS4ybDguMiwyNS44bC02OS40LDQ1LjFWMjc3bDEwOC4yLTcwLjdMMjU3LDE1MC4xTDI3NC43LDkzLjl6Ii8+CgkJCgkJCTxsaW5lYXJHcmFkaWVudCBpZD0iU1ZHSURfMDAwMDAxMTk4MTE3MDc2MjE0NzI4MTQyNzAwMDAwMTA4Mjk2NTkzODM4NTEyMDI0OTFfIiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSIgeDE9IjEyOS4zNTIxIiB5MT0iLTE5LjE1NzEiIHgyPSI1Ni45MDcxIiB5Mj0iMjgwLjE2NDIiIGdyYWRpZW50VHJhbnNmb3JtPSJtYXRyaXgoMSAwIDAgLTEgMCAzMDIpIj4KCQkJPHN0b3AgIG9mZnNldD0iMCIgc3R5bGU9InN0b3AtY29sb3I6IzBCNDZGOSIvPgoJCQk8c3RvcCAgb2Zmc2V0PSIxIiBzdHlsZT0ic3RvcC1jb2xvcjojQkJGQkUwIi8+CgkJPC9saW5lYXJHcmFkaWVudD4KCQk8cGF0aCBzdHlsZT0iZmlsbDp1cmwoI1NWR0lEXzAwMDAwMTE5ODExNzA3NjIxNDcyODE0MjcwMDAwMDEwODI5NjU5MzgzODUxMjAyNDkxXyk7IiBkPSJNNzIuNSwxNjYuNGg2MXYtMzIuOUg3Mi4ybC03LjktMjUuOAoJCQlsNjkuMi00NS4xVjIzTDI1LjMsOTMuOUw0MywxNTAuMWwtMTcuNyw1Ni4yTDEzMy43LDI3N3YtMzkuNmwtNjkuNC00NS4xTDcyLjUsMTY2LjR6Ii8+Cgk8L21hc2s+Cgk8ZyBjbGFzcz0ic3Q0Ij4KCQkKCQkJPGxpbmVhckdyYWRpZW50IGlkPSJTVkdJRF8wMDAwMDEwOTAxOTkxODU1Nzc3MzA1MzQyMDAwMDAxNzYwMjQwNTkwODA2NzEyMDMwMF8iIGdyYWRpZW50VW5pdHM9InVzZXJTcGFjZU9uVXNlIiB4MT0iNDYuNDY2MiIgeTE9IjIyOC43NTU0IiB4Mj0iMTcxLjg2MzgiIHkyPSIxMzUuMTAzOSIgZ3JhZGllbnRUcmFuc2Zvcm09Im1hdHJpeCgxIDAgMCAtMSAwIDMwMikiPgoJCQk8c3RvcCAgb2Zmc2V0PSIwLjExOTgiIHN0eWxlPSJzdG9wLWNvbG9yOiM4OTUyRkY7c3RvcC1vcGFjaXR5OjAuODciLz4KCQkJPHN0b3AgIG9mZnNldD0iMSIgc3R5bGU9InN0b3AtY29sb3I6I0RBQkRGRjtzdG9wLW9wYWNpdHk6MCIvPgoJCTwvbGluZWFyR3JhZGllbnQ+CgkJCgkJCTxyZWN0IHg9IjI1LjQiIHk9IjIzIiBzdHlsZT0iZmlsbDp1cmwoI1NWR0lEXzAwMDAwMTA5MDE5OTE4NTU3NzczMDUzNDIwMDAwMDE3NjAyNDA1OTA4MDY3MTIwMzAwXyk7IiB3aWR0aD0iMjQ3LjYiIGhlaWdodD0iMjU0Ii8+Cgk8L2c+CjwvZz4KPC9zdmc+Cg==",Pt={id:"exodus",chain:"algorand",name:"Exodus",icon:Ai,pkg:""},Mn=class extends R{sdk;onlyIfTrusted;constructor({sdk:e,onlyIfTrusted:t}){super(),this.sdk=e,this.onlyIfTrusted=t}static async init(e){try{if(typeof window>"u"||window.exodus===void 0)throw new Error("Exodus is not available.");let t=window.exodus.algorand;console.log("exo clientSdk 9",t),console.log({...t}),t=t.valueOf(),console.log("exo clientSdk 1",t),console.log({...t}),t=it(t.valueOf()),console.log("exo clientSdk 2",t),console.log({...t});let n=!1;return e?.config?.onlyIfTrusted&&(n=e?.config?.onlyIfTrusted),new Mn({sdk:t,onlyIfTrusted:n})}catch(t){return console.error("Error initializing...",t),null}}async connect(){let e="";try{let{address:n}=await this.sdk.connect({onlyIfTrusted:this.onlyIfTrusted});console.log("addr",n),e=n}catch(n){console.log("catch exo err 1"),console.log(n);let{address:i}=await window.exodus.algorand.connect({onlyIfTrusted:this.onlyIfTrusted});console.log("addr2",i),e=i}if(!e)throw new Error(`No accounts found for ${Pt.id}`);let t=[{name:"Exodus 1",address:e,providerId:Pt.id}];return lt(t),ut(t[0]),{...Pt,accounts:t}}async reconnect(e){return(window===void 0||window.exodus===void 0||window.exodus.algorand.isConnected!==!0)&&e(),null}async disconnect(){this.sdk.disconnect()}async signTransactions(e,t){let n=await ct();console.log("getting algosdk... TODO optimize this!");let i=t.map(a=>n.decodeObj(a)),o=i.reduce((a,d,u)=>(!("txn"in d)&&e.includes(n.encodeAddress(d.snd))&&a.push(t[u]),a),[]),r=await this.sdk.signTransaction(o);return i.reduce((a,d,u)=>{if("txn"in d)a.push(t[u]);else{let f=r.shift();f&&a.push(f)}return a},[])}},ge=Mn;T(ge,"ExodusClient");V(ge,"metadata",Pt);var Mi="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+Cjxzdmcgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4bWw6c3BhY2U9InByZXNlcnZlIiB4bWxuczpzZXJpZj0iaHR0cDovL3d3dy5zZXJpZi5jb20vIiBzdHlsZT0iZmlsbC1ydWxlOmV2ZW5vZGQ7Y2xpcC1ydWxlOmV2ZW5vZGQ7c3Ryb2tlLWxpbmVqb2luOnJvdW5kO3N0cm9rZS1taXRlcmxpbWl0OjI7Ij4KICAgIDxyZWN0IHg9IjAiIHk9IjAiIHdpZHRoPSIxMDI0IiBoZWlnaHQ9IjEwMjQiLz4KICAgIDxnIHRyYW5zZm9ybT0ibWF0cml4KDEuNjgyMDksMCwwLDEuNjgyMDksMjI2LjM2OCwyMTIuODE4KSI+CiAgICAgICAgPHBhdGggZD0iTTMyNy4wNDksMjgwLjE5MkwxNjkuNTI0LDEzTDEyLDI4MC4xOTJMMTY5LjUyNCwxODkuMDg0TDMyNy4wNDksMjgwLjE5MloiIHN0eWxlPSJmaWxsOndoaXRlO2ZpbGwtcnVsZTpub256ZXJvOyIvPgogICAgPC9nPgogICAgPGcgdHJhbnNmb3JtPSJtYXRyaXgoMS42ODIwOSwwLDAsMS42ODIwOSwyMjYuMzY4LDIxMi44MTgpIj4KICAgICAgICA8cGF0aCBkPSJNMjk5LjU0NiwzMDdMMTY5LjUyNSwyMzguNDczTDM5LjUwNCwzMDdMMTY5LjUyNSwyNjQuNjdMMjk5LjU0NiwzMDdaIiBzdHlsZT0iZmlsbDp3aGl0ZTtmaWxsLXJ1bGU6bm9uemVybzsiLz4KICAgIDwvZz4KPC9zdmc+Cg==",Q={id:"defly",chain:"algorand",name:"Defly",icon:Mi,pkg:"@blockshake/defly-connect"},In=class extends R{sdk;constructor({sdk:e}){super(),this.sdk=e}static async init(e){try{let t;if(e&&e.sdk)t=e.sdk;else{let n,i={shouldShowSignTxnToast:!1};n=e?.config||i;let o=await import("@blockshake/defly-connect"),r=o.DeflyWalletConnect||o.default.DeflyWalletConnect;t=new r(n)}return new In({sdk:t})}catch(t){return console.error("Error initializing...",t),null}}async connect(e){let t=await this.sdk.connect().catch(console.info);if(this.sdk.connector?.on("disconnect",e),!t||t.length===0)throw new Error(`No accounts found for ${Q.id}`);let n=t.map((i,o)=>({name:`Defly Wallet ${o+1}`,address:i,providerId:Q.id}));return{...Q,accounts:n}}async reconnect(e){let t=await this.sdk.reconnectSession().catch(console.info);if(this.sdk.connector?.on("disconnect",e),!t)return null;let n=t.map((i,o)=>({name:`Defly Wallet ${o+1}`,address:i,providerId:Q.id}));return lt(n),ut(n[0]),{...Q,accounts:t.map((i,o)=>({name:`Defly Wallet ${o+1}`,address:i,providerId:Q.id}))}}async disconnect(){await this.sdk.disconnect()}async signTransactions(e,t){let n=await ct();console.log("getting algosdk... TODO optimize this!");let i=t.map(a=>n.decodeObj(a)),o=i.reduce((a,d,u)=>(!("txn"in d)&&e.includes(n.encodeAddress(d.snd))?a.push({txn:n.decodeUnsignedTransaction(t[u])}):a.push({txn:n.decodeSignedTransaction(t[u]).txn,signers:[]}),a),[]),r=await this.sdk.signTransaction([o]);return i.reduce((a,d,u)=>{if("txn"in d)a.push(t[u]);else{let f=r.shift();f&&a.push(f)}return a},[])}},he=In;T(he,"DeflyClient");V(he,"metadata",Q);var Mt={pera:{client:_t},inkey:{client:Rt},myalgo:{client:Wt},algosigner:{client:fe},exodus:{client:ge},defly:{client:he}},Vi=Object.values(Mt).map(e=>e.client.metadata.id),Hi=Object.values(Mt).map(e=>e.client.metadata.pkg).filter(e=>e!==""),Ji=T(e=>{let t=[];for(let n of e)t.push(Mt[n].client.metadata.pkg);return t},"excludeClients"),ot=T((e,t=!0)=>{let n=nt({id:e,client:null,initParams:t,inited:!1,initing:!1,signing:!1,isReady:async()=>(console.log("isReady"),n.inited||(console.log("do client.init"),n.initing=!0,typeof t=="object"&&(t.config||t.sdk)?n.client=await Mt[e].client.init(t):t==!0?n.client=await Mt[e].client.init():console.warn("bad/incomplete init params for wallet:",e),n.initing=!1,n.inited=!0),!0),connect:async()=>{console.log(`[${e}] connect (in r obj)`),await n.isReady(),await n.client.connect(()=>{})},disconnect:async()=>{await n.isReady(),fn(e);try{await n.client.disconnect()}catch(i){console.warn(i)}},reconnect:async()=>{await n.isReady(),await n.client.reconnect(()=>{})},setAsActiveWallet:()=>{let i=dn(e);if(i)p.stored.activeAccount=i[0];else throw new Error("No accounts for this provider to set as active")},removeAccounts:()=>{fn(e)},get accounts(){return z(P(()=>dn(e)))},get isActive(){return P(()=>p.stored.activeAccount?.providerId===e)},get isConnected(){return z(P(()=>p.stored.connectedAccounts.some(i=>i.providerId===e)))}});return n},"createWallet"),Qi=T((e=Ti)=>{console.log("enableWallets started"),p.enabledWallets!==null?console.warn("enableWallets called while some wallets were already initialized"):p.enabledWallets={};for(let[t,n]of Object.entries(e)){let i=t;p.allWallets[i].initParams=n,p.enabledWallets[i]=p.allWallets[i]}return p.enabledWallets},"enableWallets"),dn=T(e=>p.stored.connectedAccounts.filter(t=>t.providerId===e),"getAccountsByProvider"),fn=T(e=>{if(console.log("removeAccountsByClient",e),p.stored.activeAccount){let n=p.stored.connectedAccounts.filter(i=>i.providerId==e);for(let i of n)if(i.address==p.stored.activeAccount.address&&i.providerId==p.stored.activeAccount.providerId){p.stored.activeAccount=null;break}}let t=p.stored.connectedAccounts.filter(n=>n.providerId!==e);p.stored.connectedAccounts=t},"removeAccountsByClient"),lt=T(e=>{console.log("addConnectedAccounts",e);for(let t of e){let n=!1;for(let i of p.stored.connectedAccounts)t.providerId==i.providerId&&t.address==i.address&&(n=!0);n||p.stored.connectedAccounts.push(t)}},"addConnectedAccounts"),ut=T(e=>{console.log("setAsActiveAccount",e),p.stored.activeAccount=e},"setAsActiveAccount"),Ki=T(async e=>{if(console.log("signTransactions",e),!p.enabledWallets)throw new Error("No wallets enabled");if(!p.activeWalletId)throw new Error("No active wallet");if(!p.activeAddress)throw new Error("No active account");let t=p.enabledWallets[p.activeWalletId];if(!t)throw new Error("No active wallet... shouldnt happen.");(t.inited==!1||t.client==null)&&await t.isReady(),t.signing=!0;let n=await t.client.signTransactions([p.activeAddress],e);return t.signing=!1,console.log("txnsSigned",n),n},"signTransactions"),Ii=(e=>(e.PERA="pera",e.MYALGO="myalgo",e.INKEY="inkey",e.ALGOSIGNER="algosigner",e.EXODUS="exodus",e.DEFLY="defly",e))(Ii||{}),Ti={pera:!0,inkey:!0,myalgo:!0,algosigner:!0,exodus:!0,defly:!0},bi={pera:ot("pera"),inkey:ot("inkey"),myalgo:ot("myalgo"),algosigner:ot("algosigner"),exodus:ot("exodus"),defly:ot("defly")},p=nt({allWallets:bi,enabledWallets:null,stored:{version:0,connectedAccounts:[],activeAccount:null},activeAddress:z(P(()=>{let e="";return p.stored.activeAccount&&(e=p.stored.activeAccount.address),e})),activeWalletId:z(P(()=>{let e=null;return p.stored.activeAccount&&(e=p.stored.activeAccount.providerId),e})),activeWallet:z(P(()=>{let e;return p.activeWalletId!==null&&p.enabledWallets!==null&&(e=p.enabledWallets[p.activeWalletId]),e})),isSigning:z(P(()=>{let e=!1;if(p.enabledWallets){for(let[t,n]of Object.entries(p.enabledWallets))if(n.signing){e=!0;break}}return e}))});pe()&&di();var Ni=T(e=>{console.log("onChange"),console.log("latest",e)},"onChange");yt(p,e=>{console.log("[in pkg] something changed"),Ni(e)},{deep:!0});function pe(){let e=!1;return typeof window!==void 0&&typeof window=="object"&&"document"in window&&typeof window.document=="object"&&(e=!0),e}T(pe,"isBrowser");var Xi=gi,$i=Wt,qi=Rt,ts={};E();var Ft=class{ready=!1;initing=!1;destroying=!1;walEl=null;walElContainer=null;walWin=null;onMsgHandler=null;requests=new Map;constructor(t){t?typeof t=="string"?this.initId(t):typeof t=="object"?t.id?this.initId(t.id):t.src?this.initSrc(t.src,t.align):console.error("err constructing FrameBus"):console.error("err constructing FrameBus"):this.initSrc(),document.body.addEventListener("DOMNodeRemoved",n=>{this.destroying||n.target==this.walElContainer&&(console.log("iframe container removed from DOM"),this.destroy())},!1)}initId(t){console.log("initId"),console.warn("WARNING: initId is less tested + supported than initSrc..."),this.destroy();let n=document.getElementById(t);if(!n){console.error("no walEl");return}this.walEl=n;let i=n.contentWindow;if(n.classList.add("inkey-frame"),!i){console.error("no walWin");return}this.walWin=i,this.ready=!0,this.onMsgHandler=this.onMessage.bind(this),window.addEventListener("message",this.onMsgHandler,!1)}async initSrc(t="http://default-src.com",n){if(console.log("initSrc",t),document.querySelector("iframe#inkey-frame")){console.warn("dont mount frame to DOM again");return}this.destroy(),this.initing=!0;let o=document.createElement("div");o.setAttribute("id","inkey-frame-container"),n=="left"&&o.classList.add("align-left"),n=="right"&&o.classList.add("align-right");let r=document.createElement("iframe");r.src=t,r.classList.add("inkey-frame"),r.setAttribute("id","inkey-frame"),r.setAttribute("name","walFrame"),r.setAttribute("title","Algorand Microwallet"),r.setAttribute("frameborder","0"),r.setAttribute("sandbox","allow-scripts allow-same-origin allow-forms allow-modals allow-popups allow-downloads"),r.setAttribute("allow","publickey-credentials-get; clipboard-write"),r.style.visibility="hidden",this.walEl=r,this.walElContainer=o,o.appendChild(r),document.body.append(o);let c=r.contentWindow;if(!c){console.error("no walWin");return}this.walWin=c,r.addEventListener("load",()=>{this.ready=!0,this.initing=!1,this.onMsgHandler=this.onMessage.bind(this),window.addEventListener("message",this.onMsgHandler,!1);let a={source:"ncc-inkey-client",type:"get-style-recs"};this.emit(a)})}showFrame(t){if(this.walEl){this.walEl.classList.add("visible"),this.walEl.style.position="sticky",setTimeout(()=>{this.walEl.style.position="absolute"},100);let n={source:"ncc-inkey-client",type:"set-visibility",payload:{visible:!0,route:t}};this.emit(n)}}hideFrame(){if(this.walEl){this.walEl.classList.remove("visible");let t={source:"ncc-inkey-client",type:"set-visibility",payload:{visible:!1}};this.emit(t)}}setHeight(t,n="px"){this.walEl&&(this.walEl.style.height=`${t}${n}`)}destroy(){this.destroying=!0,this.walElContainer&&(this.walEl&&this.walElContainer.removeChild(this.walEl),document.body.removeChild(this.walElContainer),this.walElContainer=null),this.walEl&&(this.walEl=null),this.walWin&&(this.walWin=null),this.onMsgHandler&&(window.removeEventListener("message",this.onMsgHandler,!1),this.onMsgHandler=null),this.removeStyles(),this.ready=!1,this.initing=!1,this.destroying=!1}async isReady(){return new Promise(t=>{if(this.ready)t(!0);else if(this.initing){let n=setInterval(()=>{console.log("isReady intervaling"),this.ready&&(clearInterval(n),t(!0))},150)}else console.warn("do initSrc again"),t(!1)})}setOnDisconnect(t){this.onDisconnect=t}onDisconnect(){console.log("onDisconnect")}onMessage(t){if(t.data.source&&t.data.source=="ncc-inkey-wallet"){if(console.log("client got mess",t.data),t.data.type==="hide"&&this.hideFrame(),t.data.type==="disconnect"&&this.onDisconnect(),t.data.type==="set-height"){let n=t.data.payload.height;n&&this.setHeight(n)}if(t.data.type=="styles-recommonded"){let n=t.data.payload.css;this.insertStyles(n)}if(t.data.async&&t.data.async==!0&&t.data.uuid){let n=this.requests.get(t.data.uuid);if(!n)throw Error("no outgoing val for event type");this.requests.delete(t.data.uuid);let i=n.resolve;i(t.data.payload)}}}emit(t){if(!this.ready)throw new Error("FrameBus not ready");let n=new Date().getTime().toString();if(t={...t,uuid:n},this.walEl&&this.walWin)this.walWin.postMessage(t,this.walEl.src);else throw new Error("no wallEl or walWin")}emitAsync(t){if(console.log("emitAsync"),!this.ready)throw new Error("FrameBus not ready");let n=new Date().getTime().toString();if(t={...t,uuid:n,async:!0},this.walEl&&this.walWin)this.walWin.postMessage(t,this.walEl.src);else throw new Error("no wallEl or walWin");return new Promise(i=>{this.requests.set(n,{req:t,resolve:i})})}insertStyles(t){let n=document.querySelector("style#inkey-frame-styles");if(n)n.innerText=t;else{let i=document.createElement("style");i.setAttribute("id","inkey-frame-styles"),i.innerText=t,document.head.appendChild(i)}this.walEl?setTimeout(()=>{this.walEl.style.visibility="initial"},100):console.warn("no walEl for style.visibility reset")}removeStyles(){let t=document.querySelector("style#inkey-frame-styles");t&&document.head.removeChild(t)}};var we=class{algodClient;indexerClient=void 0;config=void 0;sdk=Ue;account=void 0;address=void 0;mnemonic=void 0;uiLoading=!1;inkeyWallet={defaultSrc:"123",otherConfig:{},frameBus:void 0};constructor(t){this.setConfig(t)}isValidConfig(t){let n=!0;return(!t.BASE_SERVER||!t.API_TOKEN)&&(n=!1),n}setConfig(t){if(!this.isValidConfig(t))throw new Error("bad config!");this.config=t,this.algodClient=new be(t.API_TOKEN,t.BASE_SERVER,t.PORT),t.INDEX_SERVER?this.indexerClient=new Ne(t.API_TOKEN,t.INDEX_SERVER,t.PORT):console.warn("No indexer configured because INDEX_SERVER was not provided."),t.SIGNING_MODE&&t.SIGNING_MODE=="inkey"&&(t.INKEY_SRC||(t.INKEY_SRC="https://inkey.app"),t.INKEY_ALIGN||(t.INKEY_ALIGN="center"),this.initInkey({src:t.INKEY_SRC,align:t.INKEY_ALIGN}))}getConfig(){return this.config?this.config:!1}async checkStatus(){if(!this.getConfig())throw new Error("No node configuration set.");let t=await this.algodClient.status().do();return console.log("Algorand network status: %o",t),t}initInkey(t){if(!t.src){console.warn("You must provide INKEY_SRC in Algonaut.js config");return}this.inkeyWallet.frameBus&&(this.inkeyWallet.frameBus.destroy(),this.inkeyWallet.frameBus=void 0),t.src?this.inkeyWallet.frameBus=new Ft({src:t.src,align:t.align}):console.warn("Cannot init Inkey")}setAccount(t){if(!t)throw new Error("No account provided.");this.account=t,this.address=t.addr,this.mnemonic=Tt(t.sk)}setInkeyAccount(t){if(!t)throw new Error("No address provided.");this.account={addr:t,sk:new Uint8Array([])}}createWallet(){if(this.account=Vt(),this.account)return this.address=this.account.addr,this.mnemonic=Tt(this.account.sk),{address:this.account.addr,mnemonic:this.mnemonic||""};throw new Error("There was no account: could not create algonaut wallet!")}recoverAccount(t){if(!t)throw new Error("algonaut.recoverAccount: No mnemonic provided.");return this.account=S.recoverAccount(t),this.account}async waitForConfirmation(t,n,i=!1){if(!t)throw new Error("waitForConfirmation: No transaction ID provided.");let o=(await this.algodClient.status().do())["last-round"],r=o+(n||50),c={status:"fail",message:""};for(;o<r;){let a="";try{a=await this.algodClient.pendingTransactionInformation(t).do(),i&&console.log("waiting for confirmation")}catch(d){console.error(d.response?.text)}if(a["confirmed-round"]!==null&&a["confirmed-round"]>0){i&&console.log("Transaction confirmed in round "+a["confirmed-round"]),c.txId=t,c.status="success",c.message="Transaction confirmed in round "+a["confirmed-round"];break}o=(await this.algodClient.status().do())["last-round"]}return c}generateLogicSig(t){if(!t)throw new Error("No program string provided.");return S.generateLogicSig(t)}async atomicOptInAsset(t,n){if(!this.account)throw new Error("No account set in Algonaut.");if(!t)throw new Error("No asset index provided.");let i=n?.suggestedParams||await this.algodClient.getTransactionParams().do();return{transaction:Nt({from:this.account.addr,to:this.account.addr,assetIndex:t,amount:0,suggestedParams:i}),transactionSigner:this.account,isLogigSig:!1}}async optInAsset(t,n,i){if(!this.account)throw new Error("There was no account!");if(!t)throw new Error("No asset index provided.");let{transaction:o}=await this.atomicOptInAsset(t,i);return await this.sendTransaction(o,n)}async isOptedIntoAsset(t){if(!t.account)throw new Error("No account provided.");if(!t.assetId)throw new Error("No asset ID provided.");let n=!1;return(await this.getAccountInfo(t.account)).assets.forEach(o=>{o["asset-id"]==t.assetId&&(n=!0)}),n}encodeArguments(t){return S.encodeArguments(t)}async atomicCreateAsset(t){if(!t.assetName)throw new Error("args.assetName not provided.");if(!t.symbol)throw new Error("args.symbol not provided");if(typeof t.decimals>"u")throw new Error("args.decimals not provided.");if(!t.amount)throw new Error("args.amount not provided.");if(!this.account)throw new Error("There was no account set in Algonaut");t.metaBlock||(t.metaBlock=" "),t.defaultFrozen||(t.defaultFrozen=!1),t.assetURL||(t.assetURL=void 0);let n=t.metaBlock.length;if(n>1023)throw console.error("meta block is "+n),new Error("drat! this meta block is too long!");let o=new TextEncoder().encode(t.metaBlock),r=this.account.addr,c=t.amount,a=t.manager&&t.manager.length>0?t.manager:this.account.addr,d=t.reserve&&t.reserve.length>0?t.reserve:this.account.addr,u=t.freeze&&t.freeze.length>0?t.freeze:this.account.addr,f=t.clawback&&t.clawback.length>0?t.clawback:this.account.addr,m=t.optionalFields?.suggestedParams||await this.algodClient.getTransactionParams().do();return{transaction:Se(r,o,c,t.decimals,t.defaultFrozen,a,d,u,f,t.symbol,t.assetName,t.assetURL,t.assetMetadataHash,m),transactionSigner:this.account,isLogigSig:!1}}async createAsset(t,n){let o=(await this.atomicCreateAsset(t)).transaction;try{let c=await this.sendTransaction(o,n),a=await this.algodClient.pendingTransactionInformation(o.txID().toString()).do();return c.createdIndex=a["asset-index"],c}catch(r){throw console.log("transaction error"),console.log(r),new Error(r)}}async atomicDeleteAsset(t,n){if(!this.account)throw new Error("there was no account!");if(!t)throw new Error("No assetId provided!");let i=new TextEncoder,o=n?.suggestedParams||await this.algodClient.getTransactionParams().do();return{transaction:ke(this.account.addr,i.encode("doh!"),t,o),transactionSigner:this.account,isLogigSig:!1}}async deleteAsset(t,n,i){if(!t)throw new Error("No asset ID provided!");let{transaction:o}=await this.atomicDeleteAsset(t,i);return await this.sendTransaction(o,n)}async atomicSendAsset(t){if(!t.to)throw new Error("No to address provided");if(!t.assetIndex)throw new Error("No asset index provided");if(!t.amount)throw new Error("No amount provided");let n=t.from||this.account?.addr;if(!n)throw new Error("there is no fromAddr");let i=t.optionalFields?.suggestedParams||await this.algodClient.getTransactionParams().do();return{transaction:Nt({from:n,to:t.to,amount:t.amount,assetIndex:t.assetIndex,suggestedParams:i}),transactionSigner:this.account,isLogigSig:!1}}async sendAsset(t,n){if(!this.account)throw new Error("There was no account!");let{transaction:i}=await this.atomicSendAsset(t);return await this.sendTransaction(i,n)}async getAssetInfo(t){if(!t)throw new Error("No asset ID provided");return await this.algodClient.getAssetByID(t).do()}async atomicOptInApp(t){if(!t.appIndex)throw new Error("No app ID provided");if(!this.account)throw new Error("No account in algonaut");let n=this.account.addr,i=t.optionalFields?.suggestedParams||await this.algodClient.getTransactionParams().do();return{transaction:Oe({from:n,appIndex:t.appIndex,suggestedParams:i,appArgs:t.appArgs?this.encodeArguments(t.appArgs):void 0,accounts:t.optionalFields?.accounts?t.optionalFields?.accounts:void 0,foreignApps:t.optionalFields?.applications?t.optionalFields?.applications:void 0,foreignAssets:t.optionalFields?.assets?t.optionalFields?.assets:void 0}),transactionSigner:this.account,isLogigSig:!1}}async optInApp(t,n){let{transaction:i}=await this.atomicOptInApp(t);return await this.sendTransaction(i,n)}async atomicDeleteApp(t,n){if(!this.account)throw new Error("No account set.");if(!t)throw new Error("No app ID provided");let i=this.account.addr,o=n?.suggestedParams||await this.algodClient.getTransactionParams().do();return{transaction:ve(i,o,t),transactionSigner:this.account,isLogigSig:!1}}async atomicDeleteApplication(t,n){return console.warn("atomicDeleteApplication is deprecated and will be removed in future versions."),await this.atomicDeleteApp(t,n)}async deleteApp(t,n,i){if(!this.account)throw new Error("There was no account");try{let{transaction:o}=await this.atomicDeleteApp(t,i),r=o.txID().toString(),c=await this.sendTransaction(o,n),d=(await this.algodClient.pendingTransactionInformation(r).do()).txn.txn.apid;return{status:"success",message:"deleted app index "+d,txId:r}}catch(o){throw console.log(o),new Error(o.response?.text)}}async deleteApplication(t,n,i){return console.warn("deleteApplication is deprecated and will be removed in future versions."),await this.deleteApp(t,n,i)}async atomicCallApp(t){if(!this.account)throw new Error("There was no account!");if(!t.appIndex)throw new Error("Must provide appIndex");if(!t.appArgs.length)throw new Error("Must provide at least one appArgs");let n=this.encodeArguments(t.appArgs),i=t.optionalFields?.suggestedParams||await this.algodClient.getTransactionParams().do();return{transaction:Kt({from:this.account.addr,suggestedParams:i,appIndex:t.appIndex,appArgs:n,accounts:t.optionalFields?.accounts||void 0,foreignApps:t.optionalFields?.applications||void 0,foreignAssets:t.optionalFields?.assets||void 0,note:t.optionalFields?.note?this.to8Arr(t.optionalFields.note):void 0}),transactionSigner:this.account,isLogigSig:!1}}async callApp(t,n){let{transaction:i}=await this.atomicCallApp(t);return await this.sendTransaction(i,n)}async atomicCallAppWithLSig(t){if(!this.account)throw new Error("There was no account!");if(!t.appIndex)throw new Error("Must provide appIndex");if(!t.appArgs.length)throw new Error("Must provide at least one appArgs");let n=this.encodeArguments(t.appArgs),i=t.optionalFields?.suggestedParams||await this.algodClient.getTransactionParams().do();return{transaction:Kt({from:t.lsig.address(),suggestedParams:i,appIndex:t.appIndex,appArgs:n,accounts:t.optionalFields?.accounts||void 0,foreignApps:t.optionalFields?.applications||void 0,foreignAssets:t.optionalFields?.assets||void 0}),transactionSigner:t.lsig,isLogigSig:!0}}async atomicCloseOutApp(t){if(!this.account)throw new Error("There was no account!");if(!t.appIndex)throw new Error("Must provide appIndex");try{let n=t.optionalFields?.suggestedParams||await this.algodClient.getTransactionParams().do(),i=this.encodeArguments(t.appArgs);return{transaction:ze({from:this.account.addr,suggestedParams:n,appIndex:t.appIndex,appArgs:i,accounts:t.optionalFields?.accounts||void 0,foreignApps:t.optionalFields?.applications||void 0,foreignAssets:t.optionalFields?.assets||void 0}),transactionSigner:this.account,isLogigSig:!1}}catch(n){throw new Error(n)}}async closeOutApp(t,n){let{transaction:i}=await this.atomicCloseOutApp(t);return await this.sendTransaction(i,n)}getAppEscrowAccount(t){if(!t)throw new Error("No appId provided");return S.getAppEscrowAccount(t)}async getAppInfo(t){if(!t)throw new Error("No appId provided");let n=[this.algodClient.getApplicationByID(t).do()];this.account&&n.push(this.getAppLocalState(t));let i=await Promise.all(n),o=i[0],r=i[1],c={hasState:!0,globals:[],locals:r?.locals||[],creatorAddress:o.params.creator,index:t};return o.params["global-state"]&&(c.globals=this.decodeStateArray(o.params["global-state"])),c}async createApp(t,n){if(t.optionalFields&&t.optionalFields.note&&t.optionalFields.note.length>1023)throw console.warn("drat! your note is too long!"),new Error("Your note is too long");if(!this.account)throw new Error("There was no account!");if(!t.tealApprovalCode)throw new Error("No approval program provided");if(!t.tealClearCode)throw new Error("No clear program provided");if(!t.schema)throw new Error("No schema provided");try{let i=this.account.addr,o=t.optionalFields?.suggestedParams||await this.algodClient.getTransactionParams().do(),r=new Uint8Array,c=new Uint8Array;if(r=await this.compileProgram(t.tealApprovalCode),c=await this.compileProgram(t.tealClearCode),r&&c){let a=Le({from:i,suggestedParams:o,onComplete:ft.NoOpOC,approvalProgram:r,clearProgram:c,numLocalInts:t.schema.localInts,numLocalByteSlices:t.schema.localBytes,numGlobalInts:t.schema.globalInts,numGlobalByteSlices:t.schema.globalBytes,appArgs:this.encodeArguments(t.appArgs),accounts:t.optionalFields?.accounts?t.optionalFields.accounts:void 0,foreignApps:t.optionalFields?.applications?t.optionalFields.applications:void 0,foreignAssets:t.optionalFields?.assets?t.optionalFields.assets:void 0,note:t.optionalFields?.note?this.to8Arr(t.optionalFields.note):void 0}),d=a.txID().toString(),u=await this.sendTransaction(a,n),f=await this.algodClient.pendingTransactionInformation(d).do();return u.message="Created App ID: "+f["application-index"],u.createdIndex=f["application-index"],u.meta=f,u.txId=d,u}else throw new Error("could not compile teal code")}catch(i){throw new Error(i.message)}}async atomicCreateApp(t){if(!this.account)throw new Error("There was no account!");if(!t.tealApprovalCode)throw new Error("No approval program provided");if(!t.tealClearCode)throw new Error("No clear program provided");if(!t.schema)throw new Error("No schema provided");if(t.optionalFields&&t.optionalFields.note&&t.optionalFields.note.length>1023)throw new Error("Your NOTE is too long, it must be less thatn 1024 Bytes");if(this.account)try{let n=this.account.addr,i=ft.NoOpOC,o=t.optionalFields?.suggestedParams||await this.algodClient.getTransactionParams().do(),r=new Uint8Array,c=new Uint8Array;if(r=await this.compileProgram(t.tealApprovalCode),c=await this.compileProgram(t.tealClearCode),!r||!c)throw new Error("Error: you must provide an approval program and a clear state program.");return{transaction:Qt(n,o,i,r,c,t.schema.localInts,t.schema.localBytes,t.schema.globalInts,t.schema.globalBytes,this.encodeArguments(t.appArgs),t.optionalFields?.accounts?t.optionalFields.accounts:void 0,t.optionalFields?.applications?t.optionalFields.applications:void 0,t.optionalFields?.assets?t.optionalFields.assets:void 0,t.optionalFields?.note?this.to8Arr(t.optionalFields.note):void 0),transactionSigner:this.account,isLogigSig:!1}}catch{throw new Error("There was an error creating the transaction")}else throw new Error("Algonaut.js has no account loaded!")}async deployTealWithLSig(t){if(t.noteText&&t.noteText.length>511)throw new Error("Your note is too long");if(!this.account)throw new Error("there was no account");let n=[];t.appArgs&&t.appArgs.length&&(n=this.encodeArguments(t.appArgs));let i=t.lsig.address(),o=ft.NoOpOC,r=t.optionalFields?.suggestedParams||await this.algodClient.getTransactionParams().do(),c=new Uint8Array,a=new Uint8Array;try{if(c=await this.compileProgram(t.tealApprovalCode),a=await this.compileProgram(t.tealClearCode),c&&a){let d=Qt(i,r,o,c,a,t.schema.localInts,t.schema.localBytes,t.schema.globalInts,t.schema.globalBytes,n,t.optionalFields?.accounts||void 0),u=d.txID().toString(),f=xe(d,t.lsig);await this.algodClient.sendRawTransaction(f.blob).do();let m=await this.waitForConfirmation(u),j=(await this.algodClient.pendingTransactionInformation(u).do())["application-index"];return{status:"success",message:"created new app with id: "+j,txId:u}}else throw new Error("Error compiling programs.")}catch(d){throw console.error("Error deploying contract:"),new Error(d)}}async atomicUpdateApp(t){if(!this.account)throw new Error("Algonaut.js has no account loaded!");if(!t.tealApprovalCode)throw new Error("No approval program provided");if(!t.tealClearCode)throw new Error("No clear program provided");if(t.optionalFields&&t.optionalFields.note&&t.optionalFields.note.length>1023)throw new Error("Your NOTE is too long, it must be less thatn 1024 Bytes");try{let n=this.account.addr,i=ft.NoOpOC,o=t.optionalFields?.suggestedParams||await this.algodClient.getTransactionParams().do(),r=new Uint8Array,c=new Uint8Array;if(r=await this.compileProgram(t.tealApprovalCode),c=await this.compileProgram(t.tealClearCode),!r||!c)throw new Error("Error: you must provide an approval program and a clear state program.");return{transaction:je(n,o,t.appIndex,r,c,this.encodeArguments(t.appArgs),t.optionalFields?.accounts?t.optionalFields.accounts:void 0,t.optionalFields?.applications?t.optionalFields.applications:void 0,t.optionalFields?.assets?t.optionalFields.assets:void 0,t.optionalFields?.note?this.to8Arr(t.optionalFields.note):void 0),transactionSigner:this.account,isLogigSig:!1}}catch{throw new Error("There was an error creating the transaction")}}async updateApp(t,n){let{transaction:i}=await this.atomicUpdateApp(t);return await this.sendTransaction(i,n)}async compileProgram(t){let i=new TextEncoder().encode(t),o=await this.algodClient.compile(i).do();return new Uint8Array(x.Buffer.from(o.result,"base64"))}async atomicSendAlgo(t){if(!t.amount)throw new Error("You did not specify an amount!");if(!t.to)throw new Error("You did not specify a to address");let n=t.from||this.account?.addr;if(n){let i=t.optionalFields?.note?this.to8Arr(t.optionalFields.note):new Uint8Array,o=t.optionalFields?.suggestedParams||await this.algodClient.getTransactionParams().do();return{transaction:Jt({from:n,to:t.to,amount:t.amount,note:i,suggestedParams:o}),transactionSigner:this.account,isLogigSig:!1}}else throw new Error("there is no fromAddr")}async atomicPayment(t){return console.warn("atomicPayment is deprecated and will be removed in future versions."),await this.atomicSendAlgo(t)}async sendAlgo(t,n){if(!this.account)throw new Error("there was no account!");let{transaction:i}=await this.atomicSendAlgo(t);return await this.sendTransaction(i,n)}async getAccountInfo(t){if(!t)throw new Error("No address provided");return await this.algodClient.accountInformation(t).do()}async getAlgoBalance(t){if(!t)throw new Error("No address provided");return(await this.algodClient.accountInformation(t).do()).amount}async getTokenBalance(t,n){if(!t)throw new Error("No address provided");if(!n)throw new Error("No asset index provided");let i=await this.algodClient.accountInformation(t).do(),o=0;return i.assets.forEach(r=>{r["asset-id"]==n&&(o=r.amount)}),o}async accountHasTokens(t,n){return"this is not done yet"}async getAppGlobalState(t){if(!t)throw new Error("No application ID provided");let n=await this.getAppInfo(t);return n.hasState?this.stateArrayToObject(n.globals):{}}async getAppLocalState(t,n){if(!t)throw new Error("No application ID provided");let i={hasState:!1,globals:[],locals:[],creatorAddress:"",index:t};if(this.account&&this.account.addr&&!n&&(n=this.account.addr),n){let o=await this.algodClient.accountInformation(n).do();for(let r=0;r<o["apps-local-state"].length;r++)if(o["apps-local-state"][r].id==t){i.hasState=!0;for(let c=0;c<o["apps-local-state"][r]["key-value"].length;c++){let a=o["apps-local-state"][r]["key-value"][c],d=x.Buffer.from(a.key,"base64").toString(),u=a.value.type,f,m="";u==1?(f=x.Buffer.from(a.value.bytes,"base64").toString(),m=dt(x.Buffer.from(a.value.bytes,"base64"))):a.value.type==2&&(f=a.value.uint),i.locals.push({key:d,value:f||"",address:m})}}return i}else console.warn("Algonaut used in non-authd state, not getting local vars")}async atomicAssetTransferWithLSig(t){if(t.lsig){let n=t.optionalFields?.suggestedParams||await this.algodClient.getTransactionParams().do();return{transaction:Nt({from:t.lsig.address(),to:t.to,amount:t.amount,assetIndex:t.assetIndex,suggestedParams:n}),transactionSigner:t.lsig,isLogigSig:!0}}else throw new Error("there is no logic sig object!")}async atomicPaymentWithLSig(t){if(t.lsig){let n=t.optionalFields?.suggestedParams||await this.algodClient.getTransactionParams().do();return{transaction:Jt({from:t.lsig.address(),to:t.to,amount:t.amount,suggestedParams:n}),transactionSigner:t.lsig,isLogigSig:!0}}else throw new Error("there is no account!")}async sendTransaction(t,n){if(!this.account)throw new Error("There is no account");if(this.config&&this.config.SIGNING_MODE&&this.config.SIGNING_MODE==="inkey"){let i;if(Array.isArray(t)&&t[0]&&t[0].transaction){let d=t.map(f=>f.transaction).map(f=>x.Buffer.from(Yt(f)).toString("base64")),u=await this.inkeySignTxns(d);if(u.success&&u.signedTxns)i=u.signedTxns;else{if(u.error)throw new Error(u.error);if(u.reject)return{status:"rejected",message:"User rejected the message.",txId:""};throw new Error("Unknown error sending Inkey txn")}}else{let a;t&&t.transaction?a=t.transaction:a=t;let d=x.Buffer.from(Yt(a)).toString("base64"),u=await this.inkeySignTxns([d]);if(u.success&&u.signedTxns)i=u.signedTxns;else{if(u.error)throw new Error(u.error);if(u.reject)return{status:"rejected",message:"User rejected the message.",txId:""};throw new Error("Unknown error sending Inkey txn")}}n?.onSign&&n.onSign(i);let o=await this.algodClient.sendRawTransaction(i).do();n?.onSend&&n.onSend(o);let r=await this.waitForConfirmation(o.txId),c=await this.algodClient.pendingTransactionInformation(o.txId).do();return r.meta=c,n?.onConfirm&&n.onConfirm(r),r}else{if(Array.isArray(t))return await this.sendAtomicTransaction(t,n);{let i;if(t&&t.transaction?i=t.transaction:i=t,!this.account||!this.account.sk)throw new Error("");let o=i.signTxn(this.account.sk);n?.onSign&&n.onSign(o);let r=await this.algodClient.sendRawTransaction(o).do();n?.onSend&&n.onSend(o);let c=r.txId||r.id||r.txId().toString(),a=await this.waitForConfirmation(c);return n?.onConfirm&&n.onConfirm(o),a}}}async inkeyMessageAsync(t,n){if(!this.inkeyWallet.frameBus)throw new Error("No inkey frameBus");return this.inkeyWallet.frameBus.ready||await this.inkeyWallet.frameBus.isReady(),t.source="ncc-inkey-client",t.async=!0,n?.showFrame&&this.inkeyWallet.frameBus.showFrame(),await this.inkeyWallet.frameBus.emitAsync(t)}async inkeySignTxns(t){let n;if(typeof t[0]=="string")n={type:"sign-txns",payload:{txns:t}};else if(typeof t[0]=="object")n={type:"sign-txns",payload:{txns:t}};else throw new Error("bad txns array input...");let i=await this.inkeyMessageAsync(n,{showFrame:!0});return this.inkeyWallet.frameBus?.hideFrame(),i.error?{success:!1,reject:!1,error:i.error}:i.reject?{success:!1,reject:!0}:{success:!0,reject:!1,signedTxns:i.signedTxns}}inkeyShow(t){this.inkeyWallet.frameBus&&this.inkeyWallet.frameBus.showFrame(t)}inkeyHide(){this.inkeyWallet.frameBus&&(this.inkeyWallet.frameBus.hideFrame(),this.inkeyMessageAsync({type:"reject"}))}async inkeySetApp(t){let n={type:"set-app",payload:{appCode:t}};return await this.inkeyMessageAsync(n)}async inkeyConnect(t){t||(t={});let n={type:"connect",payload:t},i=await this.inkeyMessageAsync(n,{showFrame:!0});return this.setInkeyAccount(i.address),this.config&&(this.config.SIGNING_MODE="inkey"),i}async inkeyDisconnect(){let t={type:"disconnect"};if(!this.account||!this.account.addr||!this.address){console.warn("no acct to disconnect");return}let n=await this.inkeyMessageAsync(t,{showFrame:!1});return n.success&&(this.account=void 0),n}async sendAtomicTransaction(t,n){try{let i=[],o=[];t.forEach(u=>{i.push(u.transaction)});let r=bt(i);t.forEach((u,f)=>{let m;u.isLogigSig?m=Ce(r[f],u.transactionSigner):m=X(r[f],u.transactionSigner.sk),o.push(m.blob)}),n?.onSign&&n.onSign(o);let c=await this.algodClient.sendRawTransaction(o).do();n?.onSend&&n.onSend(c);let a=await this.waitForConfirmation(c.txId),d=await this.algodClient.pendingTransactionInformation(c.txId).do();return a.meta=d,n?.onConfirm&&n.onConfirm(a),a}catch(i){throw console.error("Error sending atomic transaction:"),new Error(i)}}signTransactionGroup(t){if(!this.account)throw new Error("There is no account!");return S.signTransactionGroup(t,this.account)}signBase64Transactions(t){if(!this.account)throw new Error("There is no account!");return S.signBase64Transactions(t,this.account)}signBase64TxnObjects(t){if(!this.account)throw new Error("There is no account!");return S.signBase64TxnObjects(t,this.account)}usingInkeyWallet(){return!!(this.config&&this.config.SIGNING_MODE&&this.config.SIGNING_MODE==="inkey")}to8Arr(t,n="utf8"){return S.to8Arr(t,n)}stateArrayToObject(t){return S.stateArrayToObject(t)}fromBase64(t){return S.fromBase64(t)}valueAsAddr(t){return S.valueAsAddr(t)}decodeStateArray(t){return S.decodeStateArray(t)}decodeBase64UnsignedTransaction(t){return S.decodeBase64UnsignedTransaction(t)}txnSummary(t){return S.txnSummary(t)}},hs=we,S={createWallet(){let e=Vt();if(e){let t=Tt(e.sk);return{address:e.addr,mnemonic:t||""}}else throw new Error("There was no account: could not create algonaut wallet!")},recoverAccount(e){if(!e)throw new Error("utils.recoverAccount: No mnemonic provided.");try{let t=Ee(e);if(Ae(t?.addr))return t;throw new Error("Not a valid mnemonic.")}catch(t){throw console.error(t),new Error("Could not recover account from mnemonic.")}},generateLogicSig(e){if(!e)throw new Error("No program string provided.");let t=new Uint8Array(x.Buffer.from(e,"base64"));return new De(t)},encodeArguments(e){let t=[];return e.forEach(n=>{typeof n=="number"?t.push(Zt(n)):typeof n=="bigint"?t.push(Zt(n)):typeof n=="string"&&t.push(new Uint8Array(x.Buffer.from(n)))}),t},getAppEscrowAccount(e){if(!e)throw new Error("No appId provided");return Me(e)},to8Arr(e,t="utf8"){return new Uint8Array(x.Buffer.from(e,t))},stateArrayToObject(e){let t={};return e.forEach(n=>{n.key&&(t[n.key]=n.value||null)}),t},fromBase64(e){return x.Buffer.from(e,"base64").toString()},valueAsAddr(e){return dt(x.Buffer.from(e,"base64"))},decodeStateArray(e){let t=[];for(let n=0;n<e.length;n++){let i=e[n],o=this.fromBase64(i.key),r=i.value.type,c,a="";r==1?(c=this.fromBase64(i.value.bytes),a=this.valueAsAddr(i.value.bytes)):i.value.type==2&&(c=i.value.uint),t.push({key:o,value:c||"",address:a})}return t},signTransactionGroup(e,t){if(e.length>1){let n=bt(e),i=[];return e.forEach((o,r)=>{let c=X(n[r],t.sk);i.push(c.blob)}),i}else return X(e[0],t.sk).blob},signTxnObjectGroup(e,t){if(e.length>1){e.forEach(r=>{let c=this.decodeBase64UnsignedTransaction(r.txn);r.txnDecoded=c});let n=e.map(r=>r.txnDecoded),i=bt(n),o=[];return e.forEach((r,c)=>{let a;if(r.isMultisig){if(!r.multisigMeta)throw new Error("multisig signing required multisigMeta");a=Ht(i[c],r.multisigMeta,t.sk)}else{if(r.isLogicSig)throw new Error("logic sign signing not yet supported...");a=X(i[c],t.sk)}o.push(a.blob)}),o}else{let n=e[0],i=this.decodeBase64UnsignedTransaction(n.txn),o;if(n.isMultisig){if(!n.multisigMeta)throw new Error("multisig signing required multisigMeta");o=Ht(i,n.multisigMeta,t.sk)}else{if(n.isLogicSig)throw new Error("logic sign signing not yet supported...");o=X(i,t.sk)}return o.blob}},signBase64Transactions(e,t){let n=[];return e.forEach(i=>{let o=this.decodeBase64UnsignedTransaction(i);n.push(o)}),this.signTransactionGroup(n,t)},signBase64TxnObjects(e,t){return this.signTxnObjectGroup(e,t)},decodeBase64UnsignedTransaction(e){return Ie(x.Buffer.from(e,"base64"))},txnToStr(e){return x.Buffer.from(e.toByte()).toString("base64")},txnSummary(e){if(e.type){let t=e.to?dt(e.to.publicKey):"",n=e.from?dt(e.from.publicKey):"";if(e.type==="pay")return e.amount?`Send ${Te(e.amount)} ALGO to ${t}`:`Send 0 ALGO to ${t}`;if(e.type==="axfer")return!e.amount&&t===n?`Opt-in to asset ID ${e.assetIndex}`:`Transfer ${e.amount?e.amount:0} of asset ID ${e.assetIndex} to ${t}`;if(e.type==="acfg")return e.assetUnitName?`Create asset ${e.assetName}, symbol ${e.assetUnitName}`:`Configure asset ${e.assetIndex}`;if(e.type==="afrz")return`Freeze asset ${e.assetIndex}`;if(e.type==="appl")switch(e.appOnComplete){case 0:return`Call to application ID ${e.appIndex}`;case 1:return`Opt-in to application ID ${e.appIndex}`;case 2:return`Close out application ID ${e.appIndex}`;case 3:return`Execute clear state program of application ID ${e.appIndex}`;case 4:return`Update application ID ${e.appIndex}`;case 5:return`Delete application ID ${e.appIndex}`;default:return`Call to application ID ${e.appIndex}`}else return`Transaction of type ${e.type} to ${t}`}else return e.toString()}},ps=x.Buffer;export{bi as ALL_WALLETS,we as Algonaut,p as AnyWalletState,Vi as CLIENT_IDS,Mt as CLIENT_MAP,Hi as CLIENT_PKGS,ts as CLIENT_SDK_MAP,Ti as DEFAULT_WALLETS_TO_ENABLE,Ii as WALLET_ID,lt as addConnectedAccounts,ps as buffer,ot as createWallet,hs as default,Qi as enableWallets,Ji as excludeClients,dn as getAccountsByProvider,qi as inkey,pe as isBrowser,$i as myalgo,Ni as onChange,Xi as pera,fn as removeAccountsByClient,ut as setAsActiveAccount,Ki as signTransactions,S as utils,yt as watch};
/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */
//# sourceMappingURL=index.mjs.map

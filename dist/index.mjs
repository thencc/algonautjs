import{A as jt,Aa as Rt,D as fe,E as pt,I as gt,M as Ot,R as he,S as pe,T as ge,aa as Ft,b as Ut,da as me,e as re,f as et,fb as Z,g as ae,ha as we,i as nt,l as Pt,m as ce,ma as mt,na as Bt,nb as Ie,oa as ye,pa as Ae,q as le,ra as be,t as ue,ua as Te,w as de,wa as Ee}from"./chunk-43TGXN5T.mjs";import{b as rn,d as se,f as b,h as S,i as an}from"./chunk-ENGTMBWY.mjs";var ve=rn((zt,Gt)=>{S();(function(e,t){typeof zt=="object"&&typeof Gt<"u"?Gt.exports=t():typeof define=="function"&&define.amd?define(t):(e=typeof globalThis<"u"?globalThis:e||self).MsgPackBigInt=t()})(zt,function(){"use strict";var e=function(d,o,l,p,g){var A,y,E=8*g-p-1,D=(1<<E)-1,oe=D>>1,U=-7,$=l?g-1:0,Dt=l?-1:1,ht=d[o+$];for($+=Dt,A=ht&(1<<-U)-1,ht>>=-U,U+=E;U>0;A=256*A+d[o+$],$+=Dt,U-=8);for(y=A&(1<<-U)-1,A>>=-U,U+=p;U>0;y=256*y+d[o+$],$+=Dt,U-=8);if(A===0)A=1-oe;else{if(A===D)return y?NaN:1/0*(ht?-1:1);y+=Math.pow(2,p),A-=oe}return(ht?-1:1)*y*Math.pow(2,A-p)},t=BigInt(4294967296),n=Math.floor(Number.MIN_SAFE_INTEGER/4294967296),i=Math.floor(Number.MAX_SAFE_INTEGER/4294967296),s=function(){function d(o,l){if(!(o instanceof Uint8Array))throw new Error("UInt64: invalid data");this.buffer=o,this.ofs=0,this.len=o.length,this.extension=void 0,l&&l.extension&&(this.extension=l.extension),this.tokenMap=[],this.tokenMap.push({fn:this.constantNull.bind(this)}),this.tokenMap.push({fn:this.invalidOpcode.bind(this)}),this.tokenMap.push({fn:this.constantFalse.bind(this)}),this.tokenMap.push({fn:this.constantTrue.bind(this)}),this.tokenMap.push({fn:this.readBinary.bind(this),param:this.readUint8.bind(this)}),this.tokenMap.push({fn:this.readBinary.bind(this),param:this.readUint16.bind(this)}),this.tokenMap.push({fn:this.readBinary.bind(this),param:this.readUint32.bind(this)}),this.tokenMap.push({fn:this.readExtension.bind(this),param:this.readUint8.bind(this)}),this.tokenMap.push({fn:this.readExtension.bind(this),param:this.readUint16.bind(this)}),this.tokenMap.push({fn:this.readExtension.bind(this),param:this.readUint32.bind(this)}),this.tokenMap.push({fn:this.readFloat.bind(this)}),this.tokenMap.push({fn:this.readDouble.bind(this)}),this.tokenMap.push({fn:this.readUint8.bind(this)}),this.tokenMap.push({fn:this.readUint16.bind(this)}),this.tokenMap.push({fn:this.readUint32.bind(this)}),this.tokenMap.push({fn:this.readUint64.bind(this)}),this.tokenMap.push({fn:this.readInt8.bind(this)}),this.tokenMap.push({fn:this.readInt16.bind(this)}),this.tokenMap.push({fn:this.readInt32.bind(this)}),this.tokenMap.push({fn:this.readInt64.bind(this)}),this.tokenMap.push({fn:this.readExtension.bind(this),param:1}),this.tokenMap.push({fn:this.readExtension.bind(this),param:2}),this.tokenMap.push({fn:this.readExtension.bind(this),param:4}),this.tokenMap.push({fn:this.readExtension.bind(this),param:8}),this.tokenMap.push({fn:this.readExtension.bind(this),param:16}),this.tokenMap.push({fn:this.readString.bind(this),param:this.readUint8.bind(this)}),this.tokenMap.push({fn:this.readString.bind(this),param:this.readUint16.bind(this)}),this.tokenMap.push({fn:this.readString.bind(this),param:this.readUint32.bind(this)}),this.tokenMap.push({fn:this.readArray.bind(this),param:this.readUint16.bind(this)}),this.tokenMap.push({fn:this.readArray.bind(this),param:this.readUint32.bind(this)}),this.tokenMap.push({fn:this.readMap.bind(this),param:this.readUint16.bind(this)}),this.tokenMap.push({fn:this.readMap.bind(this),param:this.readUint32.bind(this)})}return d.prototype.process=function(){if(!(this.ofs>=this.len)){var o=this.readUint8();return o<128?o:o>=224?o-256:o<144?this.readMap(o-128):o<160?this.readArray(o-144):o<192?this.readString(o-160):this.tokenMap[o-192].fn(this.tokenMap[o-192].param)}},d.prototype.readUint8=function(){this.checkAvailable(1);var o=this.buffer[this.ofs];return this.ofs+=1,o},d.prototype.readInt8=function(){this.checkAvailable(1);var o=this.buffer[this.ofs];return this.ofs+=1,128&o?o-256:o},d.prototype.readUint16=function(){this.checkAvailable(2);var o=this.buffer[this.ofs]<<8;return o|=this.buffer[this.ofs+1],this.ofs+=2,o},d.prototype.readInt16=function(){this.checkAvailable(2);var o=this.buffer[this.ofs];return this.ofs+=2,32768&o?o-65536:o},d.prototype.readUint32=function(){this.checkAvailable(4);var o=this.buffer[this.ofs+1]<<16;return o|=this.buffer[this.ofs+2]<<8,o|=this.buffer[this.ofs+3],o+=16777216*this.buffer[this.ofs],this.ofs+=4,o},d.prototype.readInt32=function(){this.checkAvailable(4);var o=this.buffer[this.ofs+1]<<16;return o|=this.buffer[this.ofs+2]<<8,o|=this.buffer[this.ofs+3],o|=this.buffer[this.ofs]<<24,this.ofs+=4,o},d.prototype.readUint64=function(){var o=this.readUint32(),l=this.readUint32();return o>i?BigInt(o)*t+BigInt(l):4294967296*o+l},d.prototype.readInt64=function(){var o=this.readUint32(),l=this.readUint32();return o<n||o===n&&l===0||o>i?BigInt(o)*t+BigInt(l):4294967296*o+l},d.prototype.readFloat=function(){this.checkAvailable(4);var o=e(this.buffer,this.ofs,!1,23,4);return this.ofs+=8,o},d.prototype.readDouble=function(){this.checkAvailable(8);var o=e(this.buffer,this.ofs,!1,52,8);return this.ofs+=8,o},d.prototype.constantNull=function(){return null},d.prototype.constantFalse=function(){return!1},d.prototype.constantTrue=function(){return!0},d.prototype.readBinary=function(o){if(typeof o=="function"&&(o=o(0)),!o)return new Uint8Array;this.checkAvailable(o);var l=this.buffer.slice(this.ofs,this.ofs+o);return this.ofs+=o,l},d.prototype.readExtension=function(o){typeof o=="function"&&(o=o(0));var l=this.readUint8();if(o&&this.checkAvailable(o),!this.extension)throw new Error("MsgPackDecoder: unsupported extension of type 0x"+l.toString(16));var p=this.ofs;return this.ofs+=o,this.extension(l,this.buffer.slice(p,p+o))},d.prototype.readString=function(o){if(typeof o=="function"&&(o=o(0)),!o)return"";this.checkAvailable(o);for(var l=!1,p=this.ofs,g=o,A=[];o>0;){var y=this.buffer[this.ofs];if(this.ofs+=1,o-=1,y<128)A.push(String.fromCharCode(y));else{if((224&y)==192){if(o<1){l=!0;break}y=(31&y)<<6|63&this.buffer[this.ofs],this.ofs+=1,o-=1}else if((240&y)==224){if(o<2){l=!0;break}y=(15&y)<<12|(63&this.buffer[this.ofs])<<6|63&this.buffer[this.ofs+1],this.ofs+=2,o-=2}else{if((248&y)!=240){l=!0;break}if(o<3){l=!0;break}y=(15&y)<<18|(63&this.buffer[this.ofs])<<12|(63&this.buffer[this.ofs+1])<<6|63&this.buffer[this.ofs+2],this.ofs+=3,o-=3}y>=65536?(y-=65536,A.push(String.fromCharCode(55296+(y>>>10),56320+(1023&y)))):A.push(String.fromCharCode(y))}}if(l)for(A=[],this.ofs=p,o=g;o>0;o-=1)A.push(String.fromCharCode(this.buffer[this.ofs])),this.ofs+=1;return A.join("")},d.prototype.readMap=function(o){typeof o=="function"&&(o=o(0));for(var l={},p=0;p<o;p++)l[this.process()]=this.process();return l},d.prototype.readArray=function(o){typeof o=="function"&&(o=o(0));for(var l=new Array(o),p=0;p<o;p++)l[p]=this.process();return l},d.prototype.checkAvailable=function(o){if(this.len-this.ofs<o)throw new Error("MsgPackDecoder: end of stream reached")},d.prototype.invalidOpcode=function(){throw new Error("MsgPackDecoder: invalid opcode")},d}(),r=BigInt(256),a=BigInt(65536),c=BigInt(4294967296),h=BigInt("0x10000000000000000"),u=BigInt(-32),f=BigInt(-128),w=BigInt(-32768),M=BigInt(-2147483648),_=BigInt("-9223372036854775808"),I=function(){function d(o,l){this.obj=o,this.bufferView=new DataView(new ArrayBuffer(2048)),this.buffer=new Uint8Array(this.bufferView.buffer),this.bufferLen=0,this.extension=null,this.sortKeys=!1,this.useFloat=!1,l&&(l.extension&&(this.extension=l.extension),l.sortKeys&&(this.sortKeys=l.sortKeys),l.useFloat&&(this.useFloat=l.useFloat))}return d.prototype.process=function(){return this.parse(this.obj),new Uint8Array(this.buffer.buffer,0,this.bufferLen)},d.prototype.parse=function(o){o===null?this.encodeNull():typeof o=="boolean"?this.encodeBoolean(o):typeof o=="number"?this.encodeNumber(o):typeof o=="string"?this.encodeString(o):typeof o=="bigint"?this.encodeBigInt(o):this.encodeObject(o)},d.prototype.encodeNull=function(){this.writeUint8(192)},d.prototype.encodeBoolean=function(o){this.writeUint8(o===!1?194:195)},d.prototype.encodeNumber=function(o){Number.isSafeInteger(o)?o>=0?o<128?this.writeUint8(o):o<256?(this.writeUint8(204),this.writeUint8(o)):o<65536?(this.writeUint8(205),this.writeUint16(o)):o<4294967296?(this.writeUint8(206),this.writeUint32(o)):(this.writeUint8(207),this.writeUint64(o)):o>=-32?this.writeUint8(224|o+32):o>=-128?(this.writeUint8(208),this.writeInt8(o)):o>=-32768?(this.writeUint8(209),this.writeInt16(o)):o>=-2147483648?(this.writeUint8(210),this.writeInt32(o)):(this.writeUint8(211),this.writeInt64(o)):this.useFloat?(this.writeUint8(202),this.writeFloat(o)):(this.writeUint8(203),this.writeDouble(o))},d.prototype.encodeString=function(o){for(var l=o.length,p=new Uint8Array(2*o.length),g=0,A=0;A<l;){if(p.byteLength-g<4){var y=new Uint8Array(p.byteLength+2048);y.set(p),p=y}var E=o.charCodeAt(A);if(A+=1,(4294967168&E)!=0){if((4294965248&E)==0)p[g]=E>>6&31|192,g+=1;else{if(E>=55296&&E<=56319&&A<l){var D=o.charCodeAt(A);(64512&D)==56320&&(A+=1,E=((1023&E)<<10)+(1023&D)+65536)}(4294901760&E)==0?(p[g]=E>>12&15|224,p[g+1]=E>>6&63|128,g+=2):(p[g]=E>>18&7|240,p[g+1]=E>>12&63|128,p[g+2]=E>>6&63|128,g+=3)}p[g]=63&E|128,g+=1}else p[g]=E,g+=1}if(g<32)this.writeUint8(160+g);else if(g<256)this.writeUint8(217),this.writeUint8(g);else if(g<65536)this.writeUint8(218),this.writeUint16(g);else{if(!(g<4294967296))throw new Error("MsgPackEncoder: string too long");this.writeUint8(219),this.writeUint32(g)}this.writeBuffer(new Uint8Array(p.buffer,0,g))},d.prototype.encodeBigInt=function(o){if(o>=BigInt(0))if(o<BigInt(128))this.writeUint8(Number(o));else if(o<r)this.writeUint8(204),this.writeUint8(Number(o));else if(o<a)this.writeUint8(205),this.writeUint16(Number(o));else if(o<c)this.writeUint8(206),this.writeUint32(Number(o));else{if(!(o<h))throw new Error("MsgPackEncoder: positive bigint too big");this.writeUint8(207),this.writeUint64(o)}else if(o>=u)this.writeUint8(224|Number(o)+32);else if(o>=f)this.writeUint8(208),this.writeInt8(Number(o));else if(o>=w)this.writeUint8(209),this.writeInt16(Number(o));else if(o>=M)this.writeUint8(210),this.writeInt32(Number(o));else{if(!(o>=_))throw new Error("MsgPackEncoder: negative bigint too big");this.writeUint8(211),this.writeInt64(o)}},d.prototype.encodeObject=function(o){if(this.extension){var l=this.extension(o);if(l)return void this.encodeExtension(l)}if(Array.isArray(o))this.encodeArray(o);else if(ArrayBuffer.isView(o))this.encodeBinary(o);else{if(typeof o!="object")throw new Error("MsgPackEncoder: unsupported object of type "+Object.prototype.toString.apply(o));this.encodeMap(o)}},d.prototype.encodeBinary=function(o){var l=o.byteLength;if(l<256)this.writeUint8(196),this.writeUint8(l);else if(l<65536)this.writeUint8(197),this.writeUint16(l);else{if(!(l<4294967296))throw new Error("MsgPackEncoder: binary object is too large");this.writeUint8(198),this.writeUint32(l)}this.writeBuffer(new Uint8Array(o.buffer,o.byteOffset,o.byteLength))},d.prototype.encodeArray=function(o){var l=o.length;if(l<16)this.writeUint8(144+l);else if(l<65536)this.writeUint8(220),this.writeUint16(l);else{if(!(l<4294967296))throw new Error("MsgPackEncoder: array object is too large");this.writeUint8(221),this.writeUint32(l)}for(var p=0,g=o;p<g.length;p++){var A=g[p];this.parse(A)}},d.prototype.encodeMap=function(o){var l=Object.keys(o);this.sortKeys&&l.sort();for(var p=0,g=0,A=l;g<A.length;g++)o[D=A[g]]!==void 0&&(p+=1);if(p<16)this.writeUint8(128+p);else if(p<65536)this.writeUint8(222),this.writeUint16(p);else{if(!(p<4294967296))throw new Error("MsgPackEncoder: array object is too large");this.writeUint8(223),this.writeUint32(p)}for(var y=0,E=l;y<E.length;y++){var D;o[D=E[y]]!==void 0&&(this.encodeString(D),this.parse(o[D]))}},d.prototype.encodeExtension=function(o){var l=o.data.length;if(l===1)this.writeUint8(212);else if(l===2)this.writeUint8(213);else if(l===4)this.writeUint8(214);else if(l===8)this.writeUint8(215);else if(l===16)this.writeUint8(216);else if(l<256)this.writeUint8(199),this.writeUint8(l);else if(l<65536)this.writeUint8(200),this.writeUint16(l);else{if(!(l<4294967296))throw new Error("MsgPackEncoder: extension object is too large");this.writeUint8(201),this.writeUint32(l)}this.writeUint8(o.type),this.writeBuffer(o.data)},d.prototype.writeUint8=function(o){this.ensureSpace(1),this.bufferView.setUint8(this.bufferLen,o),this.bufferLen+=1},d.prototype.writeInt8=function(o){this.ensureSpace(1),this.bufferView.setInt8(this.bufferLen,o),this.bufferLen+=1},d.prototype.writeUint16=function(o){this.ensureSpace(2),this.bufferView.setUint16(this.bufferLen,o),this.bufferLen+=2},d.prototype.writeInt16=function(o){this.ensureSpace(2),this.bufferView.setInt16(this.bufferLen,o),this.bufferLen+=2},d.prototype.writeUint32=function(o){this.ensureSpace(4),this.bufferView.setUint32(this.bufferLen,o),this.bufferLen+=4},d.prototype.writeInt32=function(o){this.ensureSpace(4),this.bufferView.setInt32(this.bufferLen,o),this.bufferLen+=4},d.prototype.writeUint64=function(o){if(this.ensureSpace(8),typeof o=="number"){var l=Math.floor(o/4294967296);this.bufferView.setUint32(this.bufferLen,l),this.bufferView.setUint32(this.bufferLen+4,o)}else{l=Number(o/c);var p=Number(o%c);this.bufferView.setUint32(this.bufferLen,l),this.bufferView.setUint32(this.bufferLen+4,p)}this.bufferLen+=8},d.prototype.writeInt64=function(o){if(this.ensureSpace(8),typeof o=="number"){var l=Math.floor(o/4294967296);this.bufferView.setUint32(this.bufferLen,l),this.bufferView.setUint32(this.bufferLen+4,o)}else{l=Number(o/c);var p=Number(o%c);l<0&&p!==0&&(l-=1),this.bufferView.setUint32(this.bufferLen,l),this.bufferView.setUint32(this.bufferLen+4,p)}this.bufferLen+=8},d.prototype.writeFloat=function(o){this.ensureSpace(4),this.bufferView.setFloat32(this.bufferLen,o),this.bufferLen+=4},d.prototype.writeDouble=function(o){this.ensureSpace(8),this.bufferView.setFloat64(this.bufferLen,o),this.bufferLen+=8},d.prototype.writeBuffer=function(o){this.ensureSpace(o.byteLength),this.buffer.set(o,this.bufferLen),this.bufferLen+=o.byteLength},d.prototype.ensureSpace=function(o){if(this.bufferView.byteLength-this.bufferLen<o){var l=this.bufferView.byteLength+o+2047&-2048,p=new DataView(new ArrayBuffer(l)),g=new Uint8Array(p.buffer);g.set(this.buffer),this.buffer=g,this.bufferView=p}},d}();return function(){function d(){}return d.encode=function(o,l){return new I(o,l).process()},d.decode=function(o,l){return new s(o,l).process()},d.createEncoder=function(o,l){return new I(o,l)},d.createDecoder=function(o,l){return new s(o,l)},d}()})});S();var x=se(an());S();S();var Xe=se(ve(),1);S();S();function Vt(e,t){let n=Object.create(null),i=e.split(",");for(let s=0;s<i.length;s++)n[i[s]]=!0;return t?s=>!!n[s.toLowerCase()]:s=>!!n[s]}var cn="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly";var ai=Vt(cn+",async,autofocus,autoplay,controls,default,defer,disabled,hidden,loop,open,required,reversed,scoped,seamless,checked,muted,multiple,selected");var ci=b.default.env.NODE_ENV!=="production"?Object.freeze({}):{},li=b.default.env.NODE_ENV!=="production"?Object.freeze([]):[],wt=()=>{};var Se=Object.assign;var ln=Object.prototype.hasOwnProperty,it=(e,t)=>ln.call(e,t),C=Array.isArray,q=e=>xe(e)==="[object Map]";var P=e=>typeof e=="function",un=e=>typeof e=="string",yt=e=>typeof e=="symbol",F=e=>e!==null&&typeof e=="object",Ne=e=>F(e)&&P(e.then)&&P(e.catch),dn=Object.prototype.toString,xe=e=>dn.call(e),Wt=e=>xe(e).slice(8,-1);var At=e=>un(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e;var bt=e=>{let t=Object.create(null);return n=>t[n]||(t[n]=e(n))},fn=/-(\w)/g,ui=bt(e=>e.replace(fn,(t,n)=>n?n.toUpperCase():"")),hn=/\B([A-Z])/g,di=bt(e=>e.replace(hn,"-$1").toLowerCase()),Yt=bt(e=>e.charAt(0).toUpperCase()+e.slice(1)),fi=bt(e=>e?`on${Yt(e)}`:""),Q=(e,t)=>!Object.is(e,t);var Me=(e,t,n)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,value:n})};function ke(e,...t){console.warn(`[Vue warn] ${e}`,...t)}var pn;function gn(e,t=pn){t&&t.active&&t.effects.push(e)}var st=e=>{let t=new Set(e);return t.w=0,t.n=0,t},Oe=e=>(e.w&G)>0,Fe=e=>(e.n&G)>0,mn=({deps:e})=>{if(e.length)for(let t=0;t<e.length;t++)e[t].w|=G},wn=e=>{let{deps:t}=e;if(t.length){let n=0;for(let i=0;i<t.length;i++){let s=t[i];Oe(s)&&!Fe(s)?s.delete(e):t[n++]=s,s.w&=~G,s.n&=~G}t.length=n}},Ht=new WeakMap,ot=0,G=1,Kt=30,N,Y=Symbol(b.default.env.NODE_ENV!=="production"?"iterate":""),$t=Symbol(b.default.env.NODE_ENV!=="production"?"Map key iterate":""),rt=class{constructor(t,n=null,i){this.fn=t,this.scheduler=n,this.active=!0,this.deps=[],this.parent=void 0,gn(this,i)}run(){if(!this.active)return this.fn();let t=N,n=z;for(;t;){if(t===this)return;t=t.parent}try{return this.parent=N,N=this,z=!0,G=1<<++ot,ot<=Kt?mn(this):Ce(this),this.fn()}finally{ot<=Kt&&wn(this),G=1<<--ot,N=this.parent,z=n,this.parent=void 0,this.deferStop&&this.stop()}}stop(){N===this?this.deferStop=!0:this.active&&(Ce(this),this.onStop&&this.onStop(),this.active=!1)}};function Ce(e){let{deps:t}=e;if(t.length){for(let n=0;n<t.length;n++)t[n].delete(e);t.length=0}}var z=!0,Be=[];function yn(){Be.push(z),z=!1}function An(){let e=Be.pop();z=e===void 0?!0:e}function L(e,t,n){if(z&&N){let i=Ht.get(e);i||Ht.set(e,i=new Map);let s=i.get(n);s||i.set(n,s=st());let r=b.default.env.NODE_ENV!=="production"?{effect:N,target:e,type:t,key:n}:void 0;Zt(s,r)}}function Zt(e,t){let n=!1;ot<=Kt?Fe(e)||(e.n|=G,n=!Oe(e)):n=!e.has(N),n&&(e.add(N),N.deps.push(e),b.default.env.NODE_ENV!=="production"&&N.onTrack&&N.onTrack(Object.assign({effect:N},t)))}function V(e,t,n,i,s,r){let a=Ht.get(e);if(!a)return;let c=[];if(t==="clear")c=[...a.values()];else if(n==="length"&&C(e)){let u=Number(i);a.forEach((f,w)=>{(w==="length"||w>=u)&&c.push(f)})}else switch(n!==void 0&&c.push(a.get(n)),t){case"add":C(e)?At(n)&&c.push(a.get("length")):(c.push(a.get(Y)),q(e)&&c.push(a.get($t)));break;case"delete":C(e)||(c.push(a.get(Y)),q(e)&&c.push(a.get($t)));break;case"set":q(e)&&c.push(a.get(Y));break}let h=b.default.env.NODE_ENV!=="production"?{target:e,type:t,key:n,newValue:i,oldValue:s,oldTarget:r}:void 0;if(c.length===1)c[0]&&(b.default.env.NODE_ENV!=="production"?X(c[0],h):X(c[0]));else{let u=[];for(let f of c)f&&u.push(...f);b.default.env.NODE_ENV!=="production"?X(st(u),h):X(st(u))}}function X(e,t){let n=C(e)?e:[...e];for(let i of n)i.computed&&Le(i,t);for(let i of n)i.computed||Le(i,t)}function Le(e,t){(e!==N||e.allowRecurse)&&(b.default.env.NODE_ENV!=="production"&&e.onTrigger&&e.onTrigger(Se({effect:e},t)),e.scheduler?e.scheduler():e.run())}var bn=Vt("__proto__,__v_isRef,__isVue"),Re=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(yt)),Tn=ze();var En=ze(!0);var _e=In();function In(){let e={};return["includes","indexOf","lastIndexOf"].forEach(t=>{e[t]=function(...n){let i=T(this);for(let r=0,a=this.length;r<a;r++)L(i,"get",r+"");let s=i[t](...n);return s===-1||s===!1?i[t](...n.map(T)):s}}),["push","pop","shift","unshift","splice"].forEach(t=>{e[t]=function(...n){yn();let i=T(this)[t].apply(this,n);return An(),i}}),e}function vn(e){let t=T(this);return L(t,"has",e),t.hasOwnProperty(e)}function ze(e=!1,t=!1){return function(i,s,r){if(s==="__v_isReactive")return!e;if(s==="__v_isReadonly")return e;if(s==="__v_isShallow")return t;if(s==="__v_raw"&&r===(e?t?Rn:Ye:t?Bn:We).get(i))return i;let a=C(i);if(!e){if(a&&it(_e,s))return Reflect.get(_e,s,r);if(s==="hasOwnProperty")return vn}let c=Reflect.get(i,s,r);return(yt(s)?Re.has(s):bn(s))||(e||L(i,"get",s),t)?c:R(c)?a&&At(s)?c:c.value:F(c)?e?j(c):at(c):c}}var Sn=Nn();function Nn(e=!1){return function(n,i,s,r){let a=n[i];if(Nt(a)&&R(a)&&!R(s))return!1;if(!e&&(!Qt(s)&&!Nt(s)&&(a=T(a),s=T(s)),!C(n)&&R(a)&&!R(s)))return a.value=s,!0;let c=C(n)&&At(i)?Number(i)<n.length:it(n,i),h=Reflect.set(n,i,s,r);return n===T(r)&&(c?Q(s,a)&&V(n,"set",i,s,a):V(n,"add",i,s)),h}}function xn(e,t){let n=it(e,t),i=e[t],s=Reflect.deleteProperty(e,t);return s&&n&&V(e,"delete",t,void 0,i),s}function Mn(e,t){let n=Reflect.has(e,t);return(!yt(t)||!Re.has(t))&&L(e,"has",t),n}function kn(e){return L(e,"iterate",C(e)?"length":Y),Reflect.ownKeys(e)}var Cn={get:Tn,set:Sn,deleteProperty:xn,has:Mn,ownKeys:kn},Ln={get:En,set(e,t){return b.default.env.NODE_ENV!=="production"&&ke(`Set operation on key "${String(t)}" failed: target is readonly.`,e),!0},deleteProperty(e,t){return b.default.env.NODE_ENV!=="production"&&ke(`Delete operation on key "${String(t)}" failed: target is readonly.`,e),!0}};var qt=e=>e,xt=e=>Reflect.getPrototypeOf(e);function Tt(e,t,n=!1,i=!1){e=e.__v_raw;let s=T(e),r=T(t);n||(t!==r&&L(s,"get",t),L(s,"get",r));let{has:a}=xt(s),c=i?qt:n?te:Xt;if(a.call(s,t))return c(e.get(t));if(a.call(s,r))return c(e.get(r));e!==s&&e.get(t)}function Et(e,t=!1){let n=this.__v_raw,i=T(n),s=T(e);return t||(e!==s&&L(i,"has",e),L(i,"has",s)),e===s?n.has(e):n.has(e)||n.has(s)}function It(e,t=!1){return e=e.__v_raw,!t&&L(T(e),"iterate",Y),Reflect.get(e,"size",e)}function De(e){e=T(e);let t=T(this);return xt(t).has.call(t,e)||(t.add(e),V(t,"add",e,e)),this}function Ue(e,t){t=T(t);let n=T(this),{has:i,get:s}=xt(n),r=i.call(n,e);r?b.default.env.NODE_ENV!=="production"&&Ve(n,i,e):(e=T(e),r=i.call(n,e));let a=s.call(n,e);return n.set(e,t),r?Q(t,a)&&V(n,"set",e,t,a):V(n,"add",e,t),this}function Pe(e){let t=T(this),{has:n,get:i}=xt(t),s=n.call(t,e);s?b.default.env.NODE_ENV!=="production"&&Ve(t,n,e):(e=T(e),s=n.call(t,e));let r=i?i.call(t,e):void 0,a=t.delete(e);return s&&V(t,"delete",e,void 0,r),a}function je(){let e=T(this),t=e.size!==0,n=b.default.env.NODE_ENV!=="production"?q(e)?new Map(e):new Set(e):void 0,i=e.clear();return t&&V(e,"clear",void 0,void 0,n),i}function vt(e,t){return function(i,s){let r=this,a=r.__v_raw,c=T(a),h=t?qt:e?te:Xt;return!e&&L(c,"iterate",Y),a.forEach((u,f)=>i.call(s,h(u),h(f),r))}}function St(e,t,n){return function(...i){let s=this.__v_raw,r=T(s),a=q(r),c=e==="entries"||e===Symbol.iterator&&a,h=e==="keys"&&a,u=s[e](...i),f=n?qt:t?te:Xt;return!t&&L(r,"iterate",h?$t:Y),{next(){let{value:w,done:M}=u.next();return M?{value:w,done:M}:{value:c?[f(w[0]),f(w[1])]:f(w),done:M}},[Symbol.iterator](){return this}}}}function B(e){return function(...t){if(b.default.env.NODE_ENV!=="production"){let n=t[0]?`on key "${t[0]}" `:"";console.warn(`${Yt(e)} operation ${n}failed: target is readonly.`,T(this))}return e==="delete"?!1:this}}function _n(){let e={get(r){return Tt(this,r)},get size(){return It(this)},has:Et,add:De,set:Ue,delete:Pe,clear:je,forEach:vt(!1,!1)},t={get(r){return Tt(this,r,!1,!0)},get size(){return It(this)},has:Et,add:De,set:Ue,delete:Pe,clear:je,forEach:vt(!1,!0)},n={get(r){return Tt(this,r,!0)},get size(){return It(this,!0)},has(r){return Et.call(this,r,!0)},add:B("add"),set:B("set"),delete:B("delete"),clear:B("clear"),forEach:vt(!0,!1)},i={get(r){return Tt(this,r,!0,!0)},get size(){return It(this,!0)},has(r){return Et.call(this,r,!0)},add:B("add"),set:B("set"),delete:B("delete"),clear:B("clear"),forEach:vt(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(r=>{e[r]=St(r,!1,!1),n[r]=St(r,!0,!1),t[r]=St(r,!1,!0),i[r]=St(r,!0,!0)}),[e,n,t,i]}var[Dn,Un,Pn,jn]=_n();function Ge(e,t){let n=t?e?jn:Pn:e?Un:Dn;return(i,s,r)=>s==="__v_isReactive"?!e:s==="__v_isReadonly"?e:s==="__v_raw"?i:Reflect.get(it(n,s)&&s in i?n:i,s,r)}var On={get:Ge(!1,!1)};var Fn={get:Ge(!0,!1)};function Ve(e,t,n){let i=T(n);if(i!==n&&t.call(e,i)){let s=Wt(e);console.warn(`Reactive ${s} contains both the raw and reactive versions of the same object${s==="Map"?" as keys":""}, which can lead to inconsistencies. Avoid differentiating between the raw and reactive versions of an object and only use the reactive version if possible.`)}}var We=new WeakMap,Bn=new WeakMap,Ye=new WeakMap,Rn=new WeakMap;function zn(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Gn(e){return e.__v_skip||!Object.isExtensible(e)?0:zn(Wt(e))}function at(e){return Nt(e)?e:He(e,!1,Cn,On,We)}function j(e){return He(e,!0,Ln,Fn,Ye)}function He(e,t,n,i,s){if(!F(e))return b.default.env.NODE_ENV!=="production"&&console.warn(`value cannot be made reactive: ${String(e)}`),e;if(e.__v_raw&&!(t&&e.__v_isReactive))return e;let r=s.get(e);if(r)return r;let a=Gn(e);if(a===0)return e;let c=new Proxy(e,a===2?i:n);return s.set(e,c),c}function ct(e){return Nt(e)?ct(e.__v_raw):!!(e&&e.__v_isReactive)}function Nt(e){return!!(e&&e.__v_isReadonly)}function Qt(e){return!!(e&&e.__v_isShallow)}function T(e){let t=e&&e.__v_raw;return t?T(t):e}function Ke(e){return Me(e,"__v_skip",!0),e}var Xt=e=>F(e)?at(e):e,te=e=>F(e)?j(e):e;function Vn(e){z&&N&&(e=T(e),b.default.env.NODE_ENV!=="production"?Zt(e.dep||(e.dep=st()),{target:e,type:"get",key:"value"}):Zt(e.dep||(e.dep=st())))}function Wn(e,t){e=T(e);let n=e.dep;n&&(b.default.env.NODE_ENV!=="production"?X(n,{target:e,type:"set",key:"value",newValue:t}):X(n))}function R(e){return!!(e&&e.__v_isRef===!0)}var $e,Jt=class{constructor(t,n,i,s){this._setter=n,this.dep=void 0,this.__v_isRef=!0,this[$e]=!1,this._dirty=!0,this.effect=new rt(t,()=>{this._dirty||(this._dirty=!0,Wn(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!s,this.__v_isReadonly=i}get value(){let t=T(this);return Vn(t),(t._dirty||!t._cacheable)&&(t._dirty=!1,t._value=t.effect.run()),t._value}set value(t){this._setter(t)}};$e="__v_isReadonly";function H(e,t,n=!1){let i,s,r=P(e);r?(i=e,s=b.default.env.NODE_ENV!=="production"?()=>{console.warn("Write operation failed: computed value is readonly")}:wt):(i=e.get,s=e.set);let a=new Jt(i,s,r||!s,n);return b.default.env.NODE_ENV!=="production"&&t&&!n&&(a.effect.onTrack=t.onTrack,a.effect.onTrigger=t.onTrigger),a}var Yn;Yn="__v_isReadonly";S();function Mt(e,t,n){let i;try{i=n?e(...n):e()}catch(s){Je(s,t)}return i}function ee(e,t,n){if(P(e)){let s=Mt(e,t,n);return s&&Ne(s)&&s.catch(r=>{Je(r,t)}),s}let i=[];for(let s=0;s<e.length;s++)i.push(ee(e[s],t,n));return i}function Je(e,t){console.error(new Error(`[@vue-reactivity/watch]: ${t}`)),console.error(e)}function Hn(e){console.warn(Kn(e))}function Kn(e){return new Error(`[reactivue]: ${e}`)}var Ze={};function lt(e,t,n){return $n(e,t,n)}function $n(e,t,{immediate:n,deep:i,flush:s}={}){let r,a=!1,c=!1;if(R(e)?(r=()=>e.value,a=Qt(e)):ct(e)?(r=()=>e,i=!0):C(e)?(c=!0,a=e.some(ct),r=()=>e.map(I=>R(I)?I.value:ct(I)?tt(I):P(I)?Mt(I,"watch getter"):Hn("invalid source"))):P(e)?t?r=()=>Mt(e,"watch getter"):r=()=>(h&&h(),ee(e,"watch callback",[u])):r=wt,t&&i){let I=r;r=()=>tt(I())}let h,u=I=>{h=_.onStop=()=>{Mt(I,"watch cleanup")}},f=c?[]:Ze,w=()=>{if(!!_.active)if(t){let I=_.run();(i||a||(c?I.some((d,o)=>Q(d,f[o])):Q(I,f)))&&(h&&h(),ee(t,"watch value",[I,f===Ze?void 0:f,u]),f=I)}else _.run()};w.allowRecurse=!!t;let M;s==="sync"?M=w:M=()=>{w()};let _=new rt(r,M);return t?n?w():f=_.run():_.run(),()=>_.stop()}function tt(e,t=new Set){if(!F(e)||t.has(e))return e;if(t.add(e),C(e))for(let n=0;n<e.length;n++)tt(e[n],t);else if(e instanceof Map)e.forEach((n,i)=>{tt(e.get(i),t)});else if(e instanceof Set)e.forEach(n=>{tt(n,t)});else for(let n of Object.keys(e))tt(e[n],t);return e}var qe=Object.defineProperty,Zn=(e,t,n)=>t in e?qe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,v=(e,t)=>qe(e,"name",{value:t,configurable:!0}),Lt=(e,t,n)=>(Zn(e,typeof t!="symbol"?t+"":t,n),n),Jn=(e=>(e.PERA="pera",e.INKEY="inkey",e))(Jn||{}),qn="testnet",Qn="https://testnet-api.algonode.cloud",Xn="",ti="",ft=class{constructor(e){console.log("params",e)}setAsActiveAccount(){console.log("setAsActiveAccount - TODO")}};v(ft,"BaseClient");Lt(ft,"metadata");Lt(ft,"init");var Qe=v(async()=>{try{if(typeof window<"u"){let e=await import("./buffer-DEE2PWSU.mjs");console.log("buff (dynamic import)",e),window.Buffer=e.default.Buffer}return(await import("./esm-6V5ZRUZD.mjs")).default}catch(e){throw console.warn(e),new Error("err w dynamic algosdk/buffer imports")}},"getAlgosdk"),ei="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPCEtLSBHZW5lcmF0b3I6IEFkb2JlIElsbHVzdHJhdG9yIDI0LjIuMCwgU1ZHIEV4cG9ydCBQbHVnLUluIC4gU1ZHIFZlcnNpb246IDYuMDAgQnVpbGQgMCkgIC0tPgo8c3ZnIHZlcnNpb249IjEuMSIgaWQ9IkxheWVyXzEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4IgoJIHZpZXdCb3g9IjAgMCA2MDAgNjAwIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA2MDAgNjAwOyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+CjxzdHlsZSB0eXBlPSJ0ZXh0L2NzcyI+Cgkuc3Qwe2ZpbGw6IzE5MTkxOTt9Cgkuc3Qxe2ZpbGw6I0ZGRkZGRjt9Cjwvc3R5bGU+CjxnPgoJPHBhdGggY2xhc3M9InN0MCIgZD0iTTQ2MCwwSDE0MEM2Mi43LDAsMCw2Mi43LDAsMTQwdjMyMGMwLDc3LjMsNjIuNywxNDAsMTQwLDE0MGg0Ny45TDMwMCw0ODcuOUw0MTIuMSw2MDBINDYwCgkJYzc3LjMsMCwxNDAtNjIuNywxNDAtMTQwVjE0MEM2MDAsNjIuNyw1MzcuMywwLDQ2MCwweiIvPgo8L2c+CjxnPgoJPHBhdGggY2xhc3M9InN0MSIgZD0iTTc3LjEsMjM0Ljl2MTE0LjZINDEuNlYyMzQuOUg3Ny4xeiIvPgoJPHBhdGggY2xhc3M9InN0MSIgZD0iTTIwNi4yLDIzNC45djExNC42aC0zOC45bC0zMS4zLTU2LjhsLTcuMy0xNS41aC0wLjNsMC43LDIyLjZ2NDkuN0g5OC4yVjIzNC45SDEzN2wzMS4zLDU2LjhsNy41LDE1LjVoMC4yCgkJbC0wLjctMjIuNnYtNDkuN0gyMDYuMnoiLz4KCTxwb2x5Z29uIGNsYXNzPSJzdDEiIHBvaW50cz0iMjk5LDM0OS41IDMzOS4xLDM0OS41IDI5OS41LDI4MC45IDMzNi4zLDIzNC45IDI5Ny45LDIzNC45IDI2Mi44LDI4MS43IDI2Mi44LDIzNC45IDIyNy40LDIzNC45IAoJCTIyNy40LDM0OS41IDI2Mi44LDM0OS41IDI2Mi44LDMxOC42IDI3NC41LDMwMy41IAkiLz4KCTxwYXRoIGNsYXNzPSJzdDEiIGQ9Ik0zNTAsMzQ5LjVWMjM0LjloOTIuNHYyNi42aC01Ni45VjI4MGg0NS41djI0LjdoLTQ1LjV2MTguMmg1OS4ydjI2LjZIMzUweiIvPgoJPHBhdGggY2xhc3M9InN0MSIgZD0iTTU2NiwyMzQuOWwtNDAuMSw3NHY0MC42aC0zNS42di00MC42bC00MC4zLTc0SDQ4NmwxMy45LDI4LjZsOC41LDIwbDguMy0yMGwxNC4xLTI4LjZINTY2eiIvPgo8L2c+Cjwvc3ZnPgo=",ut={id:"inkey",chain:"algorand",name:"Inkey Microwallet",icon:ei},ni=v(e=>{if(typeof window==null)throw new Error("[inkey] cannot access window");for(var t="",n=new Uint8Array(e),i=n.byteLength,s=0;s<i;s++)t+=String.fromCharCode(n[s]);return window.btoa(t)},"arrayBufferToBase64"),tn=class extends ft{sdk;constructor({sdk:e}){super(),this.sdk=e}static async init(e){try{console.log("[inkey] init started");let t;if(e&&e.sdk)t=e.sdk;else{let n,i={src:"https://inkey-staging.web.app",align:"center"};n=e?.config||i,console.log("now load up the sdk");let r=(await import("@thencc/inkey-client-js")).createClient;console.log("createClientSdk",r),t=await r(n)}return new tn({sdk:t})}catch(t){return console.warn(`[${ut.id}] Error initializing...`,t),null}}async connect(){console.log("doConnect");let e=await this.sdk.connect();if(!e)throw new Error("no inkeyAccounts");let t=e.map(i=>({address:i.address,name:i.username}));if(t.length===0)throw new Error(`No accounts found for ${ut.id}`);let n=t.map(i=>({...i,providerId:ut.id}));return nn(n),on(n[0]),{...ut,accounts:n}}async reconnect(){return null}async disconnect(){try{await this.sdk.disconnect()}catch(e){console.warn(e.message)}}async signTransactions(e,t){let n=t.map(u=>Xe.default.decode(u));console.log("decodedTxns",n);let i=await Qe();console.log("getting algosdk... TODO optimize this!");let r=n.reduce((u,f,w)=>(console.log("readout txnsToSign:",{acc:u,txn:f,i:w}),!("txn"in f)&&e.includes(i.encodeAddress(f.snd))&&u.push(t[w]),u),[]).map(u=>ni(u)),a=await this.sdk.signTxns(r);if(console.log("result",a),!a.success)throw new Error("did not sign txns");let c=[a.signedTxns];return console.log("returnedTxns",c),n.reduce((u,f,w)=>{if("txn"in f)u.push(t[w]);else{let M=c.shift();M&&u.push(M)}return u},[])}},dt=tn;v(dt,"InkeyClient");Lt(dt,"metadata",ut);var ii="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz48c3ZnIGlkPSJMYXllcl8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxNzcgMTg3Ij48cmVjdCB4PSItMTEuMzgiIHk9Ii0yNS45NyIgd2lkdGg9IjIwMC4wMiIgaGVpZ2h0PSIyMzEuNTMiIHN0eWxlPSJmaWxsOiNmZTU7Ii8+PHBhdGggZD0iTTk0LjA1LDU5LjYxYzIuMDUsOC40OCwxLjM2LDE1Ljk0LTEuNTUsMTYuNjYtMi45LC43Mi02LjkxLTUuNTctOC45Ni0xNC4wNS0yLjA1LTguNDgtMS4zNi0xNS45NCwxLjU1LTE2LjY2LDIuOS0uNzIsNi45MSw1LjU3LDguOTYsMTQuMDVaIiBzdHlsZT0iZmlsbDojMWMxYzFjOyIvPjxwYXRoIGQ9Ik0xMjcuODUsNjYuOWMtNC41My00LjgxLTEzLjU1LTMuNS0yMC4xNSwyLjkxLTYuNTksNi40MS04LjI2LDE1LjUtMy43MywyMC4zMSw0LjUzLDQuOCwxMy41NSwzLjUsMjAuMTUtMi45MXM4LjI2LTE1LjUsMy43My0yMC4zMVoiIHN0eWxlPSJmaWxsOiMxYzFjMWM7Ii8+PHBhdGggZD0iTTkxLjc5LDE0MC40N2MyLjktLjcyLDMuNDktOC42LDEuMzItMTcuNjEtMi4xNy05LTYuMjktMTUuNzEtOS4xOS0xNC45OS0yLjksLjcyLTMuNDksOC42LTEuMzIsMTcuNjEsMi4xNyw5LDYuMjksMTUuNzEsOS4xOSwxNC45OVoiIHN0eWxlPSJmaWxsOiMxYzFjMWM7Ii8+PHBhdGggZD0iTTYyLjIyLDcxLjNjOC4zNywyLjQ3LDE0LjQ4LDYuOCwxMy42Niw5LjY3LS44MywyLjg3LTguMjgsMy4yLTE2LjY1LC43My04LjM3LTIuNDctMTQuNDgtNi44LTEzLjY2LTkuNjcsLjgzLTIuODcsOC4yOC0zLjIsMTYuNjUtLjczWiIgc3R5bGU9ImZpbGw6IzFjMWMxYzsiLz48cGF0aCBkPSJNMTE2LjU0LDEwMy43NGM4Ljg4LDIuNjIsMTUuNDEsNy4wNywxNC41OSw5Ljk0LS44MywyLjg3LTguNywzLjA4LTE3LjU4LC40Ni04Ljg4LTIuNjItMTUuNDEtNy4wNy0xNC41OS05Ljk0LC44My0yLjg3LDguNy0zLjA4LDE3LjU4LS40NloiIHN0eWxlPSJmaWxsOiMxYzFjMWM7Ii8+PHBhdGggZD0iTTcxLjY0LDk3LjcxYy0yLjA4LTIuMTUtOC44OCwuOTgtMTUuMiw2Ljk5LTYuMzIsNi4wMS05Ljc2LDEyLjYzLTcuNjksMTQuNzgsMi4wOCwyLjE1LDguODgtLjk4LDE1LjItNi45OSw2LjMyLTYuMDEsOS43Ni0xMi42Myw3LjY5LTE0Ljc4WiIgc3R5bGU9ImZpbGw6IzFjMWMxYzsiLz48L3N2Zz4=",K={id:"pera",chain:"algorand",name:"Pera",icon:ii},en=class extends ft{sdk;constructor({sdk:e}){super(),this.sdk=e}static async init(e){try{typeof window<"u"?window.global=window:console.warn("Using a browser lib not in a browser...");let t;if(e&&e.sdk)t=e.sdk;else{let n,i={shouldShowSignTxnToast:!1};n=e?.config||i;let s=await import("@perawallet/connect"),r=s.PeraWalletConnect||s.default.PeraWalletConnect;console.log("createClientSdk",r),t=new r(n)}return t=Ke(t),new en({sdk:t})}catch(t){return console.error(`[${K.id}] Error initializing...`,t),null}}async connect(e){let t=await this.sdk.connect();if(this.sdk.connector?.on("disconnect",e),t.length===0)throw new Error(`No accounts found for ${K.id}`);let n=t.map((i,s)=>({name:`Pera Wallet ${s+1}`,address:i,providerId:K.id}));return nn(n),on(n[0]),{...K,accounts:n}}async reconnect(e){let t=await this.sdk.reconnectSession().catch(console.info);return this.sdk.connector?.on("disconnect",e),t?{...K,accounts:t.map((n,i)=>({name:`Pera Wallet ${i+1}`,address:n,providerId:K.id}))}:null}async disconnect(){await this.sdk.disconnect()}async signTransactions(e,t){let n=await Qe();console.log("getting algosdk... TODO optimize this!");let i=t.map(c=>n.decodeObj(c)),s=i.reduce((c,h,u)=>(!("txn"in h)&&e.includes(n.encodeAddress(h.snd))?c.push({txn:n.decodeUnsignedTransaction(t[u])}):c.push({txn:n.decodeSignedTransaction(t[u]).txn,signers:[]}),c),[]),r=await this.sdk.signTransaction([s]);return i.reduce((c,h,u)=>{if("txn"in h)c.push(t[u]);else{let f=r.shift();f&&c.push(f)}return c},[])}},kt=en;v(kt,"PeraClient");Lt(kt,"metadata",K);var O={pera:{id:"pera",pkg:"@perawallet/connect",client:kt,meta:kt.metadata},inkey:{id:"inkey",pkg:"@thencc/inkey-client-js",client:dt,meta:dt.metadata}},Ti=Object.values(O).map(e=>e.client.metadata.id),Ei=Object.values(O).map(e=>e.pkg),Ii=v(e=>{let t=[];for(let n of e)t.push(O[n].pkg);return t},"excludeClients"),vi=v(async(e,t,n)=>{let i={},s={},{network:r=qn,nodeServer:a=Qn,nodePort:c=ti,nodeToken:h=Xn}=t||{};if(!e||e.length===0)for(let[u,f]of Object.entries(O))u!=="kmd"&&(i[u]=f.client.init());if(e)for(let u of e)console.log("do init for prov:",u),i[u]=O[u].client.init();return i},"initializeProviders"),Si=v(async e=>{try{let t={};for(let n in e){let i=n,s=await e[i];s?(s.reconnect(s.disconnect),t[i]=s):console.error("no client found for:",n,". is the pkg installed?")}return t}catch(t){console.error(t)}},"reconnectProviders"),oi={"@perawallet/connect":"^1.1.0","@randlabs/myalgo-connect":"^1.4.2","@thencc/inkey-client-js":"^0.0.2"},ki=Object.keys(oi),m=at({count:0,rps:null,activeAddress:"",activeClientId:null,wallets:null,wallets2:{},stored:{version:0,connectedAccounts:[],activeAccount:null}}),nn=v(e=>{console.log("addConnectedAccounts",e);for(let t of e){let n=!1;for(let i of m.stored.connectedAccounts)t.providerId==i.providerId&&t.address==i.address&&(n=!0);n||m.stored.connectedAccounts.push(t)}},"addConnectedAccounts"),on=v(e=>{console.log("setAsActiveAccount",e),m.stored.activeAccount=e},"setAsActiveAccount"),Ci=v(e=>{console.log("enableWallets started");let t=Object.keys(e);for(let n in t){let i=n,s=at({client:null,inited:!1,initing:!1,isReady:async()=>(console.log("isReady"),s.inited||(s.initing=!0,s.client=await O.inkey.client.init(),s.initing=!1),!0),connect:async()=>{await s.isReady(),await s.client.connect()},setAsActiveWallet:()=>{let r=Ct(i);if(r)m.stored.activeAccount=r[0];else throw new Error("No accounts for this provider to set as active")},removeAccounts(){ne(i)},accounts:j(H(()=>Ct(i))),isActive:j(H(()=>m.stored.activeAccount?.providerId===i)),isConnected:j(H(()=>m.stored.connectedAccounts.some(r=>r.providerId===i)))});m.wallets2[i]=s}},"enableWallets"),Li=v(async(e,t,n)=>{console.log("initClients",e,t,n);let i={};if(e)for(let[r,a]of Object.entries(e)){let c=r;typeof a=="object"&&(a.config||a.sdk)?i[r]=await O[c].client.init(a):a==!0&&(i[r]=await O[c].client.init())}else{console.log("default to init them all! + use the default configs");for(let[r,a]of Object.entries(O))i[r]=await a.client.init()}console.log("ips",i);let s=i;if(m.rps=s,s){let r=s;m.wallets==null&&(m.wallets={});for(let a in r){let c=a,h=r[c];if(h!==null){let u={client:h,connect:async()=>await h.connect(()=>{}),disconnect:async()=>{ne(c);try{await h.disconnect()}catch(f){console.warn(f)}},reconnect:async()=>await h.reconnect(()=>{}),setAsActiveWallet:()=>{let f=Ct(c);if(f)m.stored.activeAccount=f[0];else throw new Error("No accounts for this provider to set as active")},removeAccounts(){ne(c)},accounts:j(H(()=>Ct(c))),isActive:j(H(()=>m.stored.activeAccount?.providerId===c)),isConnected:j(H(()=>m.stored.connectedAccounts.some(f=>f.providerId===c)))};m.wallets[c]=u}}}return s},"initClients"),Ct=v(e=>m.stored.connectedAccounts.filter(t=>t.providerId===e),"getAccountsByProvider"),ne=v(e=>{if(console.log("removeAccountsByClient",e),m.stored.activeAccount){let n=m.stored.connectedAccounts.filter(i=>i.providerId==e);for(let i of n)if(i.address==m.stored.activeAccount.address&&i.providerId==m.stored.activeAccount.providerId){m.stored.activeAccount=null;break}}let t=m.stored.connectedAccounts.filter(n=>n.providerId!==e);m.stored.connectedAccounts=t},"removeAccountsByClient"),_i=v(async e=>{if(console.log("signTransactions",e),!m.wallets)throw new Error("No wallets initialized");if(!m.activeClientId)throw new Error("No active wallet");if(!m.activeAddress)throw new Error("No active account");let t=await m.wallets[m.activeClientId].client.signTransactions([m.activeAddress],e);return console.log("txnsSigned",t),t},"signTransactions"),sn="w3h",si=v(()=>{console.log("initLocalStorage");let e=localStorage.getItem(sn);if(e)try{let t=JSON.parse(e);m.stored=t}catch{console.warn("bad sLocalStorage parse")}},"initLocalStorage");typeof window<"u"&&si();lt(()=>m.stored,()=>{localStorage.setItem(sn,JSON.stringify(m.stored));let e="";m.stored.activeAccount&&(e=m.stored.activeAccount.address),m.activeAddress=e},{deep:!0});lt(()=>m.stored.activeAccount,e=>{let t="",n=null;e&&(t=e.address,n=e.providerId),m.activeAddress=t,m.activeClientId=n},{deep:!0,immediate:!0});var ri=v(e=>{console.log("onChange"),console.log("latest",e)},"onChange");lt(m,e=>{console.log("[in pkg] something changed"),ri(e)},{deep:!0});var Di=dt,Ui={};S();var _t=class{ready=!1;initing=!1;destroying=!1;walEl=null;walElContainer=null;walWin=null;onMsgHandler=null;requests=new Map;constructor(t){t?typeof t=="string"?this.initId(t):typeof t=="object"?t.id?this.initId(t.id):t.src?this.initSrc(t.src,t.align):console.error("err constructing FrameBus"):console.error("err constructing FrameBus"):this.initSrc(),document.body.addEventListener("DOMNodeRemoved",n=>{this.destroying||n.target==this.walElContainer&&(console.log("iframe container removed from DOM"),this.destroy())},!1)}initId(t){console.log("initId"),console.warn("WARNING: initId is less tested + supported than initSrc..."),this.destroy();let n=document.getElementById(t);if(!n){console.error("no walEl");return}this.walEl=n;let i=n.contentWindow;if(n.classList.add("inkey-frame"),!i){console.error("no walWin");return}this.walWin=i,this.ready=!0,this.onMsgHandler=this.onMessage.bind(this),window.addEventListener("message",this.onMsgHandler,!1)}async initSrc(t="http://default-src.com",n){if(console.log("initSrc",t),document.querySelector("iframe#inkey-frame")){console.warn("dont mount frame to DOM again");return}this.destroy(),this.initing=!0;let s=document.createElement("div");s.setAttribute("id","inkey-frame-container"),n=="left"&&s.classList.add("align-left"),n=="right"&&s.classList.add("align-right");let r=document.createElement("iframe");r.src=t,r.classList.add("inkey-frame"),r.setAttribute("id","inkey-frame"),r.setAttribute("name","walFrame"),r.setAttribute("title","Algorand Microwallet"),r.setAttribute("frameborder","0"),r.setAttribute("sandbox","allow-scripts allow-same-origin allow-forms allow-modals allow-popups allow-downloads"),r.setAttribute("allow","publickey-credentials-get; clipboard-write"),r.style.visibility="hidden",this.walEl=r,this.walElContainer=s,s.appendChild(r),document.body.append(s);let a=r.contentWindow;if(!a){console.error("no walWin");return}this.walWin=a,r.addEventListener("load",()=>{this.ready=!0,this.initing=!1,this.onMsgHandler=this.onMessage.bind(this),window.addEventListener("message",this.onMsgHandler,!1);let c={source:"ncc-inkey-client",type:"get-style-recs"};this.emit(c)})}showFrame(t){if(this.walEl){this.walEl.classList.add("visible"),this.walEl.style.position="sticky",setTimeout(()=>{this.walEl.style.position="absolute"},100);let n={source:"ncc-inkey-client",type:"set-visibility",payload:{visible:!0,route:t}};this.emit(n)}}hideFrame(){if(this.walEl){this.walEl.classList.remove("visible");let t={source:"ncc-inkey-client",type:"set-visibility",payload:{visible:!1}};this.emit(t)}}setHeight(t,n="px"){this.walEl&&(this.walEl.style.height=`${t}${n}`)}destroy(){this.destroying=!0,this.walElContainer&&(this.walEl&&this.walElContainer.removeChild(this.walEl),document.body.removeChild(this.walElContainer),this.walElContainer=null),this.walEl&&(this.walEl=null),this.walWin&&(this.walWin=null),this.onMsgHandler&&(window.removeEventListener("message",this.onMsgHandler,!1),this.onMsgHandler=null),this.removeStyles(),this.ready=!1,this.initing=!1,this.destroying=!1}async isReady(){return new Promise(t=>{if(this.ready)t(!0);else if(this.initing){let n=setInterval(()=>{console.log("isReady intervaling"),this.ready&&(clearInterval(n),t(!0))},150)}else console.warn("do initSrc again"),t(!1)})}setOnDisconnect(t){this.onDisconnect=t}onDisconnect(){console.log("onDisconnect")}onMessage(t){if(t.data.source&&t.data.source=="ncc-inkey-wallet"){if(console.log("client got mess",t.data),t.data.type==="hide"&&this.hideFrame(),t.data.type==="disconnect"&&this.onDisconnect(),t.data.type==="set-height"){let n=t.data.payload.height;n&&this.setHeight(n)}if(t.data.type=="styles-recommonded"){let n=t.data.payload.css;this.insertStyles(n)}if(t.data.async&&t.data.async==!0&&t.data.uuid){let n=this.requests.get(t.data.uuid);if(!n)throw Error("no outgoing val for event type");this.requests.delete(t.data.uuid);let i=n.resolve;i(t.data.payload)}}}emit(t){if(!this.ready)throw new Error("FrameBus not ready");let n=new Date().getTime().toString();if(t={...t,uuid:n},this.walEl&&this.walWin)this.walWin.postMessage(t,this.walEl.src);else throw new Error("no wallEl or walWin")}emitAsync(t){if(console.log("emitAsync"),!this.ready)throw new Error("FrameBus not ready");let n=new Date().getTime().toString();if(t={...t,uuid:n,async:!0},this.walEl&&this.walWin)this.walWin.postMessage(t,this.walEl.src);else throw new Error("no wallEl or walWin");return new Promise(i=>{this.requests.set(n,{req:t,resolve:i})})}insertStyles(t){let n=document.querySelector("style#inkey-frame-styles");if(n)n.innerText=t;else{let i=document.createElement("style");i.setAttribute("id","inkey-frame-styles"),i.innerText=t,document.head.appendChild(i)}this.walEl?setTimeout(()=>{this.walEl.style.visibility="initial"},100):console.warn("no walEl for style.visibility reset")}removeStyles(){let t=document.querySelector("style#inkey-frame-styles");t&&document.head.removeChild(t)}};var ie=class{algodClient;indexerClient=void 0;config=void 0;sdk=Ie;account=void 0;address=void 0;mnemonic=void 0;uiLoading=!1;inkeyWallet={defaultSrc:"123",otherConfig:{},frameBus:void 0};constructor(t){this.setConfig(t)}isValidConfig(t){let n=!0;return(!t.BASE_SERVER||!t.API_TOKEN)&&(n=!1),n}setConfig(t){if(!this.isValidConfig(t))throw new Error("bad config!");this.config=t,this.algodClient=new ue(t.API_TOKEN,t.BASE_SERVER,t.PORT),t.INDEX_SERVER?this.indexerClient=new de(t.API_TOKEN,t.INDEX_SERVER,t.PORT):console.warn("No indexer configured because INDEX_SERVER was not provided."),t.SIGNING_MODE&&t.SIGNING_MODE=="inkey"&&(t.INKEY_SRC||(t.INKEY_SRC="https://inkey.app"),t.INKEY_ALIGN||(t.INKEY_ALIGN="center"),this.initInkey({src:t.INKEY_SRC,align:t.INKEY_ALIGN}))}getConfig(){return this.config?this.config:!1}async checkStatus(){if(!this.getConfig())throw new Error("No node configuration set.");let t=await this.algodClient.status().do();return console.log("Algorand network status: %o",t),t}initInkey(t){if(!t.src){console.warn("You must provide INKEY_SRC in Algonaut.js config");return}this.inkeyWallet.frameBus&&(this.inkeyWallet.frameBus.destroy(),this.inkeyWallet.frameBus=void 0),t.src?this.inkeyWallet.frameBus=new _t({src:t.src,align:t.align}):console.warn("Cannot init Inkey")}setAccount(t){if(!t)throw new Error("No account provided.");this.account=t,this.address=t.addr,this.mnemonic=pt(t.sk)}setInkeyAccount(t){if(!t)throw new Error("No address provided.");this.account={addr:t,sk:new Uint8Array([])}}createWallet(){if(this.account=jt(),this.account)return this.address=this.account.addr,this.mnemonic=pt(this.account.sk),{address:this.account.addr,mnemonic:this.mnemonic||""};throw new Error("There was no account: could not create algonaut wallet!")}recoverAccount(t){if(!t)throw new Error("algonaut.recoverAccount: No mnemonic provided.");return this.account=k.recoverAccount(t),this.account}async waitForConfirmation(t,n,i=!1){if(!t)throw new Error("waitForConfirmation: No transaction ID provided.");let s=(await this.algodClient.status().do())["last-round"],r=s+(n||50),a={status:"fail",message:""};for(;s<r;){let c="";try{c=await this.algodClient.pendingTransactionInformation(t).do(),i&&console.log("waiting for confirmation")}catch(h){console.error(h.response?.text)}if(c["confirmed-round"]!==null&&c["confirmed-round"]>0){i&&console.log("Transaction confirmed in round "+c["confirmed-round"]),a.txId=t,a.status="success",a.message="Transaction confirmed in round "+c["confirmed-round"];break}s=(await this.algodClient.status().do())["last-round"]}return a}generateLogicSig(t){if(!t)throw new Error("No program string provided.");return k.generateLogicSig(t)}async atomicOptInAsset(t,n){if(!this.account)throw new Error("No account set in Algonaut.");if(!t)throw new Error("No asset index provided.");let i=n?.suggestedParams||await this.algodClient.getTransactionParams().do();return{transaction:mt({from:this.account.addr,to:this.account.addr,assetIndex:t,amount:0,suggestedParams:i}),transactionSigner:this.account,isLogigSig:!1}}async optInAsset(t,n,i){if(!this.account)throw new Error("There was no account!");if(!t)throw new Error("No asset index provided.");let{transaction:s}=await this.atomicOptInAsset(t,i);return await this.sendTransaction(s,n)}async isOptedIntoAsset(t){if(!t.account)throw new Error("No account provided.");if(!t.assetId)throw new Error("No asset ID provided.");let n=!1;return(await this.getAccountInfo(t.account)).assets.forEach(s=>{s["asset-id"]==t.assetId&&(n=!0)}),n}encodeArguments(t){return k.encodeArguments(t)}async atomicCreateAsset(t){if(!t.assetName)throw new Error("args.assetName not provided.");if(!t.symbol)throw new Error("args.symbol not provided");if(typeof t.decimals>"u")throw new Error("args.decimals not provided.");if(!t.amount)throw new Error("args.amount not provided.");if(!this.account)throw new Error("There was no account set in Algonaut");t.metaBlock||(t.metaBlock=" "),t.defaultFrozen||(t.defaultFrozen=!1),t.assetURL||(t.assetURL=void 0);let n=t.metaBlock.length;if(n>1023)throw console.error("meta block is "+n),new Error("drat! this meta block is too long!");let s=new TextEncoder().encode(t.metaBlock),r=this.account.addr,a=t.amount,c=t.manager&&t.manager.length>0?t.manager:this.account.addr,h=t.reserve&&t.reserve.length>0?t.reserve:this.account.addr,u=t.freeze&&t.freeze.length>0?t.freeze:this.account.addr,f=t.clawback&&t.clawback.length>0?t.clawback:this.account.addr,w=t.optionalFields?.suggestedParams||await this.algodClient.getTransactionParams().do();return{transaction:me(r,s,a,t.decimals,t.defaultFrozen,c,h,u,f,t.symbol,t.assetName,t.assetURL,t.assetMetadataHash,w),transactionSigner:this.account,isLogigSig:!1}}async createAsset(t,n){let s=(await this.atomicCreateAsset(t)).transaction;try{let a=await this.sendTransaction(s,n),c=await this.algodClient.pendingTransactionInformation(s.txID().toString()).do();return a.createdIndex=c["asset-index"],a}catch(r){throw console.log("transaction error"),console.log(r),new Error(r)}}async atomicDeleteAsset(t,n){if(!this.account)throw new Error("there was no account!");if(!t)throw new Error("No assetId provided!");let i=new TextEncoder,s=n?.suggestedParams||await this.algodClient.getTransactionParams().do();return{transaction:we(this.account.addr,i.encode("doh!"),t,s),transactionSigner:this.account,isLogigSig:!1}}async deleteAsset(t,n,i){if(!t)throw new Error("No asset ID provided!");let{transaction:s}=await this.atomicDeleteAsset(t,i);return await this.sendTransaction(s,n)}async atomicSendAsset(t){if(!t.to)throw new Error("No to address provided");if(!t.assetIndex)throw new Error("No asset index provided");if(!t.amount)throw new Error("No amount provided");let n=t.from||this.account?.addr;if(!n)throw new Error("there is no fromAddr");let i=t.optionalFields?.suggestedParams||await this.algodClient.getTransactionParams().do();return{transaction:mt({from:n,to:t.to,amount:t.amount,assetIndex:t.assetIndex,suggestedParams:i}),transactionSigner:this.account,isLogigSig:!1}}async sendAsset(t,n){if(!this.account)throw new Error("There was no account!");let{transaction:i}=await this.atomicSendAsset(t);return await this.sendTransaction(i,n)}async getAssetInfo(t){if(!t)throw new Error("No asset ID provided");return await this.algodClient.getAssetByID(t).do()}async atomicOptInApp(t){if(!t.appIndex)throw new Error("No app ID provided");if(!this.account)throw new Error("No account in algonaut");let n=this.account.addr,i=t.optionalFields?.suggestedParams||await this.algodClient.getTransactionParams().do();return{transaction:Te({from:n,appIndex:t.appIndex,suggestedParams:i,appArgs:t.appArgs?this.encodeArguments(t.appArgs):void 0,accounts:t.optionalFields?.accounts?t.optionalFields?.accounts:void 0,foreignApps:t.optionalFields?.applications?t.optionalFields?.applications:void 0,foreignAssets:t.optionalFields?.assets?t.optionalFields?.assets:void 0}),transactionSigner:this.account,isLogigSig:!1}}async optInApp(t,n){let{transaction:i}=await this.atomicOptInApp(t);return await this.sendTransaction(i,n)}async atomicDeleteApp(t,n){if(!this.account)throw new Error("No account set.");if(!t)throw new Error("No app ID provided");let i=this.account.addr,s=n?.suggestedParams||await this.algodClient.getTransactionParams().do();return{transaction:be(i,s,t),transactionSigner:this.account,isLogigSig:!1}}async atomicDeleteApplication(t,n){return console.warn("atomicDeleteApplication is deprecated and will be removed in future versions."),await this.atomicDeleteApp(t,n)}async deleteApp(t,n,i){if(!this.account)throw new Error("There was no account");try{let{transaction:s}=await this.atomicDeleteApp(t,i),r=s.txID().toString(),a=await this.sendTransaction(s,n),h=(await this.algodClient.pendingTransactionInformation(r).do()).txn.txn.apid;return{status:"success",message:"deleted app index "+h,txId:r}}catch(s){throw console.log(s),new Error(s.response?.text)}}async deleteApplication(t,n,i){return console.warn("deleteApplication is deprecated and will be removed in future versions."),await this.deleteApp(t,n,i)}async atomicCallApp(t){if(!this.account)throw new Error("There was no account!");if(!t.appIndex)throw new Error("Must provide appIndex");if(!t.appArgs.length)throw new Error("Must provide at least one appArgs");let n=this.encodeArguments(t.appArgs),i=t.optionalFields?.suggestedParams||await this.algodClient.getTransactionParams().do();return{transaction:Rt({from:this.account.addr,suggestedParams:i,appIndex:t.appIndex,appArgs:n,accounts:t.optionalFields?.accounts||void 0,foreignApps:t.optionalFields?.applications||void 0,foreignAssets:t.optionalFields?.assets||void 0,note:t.optionalFields?.note?this.to8Arr(t.optionalFields.note):void 0}),transactionSigner:this.account,isLogigSig:!1}}async callApp(t,n){let{transaction:i}=await this.atomicCallApp(t);return await this.sendTransaction(i,n)}async atomicCallAppWithLSig(t){if(!this.account)throw new Error("There was no account!");if(!t.appIndex)throw new Error("Must provide appIndex");if(!t.appArgs.length)throw new Error("Must provide at least one appArgs");let n=this.encodeArguments(t.appArgs),i=t.optionalFields?.suggestedParams||await this.algodClient.getTransactionParams().do();return{transaction:Rt({from:t.lsig.address(),suggestedParams:i,appIndex:t.appIndex,appArgs:n,accounts:t.optionalFields?.accounts||void 0,foreignApps:t.optionalFields?.applications||void 0,foreignAssets:t.optionalFields?.assets||void 0}),transactionSigner:t.lsig,isLogigSig:!0}}async atomicCloseOutApp(t){if(!this.account)throw new Error("There was no account!");if(!t.appIndex)throw new Error("Must provide appIndex");try{let n=t.optionalFields?.suggestedParams||await this.algodClient.getTransactionParams().do(),i=this.encodeArguments(t.appArgs);return{transaction:Ee({from:this.account.addr,suggestedParams:n,appIndex:t.appIndex,appArgs:i,accounts:t.optionalFields?.accounts||void 0,foreignApps:t.optionalFields?.applications||void 0,foreignAssets:t.optionalFields?.assets||void 0}),transactionSigner:this.account,isLogigSig:!1}}catch(n){throw new Error(n)}}async closeOutApp(t,n){let{transaction:i}=await this.atomicCloseOutApp(t);return await this.sendTransaction(i,n)}getAppEscrowAccount(t){if(!t)throw new Error("No appId provided");return k.getAppEscrowAccount(t)}async getAppInfo(t){if(!t)throw new Error("No appId provided");let n=[this.algodClient.getApplicationByID(t).do()];this.account&&n.push(this.getAppLocalState(t));let i=await Promise.all(n),s=i[0],r=i[1],a={hasState:!0,globals:[],locals:r?.locals||[],creatorAddress:s.params.creator,index:t};return s.params["global-state"]&&(a.globals=this.decodeStateArray(s.params["global-state"])),a}async createApp(t,n){if(t.optionalFields&&t.optionalFields.note&&t.optionalFields.note.length>1023)throw console.warn("drat! your note is too long!"),new Error("Your note is too long");if(!this.account)throw new Error("There was no account!");if(!t.tealApprovalCode)throw new Error("No approval program provided");if(!t.tealClearCode)throw new Error("No clear program provided");if(!t.schema)throw new Error("No schema provided");try{let i=this.account.addr,s=t.optionalFields?.suggestedParams||await this.algodClient.getTransactionParams().do(),r=new Uint8Array,a=new Uint8Array;if(r=await this.compileProgram(t.tealApprovalCode),a=await this.compileProgram(t.tealClearCode),r&&a){let c=ye({from:i,suggestedParams:s,onComplete:nt.NoOpOC,approvalProgram:r,clearProgram:a,numLocalInts:t.schema.localInts,numLocalByteSlices:t.schema.localBytes,numGlobalInts:t.schema.globalInts,numGlobalByteSlices:t.schema.globalBytes,appArgs:this.encodeArguments(t.appArgs),accounts:t.optionalFields?.accounts?t.optionalFields.accounts:void 0,foreignApps:t.optionalFields?.applications?t.optionalFields.applications:void 0,foreignAssets:t.optionalFields?.assets?t.optionalFields.assets:void 0,note:t.optionalFields?.note?this.to8Arr(t.optionalFields.note):void 0}),h=c.txID().toString(),u=await this.sendTransaction(c,n),f=await this.algodClient.pendingTransactionInformation(h).do();return u.message="Created App ID: "+f["application-index"],u.createdIndex=f["application-index"],u.meta=f,u.txId=h,u}else throw new Error("could not compile teal code")}catch(i){throw new Error(i.message)}}async atomicCreateApp(t){if(!this.account)throw new Error("There was no account!");if(!t.tealApprovalCode)throw new Error("No approval program provided");if(!t.tealClearCode)throw new Error("No clear program provided");if(!t.schema)throw new Error("No schema provided");if(t.optionalFields&&t.optionalFields.note&&t.optionalFields.note.length>1023)throw new Error("Your NOTE is too long, it must be less thatn 1024 Bytes");if(this.account)try{let n=this.account.addr,i=nt.NoOpOC,s=t.optionalFields?.suggestedParams||await this.algodClient.getTransactionParams().do(),r=new Uint8Array,a=new Uint8Array;if(r=await this.compileProgram(t.tealApprovalCode),a=await this.compileProgram(t.tealClearCode),!r||!a)throw new Error("Error: you must provide an approval program and a clear state program.");return{transaction:Bt(n,s,i,r,a,t.schema.localInts,t.schema.localBytes,t.schema.globalInts,t.schema.globalBytes,this.encodeArguments(t.appArgs),t.optionalFields?.accounts?t.optionalFields.accounts:void 0,t.optionalFields?.applications?t.optionalFields.applications:void 0,t.optionalFields?.assets?t.optionalFields.assets:void 0,t.optionalFields?.note?this.to8Arr(t.optionalFields.note):void 0),transactionSigner:this.account,isLogigSig:!1}}catch{throw new Error("There was an error creating the transaction")}else throw new Error("Algonaut.js has no account loaded!")}async deployTealWithLSig(t){if(t.noteText&&t.noteText.length>511)throw new Error("Your note is too long");if(!this.account)throw new Error("there was no account");let n=[];t.appArgs&&t.appArgs.length&&(n=this.encodeArguments(t.appArgs));let i=t.lsig.address(),s=nt.NoOpOC,r=t.optionalFields?.suggestedParams||await this.algodClient.getTransactionParams().do(),a=new Uint8Array,c=new Uint8Array;try{if(a=await this.compileProgram(t.tealApprovalCode),c=await this.compileProgram(t.tealClearCode),a&&c){let h=Bt(i,r,s,a,c,t.schema.localInts,t.schema.localBytes,t.schema.globalInts,t.schema.globalBytes,n,t.optionalFields?.accounts||void 0),u=h.txID().toString(),f=pe(h,t.lsig);await this.algodClient.sendRawTransaction(f.blob).do();let w=await this.waitForConfirmation(u),_=(await this.algodClient.pendingTransactionInformation(u).do())["application-index"];return{status:"success",message:"created new app with id: "+_,txId:u}}else throw new Error("Error compiling programs.")}catch(h){throw console.error("Error deploying contract:"),new Error(h)}}async atomicUpdateApp(t){if(!this.account)throw new Error("Algonaut.js has no account loaded!");if(!t.tealApprovalCode)throw new Error("No approval program provided");if(!t.tealClearCode)throw new Error("No clear program provided");if(t.optionalFields&&t.optionalFields.note&&t.optionalFields.note.length>1023)throw new Error("Your NOTE is too long, it must be less thatn 1024 Bytes");try{let n=this.account.addr,i=nt.NoOpOC,s=t.optionalFields?.suggestedParams||await this.algodClient.getTransactionParams().do(),r=new Uint8Array,a=new Uint8Array;if(r=await this.compileProgram(t.tealApprovalCode),a=await this.compileProgram(t.tealClearCode),!r||!a)throw new Error("Error: you must provide an approval program and a clear state program.");return{transaction:Ae(n,s,t.appIndex,r,a,this.encodeArguments(t.appArgs),t.optionalFields?.accounts?t.optionalFields.accounts:void 0,t.optionalFields?.applications?t.optionalFields.applications:void 0,t.optionalFields?.assets?t.optionalFields.assets:void 0,t.optionalFields?.note?this.to8Arr(t.optionalFields.note):void 0),transactionSigner:this.account,isLogigSig:!1}}catch{throw new Error("There was an error creating the transaction")}}async updateApp(t,n){let{transaction:i}=await this.atomicUpdateApp(t);return await this.sendTransaction(i,n)}async compileProgram(t){let i=new TextEncoder().encode(t),s=await this.algodClient.compile(i).do();return new Uint8Array(x.Buffer.from(s.result,"base64"))}async atomicSendAlgo(t){if(!t.amount)throw new Error("You did not specify an amount!");if(!t.to)throw new Error("You did not specify a to address");let n=t.from||this.account?.addr;if(n){let i=t.optionalFields?.note?this.to8Arr(t.optionalFields.note):new Uint8Array,s=t.optionalFields?.suggestedParams||await this.algodClient.getTransactionParams().do();return{transaction:Ft({from:n,to:t.to,amount:t.amount,note:i,suggestedParams:s}),transactionSigner:this.account,isLogigSig:!1}}else throw new Error("there is no fromAddr")}async atomicPayment(t){return console.warn("atomicPayment is deprecated and will be removed in future versions."),await this.atomicSendAlgo(t)}async sendAlgo(t,n){if(!this.account)throw new Error("there was no account!");let{transaction:i}=await this.atomicSendAlgo(t);return await this.sendTransaction(i,n)}async getAccountInfo(t){if(!t)throw new Error("No address provided");return await this.algodClient.accountInformation(t).do()}async getAlgoBalance(t){if(!t)throw new Error("No address provided");return(await this.algodClient.accountInformation(t).do()).amount}async getTokenBalance(t,n){if(!t)throw new Error("No address provided");if(!n)throw new Error("No asset index provided");let i=await this.algodClient.accountInformation(t).do(),s=0;return i.assets.forEach(r=>{r["asset-id"]==n&&(s=r.amount)}),s}async accountHasTokens(t,n){return"this is not done yet"}async getAppGlobalState(t){if(!t)throw new Error("No application ID provided");let n=await this.getAppInfo(t);return n.hasState?this.stateArrayToObject(n.globals):{}}async getAppLocalState(t,n){if(!t)throw new Error("No application ID provided");let i={hasState:!1,globals:[],locals:[],creatorAddress:"",index:t};if(this.account&&this.account.addr&&!n&&(n=this.account.addr),n){let s=await this.algodClient.accountInformation(n).do();for(let r=0;r<s["apps-local-state"].length;r++)if(s["apps-local-state"][r].id==t){i.hasState=!0;for(let a=0;a<s["apps-local-state"][r]["key-value"].length;a++){let c=s["apps-local-state"][r]["key-value"][a],h=x.Buffer.from(c.key,"base64").toString(),u=c.value.type,f,w="";u==1?(f=x.Buffer.from(c.value.bytes,"base64").toString(),w=et(x.Buffer.from(c.value.bytes,"base64"))):c.value.type==2&&(f=c.value.uint),i.locals.push({key:h,value:f||"",address:w})}}return i}else console.warn("Algonaut used in non-authd state, not getting local vars")}async atomicAssetTransferWithLSig(t){if(t.lsig){let n=t.optionalFields?.suggestedParams||await this.algodClient.getTransactionParams().do();return{transaction:mt({from:t.lsig.address(),to:t.to,amount:t.amount,assetIndex:t.assetIndex,suggestedParams:n}),transactionSigner:t.lsig,isLogigSig:!0}}else throw new Error("there is no logic sig object!")}async atomicPaymentWithLSig(t){if(t.lsig){let n=t.optionalFields?.suggestedParams||await this.algodClient.getTransactionParams().do();return{transaction:Ft({from:t.lsig.address(),to:t.to,amount:t.amount,suggestedParams:n}),transactionSigner:t.lsig,isLogigSig:!0}}else throw new Error("there is no account!")}async sendTransaction(t,n){if(!this.account)throw new Error("There is no account");if(this.config&&this.config.SIGNING_MODE&&this.config.SIGNING_MODE==="inkey"){let i;if(Array.isArray(t)&&t[0]&&t[0].transaction){let h=t.map(f=>f.transaction).map(f=>x.Buffer.from(Pt(f)).toString("base64")),u=await this.inkeySignTxns(h);if(u.success&&u.signedTxns)i=u.signedTxns;else{if(u.error)throw new Error(u.error);if(u.reject)return{status:"rejected",message:"User rejected the message.",txId:""};throw new Error("Unknown error sending Inkey txn")}}else{let c;t&&t.transaction?c=t.transaction:c=t;let h=x.Buffer.from(Pt(c)).toString("base64"),u=await this.inkeySignTxns([h]);if(u.success&&u.signedTxns)i=u.signedTxns;else{if(u.error)throw new Error(u.error);if(u.reject)return{status:"rejected",message:"User rejected the message.",txId:""};throw new Error("Unknown error sending Inkey txn")}}n?.onSign&&n.onSign(i);let s=await this.algodClient.sendRawTransaction(i).do();n?.onSend&&n.onSend(s);let r=await this.waitForConfirmation(s.txId),a=await this.algodClient.pendingTransactionInformation(s.txId).do();return r.meta=a,n?.onConfirm&&n.onConfirm(r),r}else{if(Array.isArray(t))return await this.sendAtomicTransaction(t,n);{let i;if(t&&t.transaction?i=t.transaction:i=t,!this.account||!this.account.sk)throw new Error("");let s=i.signTxn(this.account.sk);n?.onSign&&n.onSign(s);let r=await this.algodClient.sendRawTransaction(s).do();n?.onSend&&n.onSend(s);let a=r.txId||r.id||r.txId().toString(),c=await this.waitForConfirmation(a);return n?.onConfirm&&n.onConfirm(s),c}}}async inkeyMessageAsync(t,n){if(!this.inkeyWallet.frameBus)throw new Error("No inkey frameBus");return this.inkeyWallet.frameBus.ready||await this.inkeyWallet.frameBus.isReady(),t.source="ncc-inkey-client",t.async=!0,n?.showFrame&&this.inkeyWallet.frameBus.showFrame(),await this.inkeyWallet.frameBus.emitAsync(t)}async inkeySignTxns(t){let n;if(typeof t[0]=="string")n={type:"sign-txns",payload:{txns:t}};else if(typeof t[0]=="object")n={type:"sign-txns",payload:{txns:t}};else throw new Error("bad txns array input...");let i=await this.inkeyMessageAsync(n,{showFrame:!0});return this.inkeyWallet.frameBus?.hideFrame(),i.error?{success:!1,reject:!1,error:i.error}:i.reject?{success:!1,reject:!0}:{success:!0,reject:!1,signedTxns:i.signedTxns}}inkeyShow(t){this.inkeyWallet.frameBus&&this.inkeyWallet.frameBus.showFrame(t)}inkeyHide(){this.inkeyWallet.frameBus&&(this.inkeyWallet.frameBus.hideFrame(),this.inkeyMessageAsync({type:"reject"}))}async inkeySetApp(t){let n={type:"set-app",payload:{appCode:t}};return await this.inkeyMessageAsync(n)}async inkeyConnect(t){t||(t={});let n={type:"connect",payload:t},i=await this.inkeyMessageAsync(n,{showFrame:!0});return this.setInkeyAccount(i.address),this.config&&(this.config.SIGNING_MODE="inkey"),i}async inkeyDisconnect(){let t={type:"disconnect"};if(!this.account||!this.account.addr||!this.address){console.warn("no acct to disconnect");return}let n=await this.inkeyMessageAsync(t,{showFrame:!1});return n.success&&(this.account=void 0),n}async sendAtomicTransaction(t,n){try{let i=[],s=[];t.forEach(u=>{i.push(u.transaction)});let r=gt(i);t.forEach((u,f)=>{let w;u.isLogigSig?w=ge(r[f],u.transactionSigner):w=Z(r[f],u.transactionSigner.sk),s.push(w.blob)}),n?.onSign&&n.onSign(s);let a=await this.algodClient.sendRawTransaction(s).do();n?.onSend&&n.onSend(a);let c=await this.waitForConfirmation(a.txId),h=await this.algodClient.pendingTransactionInformation(a.txId).do();return c.meta=h,n?.onConfirm&&n.onConfirm(c),c}catch(i){throw console.error("Error sending atomic transaction:"),new Error(i)}}signTransactionGroup(t){if(!this.account)throw new Error("There is no account!");return k.signTransactionGroup(t,this.account)}signBase64Transactions(t){if(!this.account)throw new Error("There is no account!");return k.signBase64Transactions(t,this.account)}signBase64TxnObjects(t){if(!this.account)throw new Error("There is no account!");return k.signBase64TxnObjects(t,this.account)}usingInkeyWallet(){return!!(this.config&&this.config.SIGNING_MODE&&this.config.SIGNING_MODE==="inkey")}to8Arr(t,n="utf8"){return k.to8Arr(t,n)}stateArrayToObject(t){return k.stateArrayToObject(t)}fromBase64(t){return k.fromBase64(t)}valueAsAddr(t){return k.valueAsAddr(t)}decodeStateArray(t){return k.decodeStateArray(t)}decodeBase64UnsignedTransaction(t){return k.decodeBase64UnsignedTransaction(t)}txnSummary(t){return k.txnSummary(t)}},Wi=ie,k={createWallet(){let e=jt();if(e){let t=pt(e.sk);return{address:e.addr,mnemonic:t||""}}else throw new Error("There was no account: could not create algonaut wallet!")},recoverAccount(e){if(!e)throw new Error("utils.recoverAccount: No mnemonic provided.");try{let t=fe(e);if(re(t?.addr))return t;throw new Error("Not a valid mnemonic.")}catch(t){throw console.error(t),new Error("Could not recover account from mnemonic.")}},generateLogicSig(e){if(!e)throw new Error("No program string provided.");let t=new Uint8Array(x.Buffer.from(e,"base64"));return new he(t)},encodeArguments(e){let t=[];return e.forEach(n=>{typeof n=="number"?t.push(Ut(n)):typeof n=="bigint"?t.push(Ut(n)):typeof n=="string"&&t.push(new Uint8Array(x.Buffer.from(n)))}),t},getAppEscrowAccount(e){if(!e)throw new Error("No appId provided");return ae(e)},to8Arr(e,t="utf8"){return new Uint8Array(x.Buffer.from(e,t))},stateArrayToObject(e){let t={};return e.forEach(n=>{n.key&&(t[n.key]=n.value||null)}),t},fromBase64(e){return x.Buffer.from(e,"base64").toString()},valueAsAddr(e){return et(x.Buffer.from(e,"base64"))},decodeStateArray(e){let t=[];for(let n=0;n<e.length;n++){let i=e[n],s=this.fromBase64(i.key),r=i.value.type,a,c="";r==1?(a=this.fromBase64(i.value.bytes),c=this.valueAsAddr(i.value.bytes)):i.value.type==2&&(a=i.value.uint),t.push({key:s,value:a||"",address:c})}return t},signTransactionGroup(e,t){if(e.length>1){let n=gt(e),i=[];return e.forEach((s,r)=>{let a=Z(n[r],t.sk);i.push(a.blob)}),i}else return Z(e[0],t.sk).blob},signTxnObjectGroup(e,t){if(e.length>1){e.forEach(r=>{let a=this.decodeBase64UnsignedTransaction(r.txn);r.txnDecoded=a});let n=e.map(r=>r.txnDecoded),i=gt(n),s=[];return e.forEach((r,a)=>{let c;if(r.isMultisig){if(!r.multisigMeta)throw new Error("multisig signing required multisigMeta");c=Ot(i[a],r.multisigMeta,t.sk)}else{if(r.isLogicSig)throw new Error("logic sign signing not yet supported...");c=Z(i[a],t.sk)}s.push(c.blob)}),s}else{let n=e[0],i=this.decodeBase64UnsignedTransaction(n.txn),s;if(n.isMultisig){if(!n.multisigMeta)throw new Error("multisig signing required multisigMeta");s=Ot(i,n.multisigMeta,t.sk)}else{if(n.isLogicSig)throw new Error("logic sign signing not yet supported...");s=Z(i,t.sk)}return s.blob}},signBase64Transactions(e,t){let n=[];return e.forEach(i=>{let s=this.decodeBase64UnsignedTransaction(i);n.push(s)}),this.signTransactionGroup(n,t)},signBase64TxnObjects(e,t){return this.signTxnObjectGroup(e,t)},decodeBase64UnsignedTransaction(e){return ce(x.Buffer.from(e,"base64"))},txnToStr(e){return x.Buffer.from(e.toByte()).toString("base64")},txnSummary(e){if(e.type){let t=e.to?et(e.to.publicKey):"",n=e.from?et(e.from.publicKey):"";if(e.type==="pay")return e.amount?`Send ${le(e.amount)} ALGO to ${t}`:`Send 0 ALGO to ${t}`;if(e.type==="axfer")return!e.amount&&t===n?`Opt-in to asset ID ${e.assetIndex}`:`Transfer ${e.amount?e.amount:0} of asset ID ${e.assetIndex} to ${t}`;if(e.type==="acfg")return e.assetUnitName?`Create asset ${e.assetName}, symbol ${e.assetUnitName}`:`Configure asset ${e.assetIndex}`;if(e.type==="afrz")return`Freeze asset ${e.assetIndex}`;if(e.type==="appl")switch(e.appOnComplete){case 0:return`Call to application ID ${e.appIndex}`;case 1:return`Opt-in to application ID ${e.appIndex}`;case 2:return`Close out application ID ${e.appIndex}`;case 3:return`Execute clear state program of application ID ${e.appIndex}`;case 4:return`Update application ID ${e.appIndex}`;case 5:return`Delete application ID ${e.appIndex}`;default:return`Call to application ID ${e.appIndex}`}else return`Transaction of type ${e.type} to ${t}`}else return e.toString()}},Yi=x.Buffer;export{ie as Algonaut,Jn as CLIENT_ID,Ti as CLIENT_IDS,O as CLIENT_MAP,Ei as CLIENT_PKGS,Ui as CLIENT_SDK_MAP,nn as addConnectedAccounts,Yi as buffer,Wi as default,Ci as enableWallets,Ii as excludeClients,Ct as getAccountsByProvider,Li as initClients,vi as initializeProviders,Di as inkey,m as nccState,ri as onChange,Si as reconnectProviders,on as setAsActiveAccount,_i as signTransactions,k as utils,ki as w3hOptionalDeps,lt as watch};
/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */
//# sourceMappingURL=index.mjs.map
